{"version":3,"file":"index.js","sources":["../src/Network/helpers/rpcFromConfig.ts","../src/Network/constants.ts","../src/helpers/http_client.ts","../src/helpers/network_helper.ts","../src/utils/FetchHTTPProvider.ts","../src/Network/getEthersProvider.ts","../src/Network/eventEmitter.ts","../src/common.ts","../src/Network/helpers/idFromAlias.ts","../src/Asset/Assets.ts","../src/Asset/ERC721/getErc721Token.ts","../src/helpers/tx_helper.ts","../src/errors.ts","../src/Asset/Erc20Token.ts","../src/Asset/Erc20.ts","../src/Network/network.ts","../src/Network/helpers/aliasFromNetworkID.ts","../src/Network/providers/AVMWebSocketProvider.ts","../src/Network/providers/EVMWebSocketProvider.ts","../src/Network/providers/WebsocketProvider.ts","../src/Network/utils.ts","../src/Keystore/Crypto.ts","../src/Keystore/constants.ts","../src/Keystore/keystore.ts","../src/Wallet/constants.ts","../src/Wallet/helpers/derivationHelper.ts","../src/helpers/utxo_helper.ts","../src/helpers/address_helper.ts","../src/utils/utils.ts","../src/utils/number_utils.ts","../src/utils/fee_utils.ts","../src/utils/waitTxUtils.ts","../src/utils/sleep.ts","../src/utils/CypherAES.ts","../src/Explorer/ortelius/utxoUtils.ts","../src/History/history_helpers.ts","../src/History/base_tx_parser.ts","../src/Explorer/snowtrace/constants.ts","../src/Explorer/snowtrace/utils.ts","../src/Explorer/snowtrace/snowtrace.ts","../src/Explorer/snowtrace/types.ts","../src/Explorer/ortelius/requests.ts","../src/Explorer/ortelius/utils.ts","../src/Explorer/coingecko/requests.ts","../src/History/importExportParser.ts","../src/History/parsers.ts","../src/History/evmParser.ts","../src/History/types.ts","../src/UniversalTx/UniversalNode.ts","../src/UniversalTx/UniversalNodeX.ts","../src/UniversalTx/UniversalNodeP.ts","../src/UniversalTx/UniversalNodeC.ts","../src/UniversalTx/utils.ts","../src/helpers/gas_helper.ts","../src/Wallet/Wallet.ts","../src/Wallet/HdScanner.ts","../src/Wallet/HDWalletAbstract.ts","../src/Wallet/EVM/EvmWalletReadonly.ts","../src/Wallet/PublicMnemonicWallet.ts","../src/Wallet/Ledger/utils.ts","../src/Wallet/Ledger/errors.ts","../src/Wallet/Ledger/LedgerWallet.ts","../src/Wallet/EVM/EvmWallet.ts","../src/Wallet/MnemonicWallet.ts","../src/Wallet/SingletonWallet.ts","../src/Csv/constants.ts","../src/Csv/createCsvContent.ts","../src/Csv/parseStakingTxs.ts","../src/Csv/parseNormalTxs.ts"],"sourcesContent":["import { NetworkConfig } from '../types';\n\nexport function getRpcC(conf: NetworkConfig) {\n    return `${conf.apiProtocol}://${conf.apiIp}:${conf.apiPort}/ext/bc/C/rpc`;\n}\nexport function getRpcX(conf: NetworkConfig) {\n    return `${conf.apiProtocol}://${conf.apiIp}:${conf.apiPort}/ext/bc/X`;\n}\nexport function getRpcP(conf: NetworkConfig) {\n    return `${conf.apiProtocol}://${conf.apiIp}:${conf.apiPort}/ext/bc/P`;\n}\n","import { NetworkConfig } from './types';\nimport {\n    DefaultPlatformChainID,\n    TestAvaxAssetID,\n    TestCBlockchainID,\n    TestXBlockchainID,\n} from '@c4tplatform/caminojs/dist/utils/constants';\nimport { getRpcC, getRpcP, getRpcX } from './helpers/rpcFromConfig';\n\nexport const LocalnetConfig: NetworkConfig = {\n    rawUrl: 'http://localhost:9650',\n    apiProtocol: 'http',\n    apiIp: 'localhost',\n    apiPort: 9650,\n    networkID: 12345,\n    // @ts-ignore\n    xChainID: TestXBlockchainID,\n    // @ts-ignore\n    pChainID: DefaultPlatformChainID,\n    // @ts-ignore\n    cChainID: TestCBlockchainID,\n    // @ts-ignore\n    evmChainID: 43112,\n    // @ts-ignore\n    avaxID: TestAvaxAssetID,\n    get rpcUrl() {\n        return {\n            c: getRpcC(this),\n            p: getRpcP(this),\n            x: getRpcX(this),\n        };\n    },\n};\n\n// Default network connection\nexport const DefaultConfig = LocalnetConfig;\n","export class HttpClient {\n    private TIMEOUT = 10000;\n\n    constructor(private baseURL: string) {}\n\n    get<T>(path: string, params?: Record<string, any>): Promise<T> {\n        const query = params && new URLSearchParams(params);\n        path = query ? `${path}?${query.toString()}` : path;\n        const url = `${this.baseURL}/${path}`;\n        const options = {\n            method: 'GET',\n            headers: { 'Content-Type': 'application/json' },\n        };\n        return this.handleResponse<T>(this.fetchWithTimeout(url, options));\n    }\n\n    post<T>(path: string, data: Record<string, any>): Promise<T> {\n        const url = `${this.baseURL}/${path}`;\n        const options = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(data),\n        };\n        return this.handleResponse<T>(this.fetchWithTimeout(url, options));\n    }\n\n    private async handleResponse<T>(responsePromise: Promise<Response>): Promise<T> {\n        const response = await responsePromise;\n        if (response.ok) {\n            return await response.json();\n        } else {\n            const errorMessage = await response.text();\n            return Promise.reject(new Error(errorMessage));\n        }\n    }\n\n    private async fetchWithTimeout(input: RequestInfo, options: RequestInit & { timeout?: number } = {}) {\n        const { timeout = this.TIMEOUT } = options;\n\n        const controller = new AbortController();\n        const id = setTimeout(() => controller.abort(), timeout);\n        const response = await fetch(input, {\n            ...options,\n            signal: controller.signal,\n        });\n        clearTimeout(id);\n        return response;\n    }\n}\n","import { NetworkConfig } from '@/Network/types';\n\nimport { Avalanche } from '@c4tplatform/caminojs/dist';\nimport { HttpClient } from './http_client';\n\nexport function wsUrlFromConfigX(config: NetworkConfig): string {\n    let protocol = config.apiProtocol === 'http' ? 'ws' : 'wss';\n    return `${protocol}://${config.apiIp}:${config.apiPort}/ext/bc/X/events`;\n}\n\nexport function wsUrlFromConfigEVM(config: NetworkConfig): string {\n    let protocol = config.apiProtocol === 'http' ? 'ws' : 'wss';\n    return `${protocol}://${config.apiIp}:${config.apiPort}/ext/bc/C/ws`;\n}\n\n/**\n * Given the base url of an Avalanche API, requests the Network ID\n * @param url The base url for the Avalanche API\n */\nexport async function getNetworkIdFromURL(url: string): Promise<number> {\n    // TODO: Not be the best to assume /ext/info but Avalanchejs complicates things\n    let res = await fetch(url + '/ext/info', {\n        method: 'POST',\n        body: JSON.stringify({\n            jsonrpc: '2.0',\n            id: 1,\n            method: 'info.getNetworkID',\n        }),\n    });\n    const data = await res.json();\n\n    return parseInt(data.result.networkID);\n}\n\nexport function createAvalancheProvider(config: NetworkConfig) {\n    return new Avalanche(config.apiIp, config.apiPort, config.apiProtocol, config.networkID);\n}\n\n/**\n * Given a network configuration returns an HttpClient instance connected to the explorer\n */\nexport function createExplorerApi(networkConfig: NetworkConfig) {\n    if (!networkConfig.explorerURL) {\n        throw new Error('Network configuration does not specify an explorer API.');\n    }\n\n    return new HttpClient(networkConfig.explorerURL);\n}\n\n/**\n * Given a network configuration returns an HttpClient instance connected to the signavault\n */\nexport function createSignavaultApi(networkConfig: NetworkConfig) {\n    if (!networkConfig.signavaultURL) {\n        throw new Error('Network configuration does not specify an explorer API.');\n    }\n\n    return new HttpClient(networkConfig.signavaultURL);\n}\n\n/**\n * Checks if the given network accepts credentials.\n * This must be true to use cookies.\n */\nexport async function canUseCredentials(config: NetworkConfig): Promise<boolean> {\n    let provider = createAvalancheProvider(config);\n    provider.setRequestConfig('withCredentials', true);\n\n    let infoApi = provider.Info();\n\n    // Make a dummy request with credentials\n    try {\n        await infoApi.getNetworkID();\n        return true;\n        // eslint-disable-next-line\n    } catch (e) {}\n\n    provider.setRequestConfig('withCredentials', false);\n\n    try {\n        await infoApi.getNetworkID();\n    } catch (e) {\n        throw new Error('Unable to connect.');\n    }\n\n    return false;\n}\n","const NETWORK_TIMEOUT = 'NETWORK_REQUEST_TIMEOUT';\n\n/**\n * HttpProvider should be used to send rpc calls over http\n */\nexport class FetchHttpProvider {\n    withCredentials: boolean;\n    timeout: number;\n    headers?: { name: string; value: string }[];\n    agent?: string;\n    connected: boolean;\n\n    constructor(\n        private host: string,\n        options?: {\n            withCredentials?: boolean;\n            timeout?: number;\n            headers?: { name: string; value: string }[];\n            agent?: string;\n            keepAlive?: boolean;\n        }\n    ) {\n        this.withCredentials = options?.withCredentials || false;\n        this.timeout = options?.timeout || 0;\n        this.headers = options?.headers;\n        this.agent = options?.agent;\n        this.connected = false;\n\n        this.host = host || 'http://localhost:8545';\n    }\n\n    private prepareRequest(body: string): Promise<unknown> {\n        return new Promise((resolve, reject) => {\n            fetch(this.host, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    ...this.headers?.reduce((prev, current) => ({ ...prev, [current.name]: current.value }), {}),\n                },\n                credentials: this.withCredentials ? 'include' : undefined,\n                body,\n            }).then(resolve, reject);\n\n            if (this.timeout) {\n                const e = new Error(NETWORK_TIMEOUT);\n                setTimeout(reject, this.timeout, e);\n            }\n        });\n    }\n\n    send(payload: unknown, callback: (error: Error | null, response?: any) => void) {\n        this.prepareRequest(JSON.stringify(payload))\n            .then((response: any) => response?.json())\n            .then((result) => {\n                this.connected = true;\n                callback(null, result);\n            })\n            .catch((e) => {\n                if (e?.message === NETWORK_TIMEOUT) {\n                    callback(new Error('CONNECTION TIMEOUT: timeout of ' + this.timeout + ' ms achived'));\n                    return;\n                }\n\n                const error = new Error(\"CONNECTION ERROR: Couldn't connect to node \" + this.host + '.') as any;\n                if (e) {\n                    error.code = e.code;\n                    error.reason = e.reason;\n                }\n\n                this.connected = false;\n                callback(error);\n            });\n    }\n\n    disconnect() {\n        //NO OP\n    }\n\n    supportsSubscriptions() {\n        return false;\n    }\n}\n","import { ethers } from 'ethers';\nimport { NetworkConfig } from '@/Network/types';\n\nexport function getEthersJsonRpcProvider(config: NetworkConfig) {\n    return new ethers.providers.JsonRpcProvider(config.rpcUrl.c, {\n        name: '',\n        chainId: config.evmChainID,\n    });\n}\n","import { NetworkConfig } from '@/Network/types';\nimport EventEmitter from 'events';\n\n/**\n * Fire network change event\n * @param newNetwork The newly connected network config\n */\nexport function emitNetworkChange(newNetwork: NetworkConfig) {\n    networkEvents.emit('network_change', newNetwork);\n}\n\nconst MAX_LISTENERS = 100;\n\nexport const networkEvents: EventEmitter = new EventEmitter();\nnetworkEvents.setMaxListeners(MAX_LISTENERS);\n","import { BinTools } from '@c4tplatform/caminojs/dist';\n\nexport const bintools = BinTools.getInstance();\n\nexport type ChainIdType = 'X' | 'P' | 'C';\n","import { ChainIdType } from '@/common';\nimport { avalanche } from '@/Network/network';\n\n/**\n * Given a chain alias, returns the chain id.\n * @param alias `X`, `P` or `C`\n */\nexport function chainIdFromAlias(alias: ChainIdType) {\n    if (alias === 'X') {\n        return avalanche().XChain().getBlockchainID();\n    } else if (alias === 'P') {\n        return avalanche().PChain().getBlockchainID();\n    } else if (alias === 'C') {\n        return avalanche().CChain().getBlockchainID();\n    }\n    throw new Error('Unknown chain alias.');\n}\n","import { avalanche } from '@/Network/network';\n\nimport { iAssetCache, iAssetDescriptionClean } from '@/Asset/types';\nimport xss from 'xss';\nlet assetCache: iAssetCache = {};\n\nexport function getAssetDescriptionSync(assetId: string): iAssetDescriptionClean {\n    if (typeof assetCache[assetId] === 'undefined') throw new Error(`Asset ID ${assetId} is not known.`);\n    return assetCache[assetId];\n}\n\n/**\n * Uses the node api to get meta data given an asset ID. Saves the result to cache.\n * @param assetId\n */\nexport async function getAssetDescription(assetId: string): Promise<iAssetDescriptionClean> {\n    let cache = assetCache[assetId];\n    if (cache) {\n        return cache;\n    }\n\n    try {\n        let res = await avalanche().XChain().getAssetDescription(assetId);\n        let clean: iAssetDescriptionClean = {\n            ...res,\n            assetID: assetId,\n            name: xss(res.name),\n            symbol: xss(res.symbol),\n        };\n\n        assetCache[assetId] = clean;\n        return clean;\n    } catch (e) {\n        throw new Error(`Asset ${assetId} does not exist.`);\n    }\n}\n","import { ERC721Abi } from '@/helpers/tx_helper';\nimport { ContractFactory, ContractInterface } from 'ethers';\n// import { web3 } from '@/Network';\n// import { AbiItem } from 'web3-utils';\n/**\n * Returns an ethers ERC721 Contract\n * @param address\n */\nexport function getErc721TokenEthers(address: string) {\n    return ContractFactory.getContract(address, (ERC721Abi as unknown) as ContractInterface);\n}\n\n/**\n * Returns an web3 ERC721 Contract\n * @param address\n */\n// export function getErc721TokenWeb3(address: string) {\n//     return new web3.eth.Contract(abi as AbiItem[], address);\n// }\n","import { avalanche, ethersProvider, web3 } from '@/Network/network';\n\nimport { BN, Buffer } from '@c4tplatform/caminojs/dist';\nimport {\n    AVMConstants,\n    MinterSet,\n    NFTMintOutput,\n    UnsignedTx as AVMUnsignedTx,\n    UTXO as AVMUTXO,\n    UTXOSet as AVMUTXOSet,\n    UTXOSet,\n} from '@c4tplatform/caminojs/dist/apis/avm';\n\nimport { PayloadBase } from '@c4tplatform/caminojs/dist/utils';\nimport { OutputOwners } from '@c4tplatform/caminojs/dist/common';\nimport { PlatformVMConstants, UTXOSet as PlatformUTXOSet } from '@c4tplatform/caminojs/dist/apis/platformvm';\n\nimport { EVMConstants } from '@c4tplatform/caminojs/dist/apis/evm';\n\nimport { FeeMarketEIP1559Transaction, Transaction } from '@ethereumjs/tx';\nimport { Chain, Common, Hardfork } from '@ethereumjs/common';\n\nimport ERC20Abi from '@/Abi/ERC20.json';\nimport ERC721Abi from '@/Abi/ERC721.json';\nimport { bintools } from '@/common';\nimport { ExportChainsC, ExportChainsP, ExportChainsX } from '@/Wallet/types';\nimport { chainIdFromAlias } from '@/Network/helpers/idFromAlias';\nimport { getErc721TokenEthers } from '@/Asset';\n\nexport async function buildCreateNftFamilyTx(\n    name: string,\n    symbol: string,\n    groupNum: number,\n    fromAddrs: string[],\n    minterAddr: string,\n    changeAddr: string,\n    utxoSet: UTXOSet\n) {\n    let fromAddresses = fromAddrs;\n    let changeAddress = changeAddr;\n    let minterAddress = minterAddr;\n\n    const minterSets: MinterSet[] = [];\n\n    // Create the groups\n    for (let i = 0; i < groupNum; i++) {\n        const minterSet: MinterSet = new MinterSet(1, [minterAddress]);\n        minterSets.push(minterSet);\n    }\n\n    let unsignedTx: AVMUnsignedTx = await avalanche()\n        .XChain()\n        .buildCreateNFTAssetTx(utxoSet, fromAddresses, [changeAddress], minterSets, name, symbol);\n    return unsignedTx;\n}\n\nexport async function buildMintNftTx(\n    mintUtxo: AVMUTXO,\n    payload: PayloadBase,\n    quantity: number,\n    ownerAddress: string,\n    changeAddress: string,\n    fromAddresses: string[],\n    utxoSet: UTXOSet\n): Promise<AVMUnsignedTx> {\n    let addrBuf = bintools.parseAddress(ownerAddress, 'X');\n    let owners = [];\n\n    let sourceAddresses = fromAddresses;\n\n    for (let i = 0; i < quantity; i++) {\n        let owner = new OutputOwners([addrBuf]);\n        owners.push(owner);\n    }\n\n    let groupID = (mintUtxo.getOutput() as NFTMintOutput).getGroupID();\n\n    let mintTx = await avalanche()\n        .XChain()\n        .buildCreateNFTMintTx(\n            utxoSet,\n            owners,\n            sourceAddresses,\n            [changeAddress],\n            mintUtxo.getUTXOID(),\n            groupID,\n            payload\n        );\n    return mintTx;\n}\n\nexport async function buildAvmExportTransaction(\n    destinationChain: ExportChainsX,\n    utxoSet: AVMUTXOSet,\n    fromAddresses: string[],\n    toAddress: string,\n    amount: BN, // export amount + fee\n    sourceChangeAddress: string\n) {\n    let destinationChainId = chainIdFromAlias(destinationChain);\n\n    return await avalanche()\n        .XChain()\n        .buildExportTx(utxoSet as AVMUTXOSet, amount, destinationChainId, [toAddress], fromAddresses, [\n            sourceChangeAddress,\n        ]);\n}\n\nexport async function buildPlatformExportTransaction(\n    utxoSet: PlatformUTXOSet,\n    fromAddresses: string[],\n    toAddress: string,\n    amount: BN, // export amount + fee\n    sourceChangeAddress: string,\n    destinationChain: ExportChainsP\n) {\n    let destinationChainId = chainIdFromAlias(destinationChain);\n\n    return await avalanche()\n        .PChain()\n        .buildExportTx(utxoSet, amount, destinationChainId, [toAddress], fromAddresses, [sourceChangeAddress]);\n}\n\n/**\n *\n * @param fromAddresses\n * @param toAddress\n * @param amount\n * @param fromAddressBech\n * @param destinationChain Either `X` or `P`\n * @param fee Export fee in nAVAX\n */\nexport async function buildEvmExportTransaction(\n    fromAddresses: string[],\n    toAddress: string,\n    amount: BN, // export amount + fee\n    fromAddressBech: string,\n    destinationChain: ExportChainsC,\n    fee: BN\n) {\n    let destinationChainId = chainIdFromAlias(destinationChain);\n\n    const nonce = await web3.eth.getTransactionCount(fromAddresses[0]);\n    const avaxAssetIDBuf: Buffer = await avalanche().XChain().getAVAXAssetID();\n    const avaxAssetIDStr: string = bintools.cb58Encode(avaxAssetIDBuf);\n\n    let fromAddressHex = fromAddresses[0];\n\n    return await avalanche()\n        .CChain()\n        .buildExportTx(\n            amount,\n            avaxAssetIDStr,\n            destinationChainId,\n            fromAddressHex,\n            fromAddressBech,\n            [toAddress],\n            nonce,\n            undefined,\n            undefined,\n            fee\n        );\n}\n\nexport async function buildEvmTransferEIP1559Tx(\n    from: string,\n    to: string,\n    amount: BN, // in wei\n    priorityFee: BN,\n    maxFee: BN,\n    gasLimit: number\n) {\n    const nonce = await web3.eth.getTransactionCount(from);\n    const chainId = await web3.eth.getChainId();\n    const networkId = await web3.eth.net.getId();\n\n    const common = Common.custom({ networkId, chainId });\n\n    const tx = FeeMarketEIP1559Transaction.fromTxData(\n        {\n            nonce: nonce,\n            maxFeePerGas: '0x' + maxFee.toString('hex'),\n            maxPriorityFeePerGas: '0x' + priorityFee.toString('hex'),\n            gasLimit: gasLimit,\n            to: to,\n            value: '0x' + amount.toString('hex'),\n            data: '0x',\n        },\n        { common }\n    );\n    return tx;\n}\n\nexport async function buildEvmTransferNativeTx(\n    from: string,\n    to: string,\n    amount: BN, // in wei\n    gasPrice: BN,\n    gasLimit: number\n) {\n    const nonce = await web3.eth.getTransactionCount(from);\n    const chainId = await web3.eth.getChainId();\n    const networkId = await web3.eth.net.getId();\n\n    const common = Common.custom({ networkId, chainId });\n\n    const tx = Transaction.fromTxData(\n        {\n            nonce: nonce,\n            gasPrice: '0x' + gasPrice.toString('hex'),\n            gasLimit: gasLimit,\n            to: to,\n            value: '0x' + amount.toString('hex'),\n            data: '0x',\n        },\n        { common }\n    );\n    return tx;\n}\n\nexport async function buildCustomEvmTx(\n    from: string,\n    gasPrice: BN,\n    gasLimit: number,\n    data?: string,\n    to?: string,\n    value?: string,\n    nonce?: number\n): Promise<Transaction> {\n    if (typeof nonce === 'undefined') {\n        nonce = await web3.eth.getTransactionCount(from);\n    }\n\n    const chainId = await web3.eth.getChainId();\n    const networkId = await web3.eth.net.getId();\n\n    const chainParams = {\n        common: Common.custom(\n            {\n                networkId,\n                chainId,\n            },\n            {\n                baseChain: Chain.Mainnet,\n                hardfork: Hardfork.Istanbul,\n            }\n        ),\n    };\n\n    let gasPriceHex = `0x${gasPrice.toString('hex')}`;\n\n    let tx = Transaction.fromTxData(\n        {\n            nonce,\n            gasPrice: gasPriceHex,\n            gasLimit,\n            value,\n            to,\n            data,\n        },\n        chainParams\n    );\n    return tx;\n}\n\nexport async function buildEvmTransferErc20Tx(\n    from: string,\n    to: string,\n    amount: BN, // in wei\n    gasPrice: BN,\n    gasLimit: number,\n    contractAddress: string\n) {\n    //@ts-ignore\n    const cont = new web3.eth.Contract(ERC20Abi.abi, contractAddress);\n    const tokenTx = cont.methods.transfer(to, amount.toString());\n\n    let data = tokenTx.encodeABI();\n\n    let tx = await buildCustomEvmTx(from, gasPrice, gasLimit, data, contractAddress);\n\n    return tx;\n}\n\nexport async function buildEvmTransferErc721Tx(\n    from: string,\n    to: string,\n    gasPrice: BN,\n    gasLimit: number,\n    tokenContract: string,\n    tokenId: number\n) {\n    const nonce = await web3.eth.getTransactionCount(from);\n    const chainId = await web3.eth.getChainId();\n    const networkId = await web3.eth.net.getId();\n    const chainParams = {\n        common: Common.custom(\n            {\n                networkId,\n                chainId,\n            },\n            {\n                baseChain: Chain.Mainnet,\n                hardfork: Hardfork.Istanbul,\n            }\n        ),\n    };\n    // @ts-ignore\n    const contract = new web3.eth.Contract(ERC721Abi.abi, tokenContract);\n    const tokenTx = contract.methods['safeTransferFrom(address,address,uint256)'](from, to, tokenId);\n\n    let tx = Transaction.fromTxData(\n        {\n            nonce: nonce,\n            gasPrice: '0x' + gasPrice.toString('hex'),\n            gasLimit: gasLimit,\n            value: '0x0',\n            to: tokenContract,\n            data: tokenTx.encodeABI(),\n        },\n        chainParams\n    );\n    return tx;\n}\n\nexport async function estimateErc20Gas(tokenContract: string, from: string, to: string, value: BN) {\n    //@ts-ignore\n    const contract = new web3.eth.Contract(ERC20Abi.abi, tokenContract);\n    const tokenTx = contract.methods.transfer(to, value.toString());\n    return await tokenTx.estimateGas({\n        from: from,\n    });\n}\n\n/**\n * Estimate the gas limit for the ERC721 `safeTransferFrom(address,address,uint256)` method.\n * @param contract\n * @param from\n * @param to\n * @param tokenID\n */\nexport async function estimateErc721TransferGas(contract: string, from: string, to: string, tokenID: number) {\n    let c = getErc721TokenEthers(contract);\n    c = c.connect(ethersProvider);\n    const gas = await c.estimateGas['safeTransferFrom(address,address,uint256)'](from, to, tokenID);\n    return gas.toNumber();\n}\n\n/**\n * Estimates the gas needed to send AVAX\n * @param to Destination address\n * @param amount Amount of AVAX to send, given in WEI\n * @param gasPrice Given in WEI\n */\nexport async function estimateAvaxGas(from: string, to: string, amount: BN, gasPrice: BN): Promise<number> {\n    try {\n        return await web3.eth.estimateGas({\n            from,\n            to,\n            gasPrice: `0x${gasPrice.toString('hex')}`,\n            value: `0x${amount.toString('hex')}`,\n        });\n    } catch (e) {\n        // TODO: Throws an error if we do not have enough avax balance\n        //TODO: Is it ok to return 21000\n        return 21000;\n    }\n}\n\nexport enum AvmTxNameEnum {\n    'Transaction' = AVMConstants.BASETX,\n    'Mint' = AVMConstants.CREATEASSETTX,\n    'Operation' = AVMConstants.OPERATIONTX,\n    'Import' = AVMConstants.IMPORTTX,\n    'Export' = AVMConstants.EXPORTTX,\n}\n\nexport enum PlatfromTxNameEnum {\n    'Transaction' = PlatformVMConstants.BASETX,\n    'Add Validator' = PlatformVMConstants.ADDVALIDATORTX,\n    'Add Delegator' = PlatformVMConstants.ADDDELEGATORTX,\n    'Import' = PlatformVMConstants.IMPORTTX,\n    'Export' = PlatformVMConstants.EXPORTTX,\n    'Add Subnet Validator' = PlatformVMConstants.ADDSUBNETVALIDATORTX,\n    'Create Chain' = PlatformVMConstants.CREATECHAINTX,\n    'Create Subnet' = PlatformVMConstants.CREATESUBNETTX,\n    'Advance Time' = PlatformVMConstants.ADVANCETIMETX,\n    'Reward Validator' = PlatformVMConstants.REWARDVALIDATORTX,\n}\n\n// TODO: create asset transactions\nexport enum ParseableAvmTxEnum {\n    'Transaction' = AVMConstants.BASETX,\n    'Import' = AVMConstants.IMPORTTX,\n    'Export' = AVMConstants.EXPORTTX,\n}\n\nexport enum ParseablePlatformEnum {\n    'Transaction' = PlatformVMConstants.BASETX,\n    'Add Validator' = PlatformVMConstants.ADDVALIDATORTX,\n    'Add Delegator' = PlatformVMConstants.ADDDELEGATORTX,\n    'Import' = PlatformVMConstants.IMPORTTX,\n    'Export' = PlatformVMConstants.EXPORTTX,\n}\n\nexport enum ParseableEvmTxEnum {\n    'Import' = EVMConstants.IMPORTTX,\n    'Export' = EVMConstants.EXPORTTX,\n}\n\nexport { ERC20Abi, ERC721Abi };\n","export const NO_NETWORK = new Error('No network selected.');\nexport const NO_EXPLORER_API = new Error('Explorer API not found.');\n","import { activeNetwork, web3 } from '@/Network/network';\nimport { ERC20Abi } from '@/helpers/tx_helper';\nimport { Erc20TokenData } from '@/Asset/types';\nimport { NO_NETWORK } from '@/errors';\nimport { BN } from '@c4tplatform/caminojs/dist';\nimport { Contract } from 'web3-eth-contract';\nimport xss from 'xss';\nexport class Erc20Token {\n    contract: Contract;\n    address: string;\n    name: string;\n    symbol: string;\n    decimals: number;\n    chainId: number;\n    data: Erc20TokenData;\n\n    constructor(data: Erc20TokenData) {\n        this.name = xss(data.name);\n        this.symbol = xss(data.symbol);\n        this.address = data.address;\n        this.decimals = data.decimals;\n        this.chainId = data.chainId;\n        this.data = data;\n\n        //@ts-ignore\n        this.contract = new web3.eth.Contract(ERC20Abi.abi, data.address);\n    }\n\n    toData(): Erc20TokenData {\n        return this.data;\n    }\n\n    static async getData(address: string): Promise<Erc20TokenData> {\n        //@ts-ignore\n        let contract = new web3.eth.Contract(ERC20Abi.abi, address);\n\n        let contractCalls = await Promise.all([\n            contract.methods.name().call(),\n            contract.methods.symbol().call(),\n            contract.methods.decimals().call(),\n        ]);\n        // Purify the values for XSS protection\n        let name = xss(contractCalls[0]);\n        let symbol = xss(contractCalls[1]);\n        let decimals = parseInt(contractCalls[2]);\n\n        if (!activeNetwork) {\n            throw NO_NETWORK;\n        }\n\n        return {\n            name,\n            symbol,\n            decimals,\n            address,\n            chainId: activeNetwork.evmChainID,\n        };\n    }\n\n    async balanceOf(address: string): Promise<BN> {\n        let bal = await this.contract.methods.balanceOf(address).call();\n        return new BN(bal);\n    }\n}\n","import { Erc20Store, Erc20TokenData } from '@/Asset/types';\nimport { Erc20Token } from '@/Asset/Erc20Token';\n\nexport let erc20Cache: Erc20Store = {};\n\nexport function getErc20Cache(): Erc20Store {\n    return {\n        ...erc20Cache,\n    };\n}\n\n/**\n * Clears the internal erc20 cache.\n */\nexport function bustErc20Cache() {\n    erc20Cache = {};\n}\n\n/**\n * Fetches ERC20 data from the given contract address and adds the token to the given store.\n * @param address ERC20 Contract address\n */\nasync function addErc20Token(address: string): Promise<Erc20Token> {\n    let existing = erc20Cache[address];\n    if (existing) {\n        return existing;\n    }\n\n    try {\n        let data: Erc20TokenData = await Erc20Token.getData(address);\n        let token = new Erc20Token(data);\n\n        erc20Cache[address] = token;\n        return token;\n    } catch (e) {\n        throw new Error('Unable to add ERC20 contract.');\n    }\n}\n\n/**\n * Initates and caches an erc20 token from the given data.\n * @param data Information such as name, symbol, and address about the ERC20 token.\n */\nexport function addErc20TokenFromData(data: Erc20TokenData): Erc20Token {\n    let address = data.address;\n    let existing = erc20Cache[address];\n    if (existing) {\n        return existing;\n    }\n\n    let token = new Erc20Token(data);\n    erc20Cache[address] = token;\n    return token;\n}\n\nexport async function getContractDataErc20(address: string): Promise<Erc20TokenData> {\n    try {\n        let data: Erc20TokenData = await Erc20Token.getData(address);\n        return data;\n    } catch (e) {\n        throw new Error(`ERC20 contract ${address} does not exist.`);\n    }\n}\n\nexport async function getErc20Token(address: string): Promise<Erc20Token> {\n    let storeItem = erc20Cache[address];\n    if (storeItem) {\n        return storeItem;\n    } else {\n        return await addErc20Token(address);\n    }\n}\n","import { Avalanche } from '@c4tplatform/caminojs/dist';\nimport Web3 from 'web3';\nimport { DefaultConfig } from './constants';\nimport { NetworkConfig, NetworkConfigRpc, NetworkProtocolType } from './types';\nimport { getRpcC, getRpcP, getRpcX } from './helpers/rpcFromConfig';\nimport { createAvalancheProvider } from '@/helpers/network_helper';\nimport { FetchHttpProvider } from '@/utils/FetchHTTPProvider';\nimport { getEthersJsonRpcProvider } from '@/Network/getEthersProvider';\nimport { ethers } from 'ethers';\nimport { HttpClient } from '@/helpers/http_client';\nimport { emitNetworkChange } from '@/Network/eventEmitter';\nimport { bustErc20Cache } from '@/Asset/Erc20';\n\nlet avaInst: Avalanche = createAvalancheProvider(DefaultConfig);\n\nexport const avalanche = () => avaInst;\n\nfunction getProviderFromUrl(url: string, credentials = false) {\n    return new FetchHttpProvider(url, {\n        timeout: 20000,\n        withCredentials: credentials,\n    });\n}\n\nconst rpcUrl = getRpcC(DefaultConfig);\nexport const web3 = new Web3(getProviderFromUrl(rpcUrl, true) as any);\n// JSON RPC Ethers provider\nexport let ethersProvider: ethers.providers.JsonRpcProvider = getEthersJsonRpcProvider(DefaultConfig);\nexport let explorer_api: HttpClient | null = null;\nexport let activeNetwork: NetworkConfig = DefaultConfig;\n\n/**\n * Returns the evm chain ID of the active network\n */\nexport function getEvmChainID(): number {\n    return activeNetwork.evmChainID;\n}\n\n/**\n * Changes the connected network of the SDK.\n * This is a synchronous call that does not do any network requests.\n * @param conf\n * @param credentials\n */\nexport function setAvalanche(ava: Avalanche): void {\n    avaInst = ava;\n\n    let conf: NetworkConfig = {\n        rawUrl: ava.getURL(),\n        apiProtocol: ava.getProtocol().toLowerCase() as NetworkProtocolType,\n        apiIp: ava.getHost(),\n        apiPort: ava.getPort(),\n        networkID: ava.getNetworkID(),\n        xChainID: ava.getNetwork().X.blockchainID,\n        pChainID: ava.getNetwork().P.blockchainID,\n        cChainID: ava.getNetwork().C.blockchainID,\n        avaxID: ava.getNetwork().X.avaxAssetID,\n        evmChainID: ava.getNetwork().C.chainID ?? 0,\n        get rpcUrl(): NetworkConfigRpc {\n            return {\n                c: getRpcC(this),\n                p: getRpcP(this),\n                x: getRpcX(this),\n            };\n        },\n    };\n\n    const useCredentials = ava.getRequestConfig().withCredentials === true;\n\n    let rpcUrl = getRpcC(conf);\n    web3.setProvider(getProviderFromUrl(rpcUrl, useCredentials) as any);\n    // Update ethers provider\n    ethersProvider = getEthersJsonRpcProvider(conf);\n\n    activeNetwork = conf;\n\n    emitNetworkChange(conf);\n    bustErc20Cache();\n}\n","import { ChainIdType } from '@/common';\nimport { activeNetwork } from '@/Network/network';\n\n/**\n * Given the chain ID returns the chain alias\n * @param id Chain id\n */\nexport function idToChainAlias(id: string): ChainIdType {\n    if (id === activeNetwork.xChainID) {\n        return 'X';\n    } else if (id === activeNetwork.pChainID) {\n        return 'P';\n    } else if (id === activeNetwork.cChainID) {\n        return 'C';\n    }\n    throw new Error('Unknown chain ID.');\n}\n","import Sockette from 'sockette';\nimport { PubSub } from '@c4tplatform/caminojs/dist';\nimport { WalletType } from '@/Wallet/types';\n\nconst FILTER_ADDRESS_SIZE = 1000;\n\nexport class AVMWebSocketProvider {\n    isConnected = false;\n    socket: Sockette;\n\n    wallets: WalletType[] = [];\n    boundHandler: any;\n\n    constructor(wsUrl: string) {\n        this.boundHandler = () => this.onWalletAddressChange();\n        this.socket = new Sockette(wsUrl, {\n            onopen: () => {\n                this.onOpen();\n            },\n            onclose: () => {\n                this.onClose();\n            },\n            onmessage: () => {\n                this.onMessage();\n            },\n            onerror: () => {\n                this.onError();\n            },\n        });\n    }\n\n    /**\n     * Starts watching for transactions on this wallet.\n     * @param wallet The wallet instance to track\n     */\n    trackWallet(wallet: WalletType): void {\n        if (this.wallets.includes(wallet)) {\n            return;\n        }\n        this.wallets.push(wallet);\n\n        wallet.on('addressChanged', this.boundHandler);\n        this.updateFilterAddresses();\n    }\n\n    onWalletAddressChange(): void {\n        this.updateFilterAddresses();\n    }\n\n    removeWallet(w: WalletType): void {\n        if (!this.wallets.includes(w)) {\n            return;\n        }\n\n        let index = this.wallets.indexOf(w);\n        this.wallets.splice(index, 1);\n        w.off('addressChanged', this.boundHandler);\n    }\n\n    setEndpoint(wsUrl: string): void {\n        this.socket.close();\n\n        this.socket = new Sockette(wsUrl, {\n            onopen: () => {\n                this.onOpen();\n            },\n            onclose: () => {\n                this.onClose();\n            },\n            onmessage: () => {\n                this.onMessage();\n            },\n            onerror: () => {\n                this.onError();\n            },\n        });\n    }\n\n    // Clears the filter listening to X chain transactions\n    clearFilter(): void {\n        let pubsub = new PubSub();\n        let bloom = pubsub.newBloom(FILTER_ADDRESS_SIZE);\n        this.socket.send(bloom);\n    }\n\n    /**\n     * Creates a bloom filter from the addresses of the tracked wallets and subscribes to\n     * transactions on the node.\n     */\n    updateFilterAddresses() {\n        if (!this.isConnected) {\n            return;\n        }\n\n        let wallets = this.wallets;\n\n        let addrs = [];\n        for (let i = 0; i < wallets.length; i++) {\n            let w = wallets[i];\n            let externalAddrs = w.getExternalAddressesXSync();\n            let addrsLen = externalAddrs.length;\n            let startIndex = Math.max(0, addrsLen - FILTER_ADDRESS_SIZE);\n            let addAddrs = externalAddrs.slice(startIndex);\n            addrs.push(...addAddrs);\n        }\n\n        let pubsub = new PubSub();\n        let bloom = pubsub.newBloom(FILTER_ADDRESS_SIZE);\n        this.socket.send(bloom);\n\n        // Divide addresses by 100 and send multiple messages\n        // There is a max msg size ~10kb\n        const GROUP_AMOUNT = 100;\n        let index = 0;\n        while (index < addrs.length) {\n            let chunk = addrs.slice(index, index + GROUP_AMOUNT);\n            let addAddrs = pubsub.addAddresses(chunk);\n            this.socket.send(addAddrs);\n            index += GROUP_AMOUNT;\n        }\n    }\n\n    private updateWalletBalanceX() {\n        this.wallets.forEach((w) => {\n            w.updateUtxosX();\n        });\n    }\n\n    private onOpen() {\n        this.isConnected = true;\n        this.updateFilterAddresses();\n    }\n\n    private onMessage() {\n        this.updateWalletBalanceX();\n    }\n\n    private onClose() {\n        this.isConnected = false;\n    }\n\n    private onError() {}\n}\n","import { ethers } from 'ethers';\nimport { WalletType } from '@/Wallet/types';\n\nconst SOCKET_RECONNECT_TIMEOUT = 1000;\n\nexport class EVMWebSocketProvider {\n    provider: ethers.providers.WebSocketProvider;\n    wsUrl: string;\n    wallets: WalletType[] = [];\n\n    constructor(wsUrl: string) {\n        let provider = new ethers.providers.WebSocketProvider(wsUrl);\n        this.provider = provider;\n        this.wsUrl = wsUrl;\n\n        this.addListeners();\n    }\n\n    setEndpoint(wsUrl: string): void {\n        this.destroyConnection();\n        let provider = new ethers.providers.WebSocketProvider(wsUrl);\n        this.provider = provider;\n        this.wsUrl = wsUrl;\n\n        this.addListeners();\n    }\n\n    trackWallet(wallet: WalletType): void {\n        if (this.wallets.includes(wallet)) {\n            return;\n        }\n\n        this.wallets.push(wallet);\n    }\n\n    removeWallet(wallet: WalletType): void {\n        if (!this.wallets.includes(wallet)) {\n            return;\n        }\n\n        let index = this.wallets.indexOf(wallet);\n        this.wallets.splice(index, 1);\n    }\n\n    async destroyConnection(): Promise<void> {\n        this.provider._websocket.onclose = () => {};\n        await this.provider.destroy();\n    }\n\n    async reconnect(): Promise<void> {\n        // Clear the current onclose handler so that we dont attempt a reconnection\n        await this.destroyConnection();\n        let wsProvider = new ethers.providers.WebSocketProvider(this.wsUrl);\n        this.provider = wsProvider;\n    }\n\n    private addListeners() {\n        let provider = this.provider;\n\n        provider.on('block', () => {\n            this.onBlock();\n        });\n\n        // Save default function so we can keep calling it\n        let defaultOnOpen = provider._websocket.onopen;\n        let defaultOnClose = provider._websocket.onclose;\n\n        provider._websocket.onopen = (ev: any) => {\n            if (defaultOnOpen) defaultOnOpen(ev);\n        };\n\n        provider._websocket.onclose = (ev: any) => {\n            if (defaultOnClose) defaultOnClose(ev);\n\n            setTimeout(() => {\n                this.reconnect();\n            }, SOCKET_RECONNECT_TIMEOUT);\n        };\n    }\n\n    private removeListeners() {\n        this.provider.off('block', this.onBlock);\n    }\n\n    private onBlock() {\n        // Update wallet balances\n        this.wallets.forEach((w) => {\n            w.updateAvaxBalanceC();\n        });\n    }\n}\n","import { AVMWebSocketProvider } from '@/Network/providers/AVMWebSocketProvider';\nimport { EVMWebSocketProvider } from '@/Network/providers/EVMWebSocketProvider';\nimport { WalletType } from '@/Wallet/types';\nimport { NetworkConfig } from '@/Network/types';\nimport { wsUrlFromConfigEVM, wsUrlFromConfigX } from '@/helpers/network_helper';\nimport { activeNetwork } from '@/Network/network';\n\nexport class WebsocketProvider {\n    avmProvider: AVMWebSocketProvider;\n    evmProvider: EVMWebSocketProvider;\n\n    constructor(avmEndpoint: string, evmEndpoint: string) {\n        this.avmProvider = new AVMWebSocketProvider(avmEndpoint);\n        this.evmProvider = new EVMWebSocketProvider(evmEndpoint);\n    }\n\n    static fromActiveNetwork(): WebsocketProvider {\n        return WebsocketProvider.fromNetworkConfig(activeNetwork);\n    }\n\n    static fromNetworkConfig(config: NetworkConfig): WebsocketProvider {\n        let evm = wsUrlFromConfigEVM(config);\n        let avm = wsUrlFromConfigX(config);\n        return new WebsocketProvider(avm, evm);\n    }\n\n    public setEndpoints(avmEndpoint: string, evmEndpoint: string): void {\n        this.avmProvider.setEndpoint(avmEndpoint);\n        this.evmProvider.setEndpoint(evmEndpoint);\n    }\n\n    public setNetwork(config: NetworkConfig): void {\n        let evm = wsUrlFromConfigEVM(config);\n        let avm = wsUrlFromConfigX(config);\n        this.setEndpoints(avm, evm);\n    }\n\n    public trackWallet(wallet: WalletType): void {\n        this.avmProvider.trackWallet(wallet);\n        this.evmProvider.trackWallet(wallet);\n    }\n\n    public removeWallet(wallet: WalletType): void {\n        this.avmProvider.removeWallet(wallet);\n        this.evmProvider.removeWallet(wallet);\n    }\n}\n","import { NetworkConfig } from '@/Network/types';\nimport { LocalnetConfig } from '@/Network/constants';\nimport { activeNetwork } from '@/Network/network';\n\nexport function isFujiNetwork(_: NetworkConfig) {\n    return false;\n}\n\nexport function isMainnetNetwork(_: NetworkConfig) {\n    return false;\n}\n\nexport function isLocalNetwork(activeNetwork: NetworkConfig) {\n    return activeNetwork.networkID === LocalnetConfig.networkID;\n}\n\nexport function getAvaxAssetID() {\n    return activeNetwork.avaxID;\n}\n\nexport function getActiveNetworkConfig() {\n    return activeNetwork;\n}\n","import { Buffer } from 'buffer/';\nimport createHash from 'create-hash';\n\n/**\n * @ignore\n */\n\n/**\n * Helper utility for encryption and password hashing, browser-safe.\n * Encryption is using AES-GCM with a random public nonce.\n */\nexport default class CryptoHelpers {\n    protected ivSize = 12;\n\n    protected saltSize = 16;\n\n    protected tagLength = 128;\n\n    protected aesLength = 256;\n\n    public keygenIterations = 200000; //3.0, 2.0 uses 100000\n\n    /**\n     * Internal-intended function for cleaning passwords.\n     *\n     * @param password\n     * @param salt\n     */\n    _pwcleaner(password: string, slt: Buffer): Buffer {\n        const pw: Buffer = Buffer.from(password, 'utf8');\n        return this.sha256(Buffer.concat([pw, slt]));\n    }\n    /**\n     * Internal-intended function for producing an intermediate key.\n     *\n     * @param pwkey\n     */\n\n    async _keyMaterial(pwkey: Buffer): Promise<CryptoKey> {\n        return crypto.subtle.importKey('raw', new Uint8Array(pwkey), { name: 'PBKDF2' }, false, ['deriveKey']);\n    }\n\n    /**\n     * Internal-intended function for turning an intermediate key into a salted key.\n     *\n     * @param keyMaterial\n     * @param salt\n     */\n    async _deriveKey(keyMaterial: CryptoKey, salt: Buffer): Promise<CryptoKey> {\n        return crypto.subtle.deriveKey(\n            {\n                name: 'PBKDF2',\n                salt,\n                iterations: this.keygenIterations,\n                hash: 'SHA-256',\n            },\n            keyMaterial,\n            { name: 'AES-GCM', length: this.aesLength },\n            false,\n            ['encrypt', 'decrypt']\n        );\n    }\n\n    /**\n     * A SHA256 helper function.\n     *\n     * @param message The message to hash\n     *\n     * @returns A {@link https://github.com/feross/buffer|Buffer} containing the SHA256 hash of the message\n     */\n    sha256(message: string | Buffer): Buffer {\n        let buff: Buffer;\n        if (typeof message === 'string') {\n            buff = Buffer.from(message, 'utf8');\n        } else {\n            buff = Buffer.from(message);\n        }\n        return Buffer.from(createHash('sha256').update(buff).digest()); // ensures correct Buffer class is used\n    }\n\n    /**\n     * Generates a randomized {@link https://github.com/feross/buffer|Buffer} to be used as a salt\n     */\n    makeSalt(): Buffer {\n        const salt = Buffer.alloc(this.saltSize);\n        crypto.getRandomValues(salt);\n        return salt;\n    }\n\n    /**\n     * Produces a password-safe hash.\n     *\n     * @param password A string for the password\n     * @param salt An optional {@link https://github.com/feross/buffer|Buffer} containing a salt used in the password hash\n     *\n     * @returns An object containing the \"salt\" and the \"hash\" produced by this function, both as {@link https://github.com/feross/buffer|Buffer}.\n     */\n    async pwhash(password: string, salt: Buffer): Promise<{ salt: Buffer; hash: Buffer }> {\n        let slt: Buffer;\n        if (salt instanceof Buffer) {\n            slt = salt;\n            // @ts-ignore\n        } else if (salt instanceof Uint8Array && process.env.NODE_ENV === 'test') {\n            slt = salt;\n        } else {\n            slt = this.makeSalt();\n        }\n\n        const hash: Buffer = this._pwcleaner(password, this._pwcleaner(password, slt));\n        return { salt: slt, hash };\n    }\n\n    /**\n     * Encrypts plaintext with the provided password using AES-GCM.\n     *\n     * @param password A string for the password\n     * @param plaintext The plaintext to encrypt\n     * @param salt An optional {@link https://github.com/feross/buffer|Buffer} for the salt to use in the encryption process\n     *\n     * @returns An object containing the \"salt\", \"iv\", and \"ciphertext\", all as {@link https://github.com/feross/buffer|Buffer}.\n     */\n    async encrypt(\n        password: string,\n        plaintext: Buffer | string,\n        salt: Buffer | undefined = undefined\n    ): Promise<{ salt: Buffer; iv: Buffer; ciphertext: Buffer }> {\n        let slt: Buffer;\n        if (typeof salt !== 'undefined' && salt instanceof Buffer) {\n            slt = salt;\n        } else {\n            slt = this.makeSalt();\n        }\n\n        let pt: Buffer;\n        if (typeof plaintext !== 'undefined' && plaintext instanceof Buffer) {\n            pt = plaintext;\n        } else {\n            pt = Buffer.from(plaintext, 'utf8');\n        }\n        const pwkey: Buffer = this._pwcleaner(password, slt);\n        const keyMaterial: CryptoKey = await this._keyMaterial(pwkey);\n        const pkey: CryptoKey = await this._deriveKey(keyMaterial, slt);\n        const iv: Buffer = Buffer.from(crypto.getRandomValues(new Uint8Array(this.ivSize)));\n\n        const ciphertext: Buffer = Buffer.from(\n            await crypto.subtle.encrypt(\n                {\n                    name: 'AES-GCM',\n                    iv,\n                    additionalData: slt,\n                    tagLength: this.tagLength,\n                },\n                pkey,\n                pt\n            )\n        );\n\n        return {\n            salt: slt,\n            iv,\n            ciphertext,\n        };\n    }\n\n    /**\n     * Decrypts ciphertext with the provided password, iv, and salt.\n     *\n     * @param password A string for the password\n     * @param ciphertext A {@link https://github.com/feross/buffer|Buffer} for the ciphertext\n     * @param salt A {@link https://github.com/feross/buffer|Buffer} for the salt\n     * @param iv A {@link https://github.com/feross/buffer|Buffer} for the iv\n     */\n    async decrypt(password: string, ciphertext: Buffer, salt: Buffer, iv: Buffer): Promise<Buffer> {\n        const pwkey: Buffer = this._pwcleaner(password, salt);\n        const keyMaterial: CryptoKey = await this._keyMaterial(pwkey);\n        const pkey: CryptoKey = await this._deriveKey(keyMaterial, salt);\n\n        const pt: Buffer = Buffer.from(\n            await crypto.subtle.decrypt(\n                {\n                    name: 'AES-GCM',\n                    iv, // The initialization vector you used to encrypt\n                    additionalData: salt, // The addtionalData you used to encrypt (if any)\n                    tagLength: 128, // The tagLength you used to encrypt (if any)\n                },\n                pkey, // from generateKey or importKey above\n                ciphertext // ArrayBuffer of the data\n            )\n        );\n        return pt;\n    }\n\n    constructor() {}\n}\n","export const SUPPORTED_VERSION = ['2.0', '3.0', '4.0', '5.0', '6.0'];\nexport const KEYSTORE_VERSION = '6.0'; // the current version\nexport const ITERATIONS_V2 = 100000;\nexport const ITERATIONS_V3 = 200000; // and any version above\n","// Functions to manage import/export of keystore files\nimport {\n    AllKeyFileDecryptedTypes,\n    AllKeyFileTypes,\n    KeyFileDecryptedV2,\n    KeyFileDecryptedV3,\n    KeyFileDecryptedV4,\n    KeyFileDecryptedV5,\n    KeyFileDecryptedV6,\n    KeyFileKeyDecryptedV2,\n    KeyFileKeyDecryptedV3,\n    KeyFileKeyDecryptedV4,\n    KeyFileKeyDecryptedV5,\n    KeyFileKeyDecryptedV6,\n    KeyFileKeyV2,\n    KeyFileKeyV3,\n    KeyFileKeyV4,\n    KeyFileKeyV5,\n    KeyFileKeyV6,\n    KeyFileV2,\n    KeyFileV3,\n    KeyFileV4,\n    KeyFileV5,\n    KeyFileV6,\n    KeystoreFileKeyType,\n} from './types';\nimport { avalanche } from '@/Network/network';\nimport { Buffer } from 'buffer/';\nimport { MnemonicWallet } from '@/Wallet/MnemonicWallet';\nimport Crypto from './Crypto';\nimport { SingletonWallet } from '@/Wallet/SingletonWallet';\nimport { AccessWalletMultipleInput } from './types';\n// import { keyToKeypair } from '@/helpers/helper'\nimport * as bip39 from 'bip39';\nimport { bintools } from '@/common';\nimport { Buffer as AjsBuffer } from '@c4tplatform/caminojs/dist';\nimport { ITERATIONS_V2, ITERATIONS_V3, KEYSTORE_VERSION } from '@/Keystore/constants';\n\nconst cryptoHelpers = new Crypto();\n\ninterface IHash {\n    salt: Buffer;\n    hash: Buffer;\n}\n\ninterface PKCrypt {\n    salt: Buffer;\n    iv: Buffer;\n    ciphertext: Buffer;\n}\n\nexport async function readV2(data: KeyFileV2, pass: string) {\n    const version: string = data.version;\n    cryptoHelpers.keygenIterations = ITERATIONS_V2;\n\n    let salt: Buffer = bintools.cb58Decode(data.salt);\n    let pass_hash: string = data.pass_hash;\n\n    let checkHashString: string;\n    let checkHash: Buffer = await cryptoHelpers._pwcleaner(pass, salt);\n    checkHashString = bintools.cb58Encode(AjsBuffer.from(checkHash));\n\n    if (checkHashString !== pass_hash) {\n        throw 'INVALID_PASS';\n    }\n\n    let keys: KeyFileKeyV2[] = data.keys;\n    let keysDecrypt: KeyFileKeyDecryptedV2[] = [];\n\n    for (let i = 0; i < keys.length; i++) {\n        let key_data: KeyFileKeyV2 = keys[i];\n\n        let key: Buffer = bintools.cb58Decode(key_data.key);\n        let nonce: Buffer = bintools.cb58Decode(key_data.iv);\n\n        let key_decrypt: Buffer = await cryptoHelpers.decrypt(pass, key, salt, nonce);\n        let key_string = bintools.cb58Encode(AjsBuffer.from(key_decrypt));\n\n        keysDecrypt.push({\n            key: key_string,\n        });\n    }\n\n    return {\n        version,\n        activeIndex: 0,\n        keys: keysDecrypt,\n    };\n}\nexport async function readV3(data: KeyFileV3, pass: string) {\n    const version: string = data.version;\n    cryptoHelpers.keygenIterations = ITERATIONS_V3;\n\n    let salt: Buffer = bintools.cb58Decode(data.salt);\n    let pass_hash: string = data.pass_hash;\n\n    let checkHashString: string;\n    let checkHash: IHash = await cryptoHelpers.pwhash(pass, salt);\n    checkHashString = bintools.cb58Encode(AjsBuffer.from(checkHash.hash));\n\n    if (checkHashString !== pass_hash) {\n        throw 'INVALID_PASS';\n    }\n\n    let keys: KeyFileKeyV3[] = data.keys;\n    let keysDecrypt: KeyFileKeyDecryptedV3[] = [];\n\n    for (let i = 0; i < keys.length; i++) {\n        let key_data: KeyFileKeyV3 = keys[i];\n\n        let key: Buffer = bintools.cb58Decode(key_data.key);\n        let nonce: Buffer = bintools.cb58Decode(key_data.iv);\n\n        let key_decrypt: Buffer = await cryptoHelpers.decrypt(pass, key, salt, nonce);\n        let key_string = bintools.cb58Encode(AjsBuffer.from(key_decrypt));\n\n        keysDecrypt.push({\n            key: key_string,\n        });\n    }\n\n    return {\n        version,\n        activeIndex: 0,\n        keys: keysDecrypt,\n    };\n}\nexport async function readV4(data: KeyFileV4, pass: string): Promise<KeyFileDecryptedV5> {\n    const version = data.version;\n    cryptoHelpers.keygenIterations = ITERATIONS_V3;\n\n    let salt: Buffer = bintools.cb58Decode(data.salt);\n    let pass_hash: string = data.pass_hash;\n\n    let checkHashString: string;\n    let checkHash: IHash = await cryptoHelpers.pwhash(pass, salt);\n    checkHashString = bintools.cb58Encode(AjsBuffer.from(checkHash.hash));\n\n    if (checkHashString !== pass_hash) {\n        throw 'INVALID_PASS';\n    }\n\n    let keys: KeyFileKeyV4[] = data.keys;\n    let keysDecrypt: KeyFileKeyDecryptedV4[] = [];\n\n    for (let i = 0; i < keys.length; i++) {\n        let key_data: KeyFileKeyV4 = keys[i];\n\n        let key: Buffer = bintools.cb58Decode(key_data.key);\n        let nonce: Buffer = bintools.cb58Decode(key_data.iv);\n\n        let key_decrypt: Buffer = await cryptoHelpers.decrypt(pass, key, salt, nonce);\n        let key_string = bintools.cb58Encode(AjsBuffer.from(key_decrypt));\n\n        keysDecrypt.push({\n            key: key_string,\n        });\n    }\n\n    return {\n        version,\n        activeIndex: 0,\n        keys: keysDecrypt,\n    };\n}\n\nexport async function readV5(data: KeyFileV5, pass: string): Promise<KeyFileDecryptedV5> {\n    const version: string = data.version;\n    cryptoHelpers.keygenIterations = ITERATIONS_V3;\n\n    let salt: Buffer = bintools.cb58Decode(data.salt);\n    let pass_hash = data.pass_hash;\n\n    let checkHashString: string;\n    let checkHash: IHash = await cryptoHelpers.pwhash(pass, salt);\n    checkHashString = bintools.cb58Encode(AjsBuffer.from(checkHash.hash));\n\n    if (checkHashString !== pass_hash) {\n        throw 'INVALID_PASS';\n    }\n\n    let keys: KeyFileKeyV5[] = data.keys;\n    let keysDecrypt: KeyFileKeyDecryptedV5[] = [];\n\n    for (let i = 0; i < keys.length; i++) {\n        let key_data: KeyFileKeyV5 = keys[i];\n\n        let key: Buffer = bintools.cb58Decode(key_data.key);\n        let nonce: Buffer = bintools.cb58Decode(key_data.iv);\n\n        let key_decrypt: Buffer = await cryptoHelpers.decrypt(pass, key, salt, nonce);\n        let key_string = key_decrypt.toString();\n\n        keysDecrypt.push({\n            key: key_string,\n        });\n    }\n\n    return {\n        version,\n        activeIndex: 0,\n        keys: keysDecrypt,\n    };\n}\n\nexport async function readV6(data: KeyFileV6, pass: string): Promise<KeyFileDecryptedV6> {\n    const version: string = data.version;\n    const activeIndex = data.activeIndex;\n    cryptoHelpers.keygenIterations = ITERATIONS_V3;\n\n    let salt: Buffer = bintools.cb58Decode(data.salt);\n\n    let keys: KeyFileKeyV6[] = data.keys;\n    let keysDecrypt: KeyFileKeyDecryptedV6[] = [];\n\n    for (let i = 0; i < keys.length; i++) {\n        let key_data: KeyFileKeyV6 = keys[i];\n\n        let key: Buffer = bintools.cb58Decode(key_data.key);\n        let type: KeystoreFileKeyType = key_data.type;\n        let nonce: Buffer = bintools.cb58Decode(key_data.iv);\n\n        let key_decrypt: Buffer;\n        try {\n            key_decrypt = await cryptoHelpers.decrypt(pass, key, salt, nonce);\n        } catch (e) {\n            throw 'INVALID_PASS';\n        }\n\n        const key_string = key_decrypt.toString();\n\n        keysDecrypt.push({\n            key: key_string,\n            type: type,\n        });\n    }\n\n    return {\n        version,\n        activeIndex: activeIndex || 0,\n        keys: keysDecrypt,\n    };\n}\n\n/**\n * Will decrypt and return the keys of the encrypted wallets in the given json file\n * @param data A JSON file of encrypted wallet keys\n * @param pass The password to decrypt the keys\n */\nexport async function readKeyFile(data: AllKeyFileTypes, pass: string): Promise<AllKeyFileDecryptedTypes> {\n    switch (data.version) {\n        case '6.0':\n            return await readV6(data as KeyFileV6, pass);\n        case '5.0':\n            return await readV5(data as KeyFileV5, pass);\n        case '4.0':\n            return await readV4(data as KeyFileV4, pass);\n        case '3.0':\n            return await readV3(data as KeyFileV3, pass);\n        case '2.0':\n            return await readV2(data as KeyFileV2, pass);\n        default:\n            throw 'INVALID_VERSION';\n    }\n}\n\nexport function extractKeysV2(\n    file: KeyFileDecryptedV2 | KeyFileDecryptedV3 | KeyFileDecryptedV4\n): AccessWalletMultipleInput[] {\n    let chainID = avalanche().XChain().getBlockchainAlias();\n    let keys = (file as KeyFileDecryptedV2 | KeyFileDecryptedV3 | KeyFileDecryptedV4).keys;\n\n    return keys.map((key) => {\n        // Private keys from the keystore file do not have the PrivateKey- prefix\n        let pk = 'PrivateKey-' + key.key;\n        // let keypair = keyToKeypair(pk, chainID)\n        let keypair = avalanche().XChain().newKeyChain().importKey(pk);\n\n        let keyBuf = keypair.getPrivateKey();\n        let keyHex: string = keyBuf.toString('hex');\n        let paddedKeyHex = keyHex.padStart(64, '0');\n        let mnemonic: string = bip39.entropyToMnemonic(paddedKeyHex);\n\n        return {\n            key: mnemonic,\n            type: 'mnemonic',\n        };\n    });\n}\n\nexport function extractKeysV5(file: KeyFileDecryptedV5): AccessWalletMultipleInput[] {\n    return file.keys.map((key) => ({\n        key: key.key,\n        type: 'mnemonic',\n    }));\n}\n\nexport function extractKeysV6(file: KeyFileDecryptedV6): AccessWalletMultipleInput[] {\n    return file.keys.map((key) => ({\n        type: key.type,\n        key: key.key,\n    }));\n}\n\nexport function extractKeysFromDecryptedFile(file: AllKeyFileDecryptedTypes): AccessWalletMultipleInput[] {\n    switch (file.version) {\n        case '6.0':\n            return extractKeysV6(file as KeyFileDecryptedV6);\n        case '5.0':\n            return extractKeysV5(file as KeyFileDecryptedV5);\n        case '4.0':\n            return extractKeysV2(file as KeyFileDecryptedV4);\n        case '3.0':\n            return extractKeysV2(file as KeyFileDecryptedV3);\n        case '2.0':\n            return extractKeysV2(file as KeyFileDecryptedV2);\n        default:\n            throw 'INVALID_VERSION';\n    }\n}\n\n/**\n * Given an array of wallets, the active index, and a password, return an encrypted JSON object that is the keystore file\n * @param wallets An array of wallet to encrypt\n * @param pass Password used in encryption\n * @param activeIndex Index of the active wallet in the `wallets` array\n * @return Returns a JSON object that can later be decrypted with `readKeyfile` and the given password\n */\nexport async function makeKeyfile(\n    wallets: (MnemonicWallet | SingletonWallet)[],\n    pass: string,\n    activeIndex: number\n): Promise<KeyFileV6> {\n    // 3.0 and above uses 200,000\n    cryptoHelpers.keygenIterations = ITERATIONS_V3;\n\n    let salt: Buffer = await cryptoHelpers.makeSalt();\n\n    let keys: KeyFileKeyV6[] = [];\n\n    for (let i = 0; i < wallets.length; i++) {\n        let wallet = wallets[i];\n        let key;\n        let type: KeystoreFileKeyType;\n        if (wallet.type === 'singleton') {\n            key = (wallet as SingletonWallet).key;\n            type = 'singleton';\n        } else {\n            key = (wallet as MnemonicWallet).getMnemonic();\n            type = 'mnemonic';\n        }\n        let pk_crypt: PKCrypt = await cryptoHelpers.encrypt(pass, key, salt);\n\n        let key_data: KeyFileKeyV6 = {\n            key: bintools.cb58Encode(AjsBuffer.from(pk_crypt.ciphertext)),\n            iv: bintools.cb58Encode(AjsBuffer.from(pk_crypt.iv)),\n            type: type,\n        };\n        keys.push(key_data);\n    }\n\n    let file_data: KeyFileV6 = {\n        version: KEYSTORE_VERSION,\n        salt: bintools.cb58Encode(AjsBuffer.from(salt)),\n        activeIndex,\n        keys: keys,\n    };\n    return file_data;\n}\n","// HD WALLET\n// m / purpose' / coin_type' / account' / change / address_index\n\nexport const AVAX_TOKEN_INDEX: string = '9000';\nexport const AVAX_TOKEN_PATH = `m/44'/${AVAX_TOKEN_INDEX}'`;\nexport const AVAX_ACCOUNT_PATH: string = `m/44'/${AVAX_TOKEN_INDEX}'/0'`; // Change and index left out\nexport const ETH_ACCOUNT_PATH: string = `m/44'/60'/0'`;\nexport const LEDGER_ETH_ACCOUNT_PATH = ETH_ACCOUNT_PATH + '/0/0';\n\nexport const HD_SCAN_GAP_SIZE: number = 20; // a gap of at least 20 indexes is needed to claim an index unused\nexport const SCAN_SIZE: number = 70; // the total number of utxos to look at initially to calculate last index\nexport const HD_SCAN_LOOK_UP_WINDOW: number = 64; // Number of addresses to check with the explorer at a single call\nexport const SCAN_RANGE: number = SCAN_SIZE - HD_SCAN_GAP_SIZE; // How many items are actually scanned\n\nexport const LEDGER_EXCHANGE_TIMEOUT = 90_000;\nexport const MIN_EVM_SUPPORT_V = '0.5.3';\n/**\n * In order to free the thread when deriving addresses, the execution will sleep every N address derived\n */\nexport const DERIVATION_SLEEP_INTERVAL = 200;\n","import { AVAX_TOKEN_PATH, ETH_ACCOUNT_PATH } from '@/Wallet/constants';\n\n/**\n * Given an account number, returns the Avalanche account derivation path as a string\n * @param accountIndex\n */\nexport function getAccountPathAvalanche(accountIndex: number) {\n    if (accountIndex < 0) throw new Error('Account index can not be less than 0.');\n    return `${AVAX_TOKEN_PATH}/${accountIndex}'`;\n}\n\n/**\n * Returns the string `m/44'/60'/0'/0/n` where `n` is the account index.\n * @param accountIndex\n */\nexport function getAccountPathEVM(accountIndex: number) {\n    if (accountIndex < 0) throw new Error('Account index can not be less than 0.');\n    return `${ETH_ACCOUNT_PATH}/0/${accountIndex}`;\n}\n","import { UTXOSet as AVMUTXOSet } from '@c4tplatform/caminojs/dist/apis/avm/utxos';\nimport { UTXOSet as PlatformUTXOSet } from '@c4tplatform/caminojs/dist/apis/platformvm/utxos';\nimport { UTXOSet as EVMUTXOSet } from '@c4tplatform/caminojs/dist/apis/evm/utxos';\nimport { avalanche } from '@/Network/network';\nimport { ExportChainsC, ExportChainsP, ExportChainsX } from '@/Wallet/types';\nimport { chainIdFromAlias } from '@/Network/helpers/idFromAlias';\nimport { GetStakeResponse } from '@c4tplatform/caminojs/dist/apis/platformvm/interfaces';\n\n/**\n *\n * @param addrs an array of X chain addresses to get the atomic utxos of\n * @param sourceChain Which chain to check against, either `P` or `C`\n */\nexport async function avmGetAtomicUTXOs(addrs: string[], sourceChain: ExportChainsX): Promise<AVMUTXOSet> {\n    const selection = addrs.slice(0, 1024);\n    const remaining = addrs.slice(1024);\n\n    const sourceChainId = chainIdFromAlias(sourceChain);\n    let utxoSet = (await avalanche().XChain().getUTXOs(selection, sourceChainId)).utxos;\n\n    if (remaining.length > 0) {\n        const nextSet = await avmGetAtomicUTXOs(remaining, sourceChain);\n        utxoSet = utxoSet.merge(nextSet);\n    }\n    return utxoSet;\n}\n\n// todo: Use end index to get ALL utxos\nexport async function platformGetAtomicUTXOs(addrs: string[], sourceChain: ExportChainsP): Promise<PlatformUTXOSet> {\n    let selection = addrs.slice(0, 1024);\n    let remaining = addrs.slice(1024);\n    const sourceChainId = chainIdFromAlias(sourceChain);\n\n    let utxoSet = (await avalanche().PChain().getUTXOs(selection, sourceChainId)).utxos;\n    if (remaining.length > 0) {\n        let nextSet = await platformGetAtomicUTXOs(remaining, sourceChain);\n        utxoSet = utxoSet.merge(nextSet);\n    }\n    return utxoSet;\n}\n\n// todo: Use end index to get ALL utxos\nexport async function evmGetAtomicUTXOs(addrs: string[], sourceChain: ExportChainsC): Promise<EVMUTXOSet> {\n    if (addrs.length > 1024) {\n        throw new Error('Number of addresses can not be greater than 1024.');\n    }\n    const sourceChainId = chainIdFromAlias(sourceChain);\n    let result: EVMUTXOSet = (await avalanche().CChain().getUTXOs(addrs, sourceChainId)).utxos;\n    return result;\n}\n\nexport async function getStakeForAddresses(addrs: string[]): Promise<GetStakeResponse> {\n    if (addrs.length <= 256) {\n        let data = await avalanche().PChain().getStake(addrs);\n        return data;\n    } else {\n        //Break the list in to 1024 chunks\n        let chunk = addrs.slice(0, 256);\n        let remainingChunk = addrs.slice(256);\n\n        let chunkData = await avalanche().PChain().getStake(chunk);\n        let chunkStake = chunkData.staked;\n        let chunkUtxos = chunkData.stakedOutputs;\n\n        let next = await getStakeForAddresses(remainingChunk);\n        return {\n            staked: chunkStake.add(next.staked),\n            stakedOutputs: [...chunkUtxos, ...next.stakedOutputs],\n        };\n    }\n}\n\nexport async function avmGetAllUTXOs(addrs: string[]): Promise<AVMUTXOSet> {\n    if (addrs.length <= 1024) {\n        let utxos = await avmGetAllUTXOsForAddresses(addrs);\n        return utxos;\n    } else {\n        //Break the list in to 1024 chunks\n        let chunk = addrs.slice(0, 1024);\n        let remainingChunk = addrs.slice(1024);\n\n        let newSet = await avmGetAllUTXOsForAddresses(chunk);\n        return newSet.merge(await avmGetAllUTXOs(remainingChunk));\n    }\n}\n\nexport async function avmGetAllUTXOsForAddresses(addrs: string[], endIndex?: any): Promise<AVMUTXOSet> {\n    if (addrs.length > 1024) throw new Error('Maximum length of addresses is 1024');\n    let response;\n    if (!endIndex) {\n        response = await avalanche().XChain().getUTXOs(addrs);\n    } else {\n        response = await avalanche().XChain().getUTXOs(addrs, undefined, 0, endIndex);\n    }\n\n    let utxoSet = response.utxos;\n    let nextEndIndex = response.endIndex;\n    let len = response.numFetched;\n\n    if (len >= 1024) {\n        let subUtxos = await avmGetAllUTXOsForAddresses(addrs, nextEndIndex);\n        return utxoSet.merge(subUtxos);\n    }\n    return utxoSet;\n}\n\n// helper method to get utxos for more than 1024 addresses\nexport async function platformGetAllUTXOs(addrs: string[]): Promise<PlatformUTXOSet> {\n    if (addrs.length <= 1024) {\n        let newSet = await platformGetAllUTXOsForAddresses(addrs);\n        return newSet;\n    } else {\n        //Break the list in to 1024 chunks\n        let chunk = addrs.slice(0, 1024);\n        let remainingChunk = addrs.slice(1024);\n\n        let newSet = await platformGetAllUTXOsForAddresses(chunk);\n\n        return newSet.merge(await platformGetAllUTXOs(remainingChunk));\n    }\n}\n\nexport async function platformGetAllUTXOsForAddresses(addrs: string[], endIndex?: any): Promise<PlatformUTXOSet> {\n    let response;\n    if (!endIndex) {\n        response = await avalanche().PChain().getUTXOs(addrs);\n    } else {\n        response = await avalanche().PChain().getUTXOs(addrs, undefined, 0, endIndex);\n    }\n\n    let utxoSet = response.utxos;\n    let nextEndIndex = response.endIndex;\n    let len = response.numFetched;\n\n    if (len >= 1024) {\n        let subUtxos = await platformGetAllUTXOsForAddresses(addrs, nextEndIndex);\n        return utxoSet.merge(subUtxos);\n    }\n\n    return utxoSet;\n}\n","import { ChainIdType } from '@/common';\nimport Web3 from 'web3';\nimport { bintools } from '@/common';\n\nexport const validateAddress = (address: string): boolean | string => {\n    return validateAddressX(address) || validateAddressP(address) || validateAddressEVM(address);\n};\n\nexport function validateAddressX(address: string) {\n    try {\n        let buff = bintools.parseAddress(address, 'X');\n        if (!buff) return false;\n        return true;\n    } catch (error) {\n        return false;\n    }\n}\n\nexport function validateAddressP(address: string) {\n    try {\n        let buff = bintools.parseAddress(address, 'P');\n        if (!buff) return false;\n        return true;\n    } catch (error) {\n        return false;\n    }\n}\n\nexport function validateAddressEVM(address: string) {\n    return Web3.utils.isAddress(address);\n}\n\n/**\n * Returns the human readable part of a X or P bech32 address.\n * @param address\n */\nexport function getAddressHRP(address: string): string {\n    if (!validateAddress(address)) {\n        throw new Error('Invalid X or P address.');\n    }\n    return address.split('-')[1].split('1')[0];\n}\n\n/**\n * Given an address, return which Chain it belongs to\n * @param address\n */\nexport function getAddressChain(address: string): ChainIdType {\n    if (!validateAddress(address)) {\n        throw new Error('Invalid address.');\n    }\n\n    if (Web3.utils.isAddress(address)) {\n        return 'C';\n    } else {\n        return address[0] as ChainIdType;\n    }\n}\n","import { Buffer as BufferAvalanche } from '@c4tplatform/caminojs/dist';\nimport { validateAddress } from '@/helpers/address_helper';\nimport createHash from 'create-hash';\nimport { PayloadBase, PayloadTypes } from '@c4tplatform/caminojs/dist/utils';\n\n/**\n * Checks if address is valid.\n *\n * @return\n * boolean if address is valid, error message if not valid.\n */\nexport function isValidAddress(address: string): boolean {\n    return validateAddress(address) === true;\n}\n\nexport function digestMessage(msgStr: string): Buffer {\n    let mBuf = Buffer.from(msgStr, 'utf8');\n    let msgSize = Buffer.alloc(4);\n    msgSize.writeUInt32BE(mBuf.length, 0);\n    let msgBuf = Buffer.from(`\\x1AAvalanche Signed Message:\\n${msgSize}${msgStr}`, 'utf8');\n    return createHash('sha256').update(msgBuf).digest();\n}\n\nlet payloadtypes = PayloadTypes.getInstance();\n\nexport function parseNftPayload(rawPayload: string): PayloadBase {\n    let payload = BufferAvalanche.from(rawPayload, 'base64');\n    payload = BufferAvalanche.concat([new BufferAvalanche(4).fill(payload.length), payload]);\n\n    let typeId = payloadtypes.getTypeID(payload);\n    let pl: BufferAvalanche = payloadtypes.getContent(payload);\n    let payloadbase: PayloadBase = payloadtypes.select(typeId, pl);\n\n    return payloadbase;\n}\n","import { BN } from '@c4tplatform/caminojs/dist';\nimport Big from 'big.js';\n\ndeclare module 'big.js' {\n    interface Big {\n        toLocaleString(toFixed?: number): string;\n    }\n}\n\nBig.prototype.toLocaleString = function (toFixed: number = 9) {\n    let fixedStr = this.toFixed(toFixed, 0);\n    let split = fixedStr.split('.');\n    let wholeStr = parseInt(split[0]).toLocaleString('en-US');\n\n    if (split.length === 1) {\n        return wholeStr;\n    } else {\n        let remainderStr = split[1];\n\n        // remove trailing 0s\n        let lastChar = remainderStr.charAt(remainderStr.length - 1);\n        while (lastChar === '0') {\n            remainderStr = remainderStr.substring(0, remainderStr.length - 1);\n            lastChar = remainderStr.charAt(remainderStr.length - 1);\n        }\n\n        let trimmed = remainderStr.substring(0, toFixed);\n        if (!trimmed) return wholeStr;\n        return `${wholeStr}.${trimmed}`;\n    }\n};\n\n/**\n * @param val the amount to parse\n * @param denomination number of decimal places to parse with\n */\nexport function bnToBig(val: BN, denomination = 0): Big {\n    let mult = Big(10).pow(denomination);\n    return new Big(val.toString()).div(mult);\n}\n\n/**\n * Converts a BN amount of 18 decimals to 9.\n * Used for AVAX C <-> X,P conversions\n * @param amount\n */\nexport function avaxCtoX(amount: BN) {\n    let tens = new BN(10).pow(new BN(9));\n    return amount.div(tens);\n}\n\nexport function avaxXtoC(amount: BN) {\n    let tens = new BN(10).pow(new BN(9));\n    return amount.mul(tens);\n}\n\nexport function avaxPtoC(amount: BN) {\n    return avaxXtoC(amount);\n}\n\nexport function bnToBigAvaxX(val: BN): Big {\n    return bnToBig(val, 9);\n}\n\nexport function bnToBigAvaxP(val: BN): Big {\n    return bnToBigAvaxX(val);\n}\n\nexport function bnToBigAvaxC(val: BN): Big {\n    return bnToBig(val, 18);\n}\n\n/**\n * Parses the value using a denomination of 18\n *\n * @param val the amount to parse given in WEI\n *\n * @example\n * ```\n * bnToAvaxC(new BN('22500000000000000000')\n * // will return  22.5\n *```\n *\n */\nexport function bnToAvaxC(val: BN): string {\n    return bnToLocaleString(val, 18);\n}\n\n/**\n * Parses the value using a denomination of 9\n *\n * @param val the amount to parse given in nAVAX\n */\nexport function bnToAvaxX(val: BN): string {\n    return bnToLocaleString(val, 9);\n}\n\n/**\n * Parses the value using a denomination of 9\n *\n * @param val the amount to parse given in nAVAX\n */\nexport function bnToAvaxP(val: BN): string {\n    return bnToAvaxX(val);\n}\n\n/**\n *\n * @param val the number to parse\n * @param decimals number of decimal places used to parse the number\n */\nexport function numberToBN(val: number | string, decimals: number): BN {\n    let valBig = Big(val);\n    let tens = Big(10).pow(decimals);\n    let valBN = new BN(valBig.times(tens).toFixed(0));\n    return valBN;\n}\n\nexport function numberToBNAvaxX(val: number | string) {\n    return numberToBN(val, 9);\n}\n\nexport function numberToBNAvaxP(val: number | string) {\n    return numberToBNAvaxX(val);\n}\n\nexport function numberToBNAvaxC(val: number | string) {\n    return numberToBN(val, 18);\n}\n\n/**\n * @Remarks\n * A helper method to convert BN numbers to human readable strings.\n *\n * @param val The amount to convert\n * @param decimals Number of decimal places to parse the amount with\n *\n * @example\n * ```\n * bnToLocaleString(new BN(100095),2)\n * // will return '1,000.95'\n * ```\n */\nexport function bnToLocaleString(val: BN, decimals = 9): string {\n    let bigVal = bnToBig(val, decimals);\n    return bigToLocaleString(bigVal, decimals);\n}\n\nexport function bigToLocaleString(bigVal: Big, decimals: number = 9): string {\n    let fixedStr = bigVal.toFixed(decimals);\n    let split = fixedStr.split('.');\n    let wholeStr = parseInt(split[0]).toLocaleString('en-US');\n\n    if (split.length === 1) {\n        return wholeStr;\n    } else {\n        let remainderStr = split[1];\n\n        // remove trailing 0s\n        let lastChar = remainderStr.charAt(remainderStr.length - 1);\n        while (lastChar === '0') {\n            remainderStr = remainderStr.substring(0, remainderStr.length - 1);\n            lastChar = remainderStr.charAt(remainderStr.length - 1);\n        }\n\n        let trimmed = remainderStr.substring(0, decimals);\n        if (!trimmed) return wholeStr;\n        return `${wholeStr}.${trimmed}`;\n    }\n}\n\n/**\n * Converts a string to a BN value of the given denomination.\n * @param value The string value of the\n * @param decimals\n *\n * @example\n * ```\n * stringToBN('1.32', 5) // is same as BN(132000)\n * ```\n */\nexport function stringToBN(value: string, decimals: number) {\n    let big = Big(value);\n    let tens = Big(10).pow(decimals);\n    let mult = big.times(tens);\n    let rawStr = mult.toFixed(0, 0);\n    return new BN(rawStr);\n}\n\nexport function bigToBN(val: Big, denom: number): BN {\n    let denomFlr = Math.floor(denom);\n    if (denomFlr < 0) throw new Error('Denomination can not be less that 0.');\n\n    const bnBig = val.mul(Big(10).pow(denomFlr));\n    const bnStr = bnBig.toFixed(0, 0);\n    return new BN(bnStr);\n}\n","import { avalanche } from '@/Network/network';\nimport { BN } from '@c4tplatform/caminojs/dist';\n\n/**\n * Returns the transaction fee for X chain.\n */\nexport function getTxFeeX(): BN {\n    return avalanche().XChain().getTxFee();\n}\n\n/**\n * Returns the transaction fee for P chain.\n */\nexport function getTxFeeP(): BN {\n    return avalanche().PChain().getTxFee();\n}\n","import {\n    AvmStatusResponseType,\n    AvmStatusType,\n    ChainStatusResponseTypeC,\n    ChainStatusTypeC,\n    PlatformStatusResponseType,\n    PlatformStatusType,\n} from '@/utils/types';\nimport { avalanche, web3 } from '@/Network/network';\n\n/**\n * Waits until the given tx id is accepted on X chain\n * @param txId Tx ID to wait for\n * @param tryCount Number of attempts until timeout\n */\nexport async function waitTxX(txId: string, tryCount = 10): Promise<string> {\n    if (tryCount <= 0) {\n        throw new Error('Timeout');\n    }\n    let resp: AvmStatusResponseType;\n\n    try {\n        resp = (await avalanche().XChain().getTxStatus(txId)) as AvmStatusResponseType;\n    } catch (e) {\n        throw new Error('Unable to get transaction status.');\n    }\n\n    let status: AvmStatusType;\n    let reason;\n    if (typeof resp === 'string') {\n        status = resp as AvmStatusType;\n    } else {\n        status = resp.status as AvmStatusType;\n        reason = resp.reason;\n    }\n\n    if (status === 'Unknown' || status === 'Processing') {\n        return await new Promise((resolve) => {\n            setTimeout(async () => {\n                resolve(await waitTxX(txId, tryCount - 1));\n            }, 1000);\n        });\n        // return await waitTxX(txId, tryCount - 1);\n    } else if (status === 'Rejected') {\n        throw new Error(reason);\n    } else if (status === 'Accepted') {\n        return txId;\n    }\n\n    return txId;\n}\n\nexport async function waitTxP(txId: string, tryCount = 10): Promise<string> {\n    if (tryCount <= 0) {\n        throw new Error('Timeout');\n    }\n    let resp: PlatformStatusResponseType;\n\n    try {\n        resp = (await avalanche().PChain().getTxStatus(txId)) as PlatformStatusResponseType;\n    } catch (e) {\n        throw new Error('Unable to get transaction status.');\n    }\n\n    let status: PlatformStatusType;\n    let reason;\n    if (typeof resp === 'string') {\n        status = resp as PlatformStatusType;\n    } else {\n        status = resp.status as PlatformStatusType;\n        reason = resp.reason;\n    }\n\n    if (status === 'Unknown' || status === 'Processing') {\n        return await new Promise((resolve) => {\n            setTimeout(async () => {\n                resolve(await waitTxP(txId, tryCount - 1));\n            }, 1000);\n        });\n        // return await waitTxX(txId, tryCount - 1);\n    } else if (status === 'Dropped') {\n        throw new Error(reason);\n    } else if (status === 'Committed') {\n        return txId;\n    } else {\n        throw new Error('Unknown status type.');\n    }\n}\n\nexport async function waitTxEvm(txHash: string, tryCount = 10): Promise<string> {\n    if (tryCount <= 0) {\n        throw new Error('Timeout');\n    }\n\n    let receipt;\n\n    try {\n        receipt = await web3.eth.getTransactionReceipt(txHash);\n    } catch (e) {\n        throw new Error('Unable to get transaction receipt.');\n    }\n\n    if (!receipt) {\n        return await new Promise((resolve) => {\n            setTimeout(async () => {\n                resolve(await waitTxEvm(txHash, tryCount - 1));\n            }, 1000);\n        });\n    } else {\n        if (receipt.status) {\n            return txHash;\n        } else {\n            throw new Error('Transaction reverted.');\n        }\n    }\n}\n\nexport async function waitTxC(txId: string, tryCount = 10): Promise<string> {\n    if (tryCount <= 0) {\n        throw new Error('Timeout');\n    }\n\n    let resp: ChainStatusResponseTypeC;\n    try {\n        resp = (await avalanche().CChain().getAtomicTxStatus(txId)) as ChainStatusResponseTypeC;\n    } catch (e) {\n        throw new Error('Unable to get transaction status.');\n    }\n\n    let status: ChainStatusTypeC;\n    let reason;\n    if (typeof resp === 'string') {\n        status = resp as ChainStatusTypeC;\n    } else {\n        status = resp.status as ChainStatusTypeC;\n        reason = resp.reason;\n    }\n\n    if (status === 'Unknown' || status === 'Processing') {\n        return await new Promise((resolve) => {\n            setTimeout(async () => {\n                resolve(await waitTxC(txId, tryCount - 1));\n            }, 1000);\n        });\n        // return await waitTxX(txId, tryCount - 1);\n    } else if (status === 'Dropped') {\n        throw new Error(reason);\n    } else if (status === 'Accepted') {\n        return txId;\n    } else {\n        throw new Error('Unknown status type.');\n    }\n}\n","export async function sleep(durMs: number) {\n    return new Promise((resolve) => {\n        setTimeout(resolve, durMs);\n    });\n}\n","import CryptoJS from 'crypto-js/core';\nimport AES from 'crypto-js/aes';\nimport randomstring from 'randomstring';\n\n/**\n * A helper class to obfuscate strings when storing in memory. Used as a helper rather than secure encryption.\n * @Remarks Do NOT use this class for actual secure encryption needs.\n */\nexport class CypherAES {\n    private pass: string;\n    private encrypted: string;\n\n    constructor(value: string) {\n        this.pass = randomstring.generate(32);\n        this.encrypted = AES.encrypt(value, this.pass).toString();\n    }\n\n    public getValue() {\n        return AES.decrypt(this.encrypted, this.pass).toString(CryptoJS.enc.Utf8);\n    }\n}\n","import { OrteliusUTXO } from '@/Explorer';\nimport { BN } from '@c4tplatform/caminojs/dist';\nimport { iHistoryBaseTxTokenOwners } from '@/History';\n\nexport function filterDuplicateStrings(vals: string[]) {\n    return vals.filter((val, i) => vals.indexOf(val) === i);\n}\n\nexport function isArraysOverlap(arr1: any[], arr2: any[]): boolean {\n    let overlaps = arr1.filter((item) => arr2.includes(item));\n    return overlaps.length > 0;\n}\n\n/**\n * Returns true if this utxo is owned by any of the given addresses\n * @param ownerAddrs Addresses to check against\n * @param output The UTXO\n */\nexport function isOutputOwner(ownerAddrs: string[], output: OrteliusUTXO): boolean {\n    let outAddrs = output.addresses;\n    if (!outAddrs) return false;\n\n    let totAddrs = outAddrs.filter((addr) => {\n        return ownerAddrs.includes(addr);\n    });\n\n    return totAddrs.length > 0;\n}\n\nexport function isOutputOwnerC(ownerAddr: string, output: OrteliusUTXO): boolean {\n    let outAddrs = output.caddresses;\n    if (!outAddrs) return false;\n    return outAddrs.includes(ownerAddr);\n}\n\n/**\n * Returns the total amount of `assetID` in the given `utxos` owned by `address`. Checks for X/P addresses.\n * @param utxos UTXOs to calculate balance from.\n * @param addresses The wallet's  addresses.\n * @param assetID Only count outputs of this asset ID.\n * @param chainID Only count the outputs on this chain.\n * @param isStake Set to `true` if looking for staking utxos.\n */\nexport function getAssetBalanceFromUTXOs(\n    utxos: OrteliusUTXO[],\n    addresses: string[],\n    assetID: string,\n    chainID: string,\n    isStake = false\n) {\n    let myOuts = utxos.filter((utxo) => {\n        if (\n            assetID === utxo.assetID &&\n            isOutputOwner(addresses, utxo) &&\n            chainID === utxo.chainID &&\n            utxo.stake === isStake\n        ) {\n            return true;\n        }\n        return false;\n    });\n\n    let tot = myOuts.reduce((acc, utxo) => {\n        return acc.add(new BN(utxo.amount));\n    }, new BN(0));\n\n    return tot;\n}\n\n/**\n * Returns the total amount of `assetID` in the given `utxos` owned by `address`. Checks for EVM address.\n * @param utxos UTXOs to calculate balance from.\n * @param address The wallet's  evm address `0x...`.\n * @param assetID Only count outputs of this asset ID.\n * @param chainID Only count the outputs on this chain.\n * @param isStake Set to `true` if looking for staking utxos.\n */\nexport function getEvmAssetBalanceFromUTXOs(\n    utxos: OrteliusUTXO[],\n    address: string,\n    assetID: string,\n    chainID: string,\n    isStake = false\n) {\n    let myOuts = utxos.filter((utxo) => {\n        if (\n            assetID === utxo.assetID &&\n            isOutputOwnerC(address, utxo) &&\n            chainID === utxo.chainID &&\n            utxo.stake === isStake\n        ) {\n            return true;\n        }\n        return false;\n    });\n\n    let tot = myOuts.reduce((acc, utxo) => {\n        return acc.add(new BN(utxo.amount));\n    }, new BN(0));\n\n    return tot;\n}\n\n/**\n * Returns UTXOs owned by the given addresses\n * @param outs UTXOs to filter\n * @param myAddrs Addresses to filter by\n */\nexport function getOwnedOutputs(outs: OrteliusUTXO[], myAddrs: string[]) {\n    return outs.filter((out) => {\n        let outAddrs = out.addresses || [];\n        return isArraysOverlap(myAddrs, outAddrs);\n    });\n}\n\n/**\n * Returns addresses of the given UTXOs\n * @param outs UTXOs to get the addresses of.\n */\nexport function getAddresses(outs: OrteliusUTXO[]): string[] {\n    let allAddrs: string[] = [];\n\n    for (let i = 0; i < outs.length; i++) {\n        let out = outs[i];\n        let addrs = out.addresses || [];\n        allAddrs.push(...addrs);\n    }\n\n    // Remove duplicated\n    return allAddrs.filter((addr, i) => allAddrs.indexOf(addr) === i);\n}\n\n/**\n * Returns only the UTXOs of the given asset id.\n * @param outs\n * @param assetID\n */\nexport function getAssetOutputs(outs: OrteliusUTXO[], assetID: string) {\n    return outs.filter((out) => out.assetID === assetID);\n}\n\n/**\n * Returns UTXOs not owned by the given addresses\n * @param outs UTXOs to filter\n * @param myAddrs Addresses to filter by\n */\nexport function getNotOwnedOutputs(outs: OrteliusUTXO[], myAddrs: string[]) {\n    return outs.filter((out) => {\n        let outAddrs = out.addresses || [];\n        return !isArraysOverlap(myAddrs, outAddrs);\n    });\n}\n\nexport function getOutputTotals(outs: OrteliusUTXO[]) {\n    return outs.reduce((acc, out) => {\n        return acc.add(new BN(out.amount));\n    }, new BN(0));\n}\n\nexport function getRewardOuts(outs: OrteliusUTXO[]) {\n    return outs.filter((out) => out.rewardUtxo);\n}\n\n/**\n * Returns outputs belonging to the given chain ID\n * @param outs UTXOs to filter\n * @param chainID Chain ID to filter by\n */\nexport function getOutputsOfChain(outs: OrteliusUTXO[], chainID: string) {\n    return outs.filter((out) => out.chainID === chainID);\n}\n\n/**\n * Filters the UTXOs of a certain output type\n * @param outs UTXOs to filter\n * @param type Output type to filter by\n */\nexport function getOutputsOfType(outs: OrteliusUTXO[], type: number) {\n    return outs.filter((out) => out.outputType === type);\n}\n\n/**\n * Returns a map of asset id to owner addresses\n * @param outs\n */\nexport function getOutputsAssetOwners(outs: OrteliusUTXO[]): iHistoryBaseTxTokenOwners {\n    let assetIDs = getOutputsAssetIDs(outs);\n    let res: iHistoryBaseTxTokenOwners = {};\n\n    for (let i = 0; i < assetIDs.length; i++) {\n        let id = assetIDs[i];\n        let assetUTXOs = getAssetOutputs(outs, id);\n        let addrs = getAddresses(assetUTXOs);\n        res[id] = addrs;\n    }\n\n    return res;\n}\n\n/**\n * Returns an array of Asset IDs from the given UTXOs\n * @param outs Array of UTXOs\n */\nexport function getOutputsAssetIDs(outs: OrteliusUTXO[]): string[] {\n    let res = [];\n\n    for (let i = 0; i < outs.length; i++) {\n        let out = outs[i];\n        res.push(out.assetID);\n    }\n    return filterDuplicateStrings(res);\n}\n","import { OrteliusUTXO } from '@/Explorer';\nimport { iHistoryNftFamilyBalance } from '@/History/types';\nimport { AVMConstants } from '@c4tplatform/caminojs/dist/apis/avm';\nimport { parseNftPayload } from '@/utils';\nimport { isOutputOwner } from '@/Explorer/ortelius/utxoUtils';\n\n/**\n * Parse the raw memo field to readable text.\n * @param raw\n */\nexport function parseMemo(raw: string): string {\n    const memoText = new Buffer(raw, 'base64').toString('utf8');\n\n    // Bug that sets memo to empty string (AAAAAA==) for some tx types\n    if (!memoText.length || raw === 'AAAAAA==') return '';\n    return memoText;\n}\n\nexport function getNFTBalanceFromUTXOs(\n    utxos: OrteliusUTXO[],\n    addresses: string[],\n    assetID: string\n): iHistoryNftFamilyBalance {\n    let nftUTXOs = utxos.filter((utxo) => {\n        if (\n            utxo.outputType === AVMConstants.NFTXFEROUTPUTID &&\n            utxo.assetID === assetID &&\n            isOutputOwner(addresses, utxo)\n        ) {\n            return true;\n        }\n        return false;\n    });\n\n    let res: iHistoryNftFamilyBalance = {};\n    for (let i = 0; i < nftUTXOs.length; i++) {\n        let utxo = nftUTXOs[i];\n        let groupID = utxo.groupID;\n\n        let content;\n        if (utxo.payload) {\n            let parsedPayload = parseNftPayload(utxo.payload);\n            content = parsedPayload.getContent().toString();\n        }\n\n        if (res[groupID]) {\n            res[groupID].amount++;\n        } else {\n            res[groupID] = {\n                payload: content || '',\n                amount: 1,\n            };\n        }\n    }\n    return res;\n}\n","import {\n    iHistoryBaseTx,\n    iHistoryBaseTxNFTsReceivedRaw,\n    iHistoryBaseTxNFTsSentRaw,\n    iHistoryBaseTxToken,\n    iHistoryBaseTxTokenLossGain,\n    iHistoryBaseTxTokenOwners,\n} from '@/History';\nimport * as Assets from '@/Asset/Assets';\nimport { bnToLocaleString, getTxFeeX } from '@/utils';\nimport { AVMConstants } from '@c4tplatform/caminojs/dist/apis/avm';\nimport { BN } from '@c4tplatform/caminojs/dist';\nimport { getNFTBalanceFromUTXOs, parseMemo } from '@/History/history_helpers';\nimport {\n    filterDuplicateStrings,\n    getAssetOutputs,\n    getNotOwnedOutputs,\n    getOutputsAssetIDs,\n    getOutputsAssetOwners,\n    getOutputsOfType,\n    getOutputTotals,\n    getOwnedOutputs,\n} from '@/Explorer/ortelius/utxoUtils';\nimport { getAvaxAssetID } from '@/Network/utils';\nimport { OrteliusAvalancheTx, OrteliusUTXO } from '@/Explorer';\n\nexport async function getBaseTxSummary(tx: OrteliusAvalancheTx, ownerAddrs: string[]): Promise<iHistoryBaseTx> {\n    let ins = tx.inputs?.map((input) => input.output) || [];\n    let outs = tx.outputs || [];\n\n    // Calculate losses from inputs\n    let losses = getOwnedTokens(ins, ownerAddrs);\n    let gains = getOwnedTokens(outs, ownerAddrs);\n\n    let nowOwnedIns = getNotOwnedOutputs(ins, ownerAddrs);\n    let nowOwnedOuts = getNotOwnedOutputs(outs, ownerAddrs);\n\n    let froms = getOutputsAssetOwners(nowOwnedIns);\n    let tos = getOutputsAssetOwners(nowOwnedOuts);\n\n    let tokens = await getBaseTxTokensSummary(gains, losses, froms, tos);\n\n    return {\n        id: tx.id,\n        fee: getTxFeeX(),\n        type: 'transaction',\n        timestamp: new Date(tx.timestamp),\n        memo: parseMemo(tx.memo),\n        tokens: tokens,\n    };\n}\n\nfunction getBaseTxNFTLosses(tx: OrteliusAvalancheTx, ownerAddrs: string[]): iHistoryBaseTxNFTsSentRaw {\n    let ins = tx.inputs || [];\n    let inUTXOs = ins.map((input) => input.output);\n    let nftUTXOs = inUTXOs.filter((utxo) => {\n        return utxo.outputType === AVMConstants.NFTXFEROUTPUTID;\n    });\n\n    let res: iHistoryBaseTxNFTsSentRaw = {};\n    for (let assetID in tx.inputTotals) {\n        let nftBal = getNFTBalanceFromUTXOs(nftUTXOs, ownerAddrs, assetID);\n\n        // If empty dictionary pass\n        if (Object.keys(nftBal).length === 0) continue;\n\n        res[assetID] = nftBal;\n    }\n    return res;\n}\n\nfunction getBaseTxNFTGains(tx: OrteliusAvalancheTx, ownerAddrs: string[]): iHistoryBaseTxNFTsReceivedRaw {\n    let outs = tx.outputs || [];\n    let nftUTXOs = outs.filter((utxo) => {\n        return utxo.outputType === AVMConstants.NFTXFEROUTPUTID;\n    });\n    let res: iHistoryBaseTxNFTsReceivedRaw = {};\n\n    for (let assetID in tx.inputTotals) {\n        let nftBal = getNFTBalanceFromUTXOs(nftUTXOs, ownerAddrs, assetID);\n        // If empty dictionary pass\n        if (Object.keys(nftBal).length === 0) continue;\n\n        res[assetID] = nftBal;\n    }\n    return res;\n}\n\n/**\n * Returns a dictionary of asset totals belonging to the owner\n * @param utxos\n * @param ownerAddrs\n */\nfunction getOwnedTokens(utxos: OrteliusUTXO[], ownerAddrs: string[]): iHistoryBaseTxTokenLossGain {\n    let tokenUTXOs = getOutputsOfType(utxos, AVMConstants.SECPXFEROUTPUTID);\n    // Owned inputs\n    let myUTXOs = getOwnedOutputs(tokenUTXOs, ownerAddrs);\n\n    // Asset IDs received\n    let assetIDs = getOutputsAssetIDs(myUTXOs);\n\n    let res: iHistoryBaseTxTokenLossGain = {};\n\n    for (let i = 0; i < assetIDs.length; i++) {\n        let assetID = assetIDs[i];\n        let assetUTXOs = getAssetOutputs(myUTXOs, assetID);\n        let tot = getOutputTotals(assetUTXOs);\n        res[assetID] = tot;\n    }\n\n    return res;\n}\n\nasync function getBaseTxTokensSummary(\n    gains: iHistoryBaseTxTokenLossGain,\n    losses: iHistoryBaseTxTokenLossGain,\n    froms: iHistoryBaseTxTokenOwners,\n    tos: iHistoryBaseTxTokenOwners\n): Promise<iHistoryBaseTxToken[]> {\n    let res: iHistoryBaseTxToken[] = [];\n\n    let assetIDs = filterDuplicateStrings([...Object.keys(gains), ...Object.keys(losses)]);\n\n    // Fetch asset descriptions\n    let calls = assetIDs.map((id) => Assets.getAssetDescription(id));\n    let descs = await Promise.all(calls);\n    let descsDict: any = {};\n\n    // Convert array to dict\n    for (let i = 0; i < descs.length; i++) {\n        let desc = descs[i];\n        descsDict[desc.assetID] = desc;\n    }\n\n    for (let i = 0; i < assetIDs.length; i++) {\n        let id = assetIDs[i];\n        let tokenGain = gains[id] || new BN(0);\n        let tokenLost = losses[id] || new BN(0);\n        let tokenDesc = descsDict[id];\n\n        // If we sent avax, deduct the fee\n        if (id === getAvaxAssetID() && !tokenLost.isZero()) {\n            tokenLost = tokenLost.sub(getTxFeeX());\n        }\n\n        // How much we gained/lost of this token\n        let diff = tokenGain.sub(tokenLost);\n        let diffClean = bnToLocaleString(diff, tokenDesc.denomination);\n\n        // If we didnt gain or lose anything, ignore this token\n        if (diff.isZero()) continue;\n\n        if (diff.isNeg()) {\n            res.push({\n                amount: diff,\n                amountDisplayValue: diffClean,\n                addresses: tos[id],\n                asset: tokenDesc,\n            });\n        } else {\n            res.push({\n                amount: diff,\n                amountDisplayValue: diffClean,\n                addresses: froms[id],\n                asset: tokenDesc,\n            });\n        }\n    }\n\n    return res;\n}\n","export const SNOWTRACE_MAINNET = 'https://api.snowtrace.io';\nexport const SNOWTRACE_TESTNET = 'https://api-testnet.snowtrace.io';\n","import { SnowtraceErc20Tx, SnowtraceNormalTx } from '@/Explorer';\n\n/**\n * Filter duplicate Snowtrace transactions\n * @param txs\n */\nexport function filterDuplicateTransactions<Tx extends SnowtraceErc20Tx | SnowtraceNormalTx>(txs: Tx[]) {\n    const hashes = txs.map((tx) => tx.hash);\n    return txs.filter((tx, i) => {\n        return hashes.indexOf(tx.hash) === i;\n    });\n}\n","import { SNOWTRACE_MAINNET, SNOWTRACE_TESTNET } from '@/Explorer/snowtrace/constants';\nimport { isFujiNetwork, isMainnetNetwork, NetworkConfig } from '@/Network';\nimport { SnowtraceErc20Tx, SnowtraceNormalTx, SnowtraceResponse } from '@/Explorer/snowtrace/types';\nimport { filterDuplicateTransactions } from './utils';\n\nasync function fetchSnowtraceAPI<T>(query: string, isMainnet = true): Promise<T> {\n    const baseUrl = isMainnet ? SNOWTRACE_MAINNET : SNOWTRACE_TESTNET;\n    const response = await fetch(`${baseUrl}/${query}`);\n    return response.json();\n}\n\nexport async function getErc20History(\n    address: string,\n    networkConfig: NetworkConfig,\n    page = 0,\n    offset = 0,\n    contractAddress?: string\n) {\n    const contractQuery = contractAddress ? `&contractaddress=${contractAddress}` : '';\n    const sort = 'desc';\n    const query = `api?module=account&action=tokentx&address=${address}&sort=${sort}&page=${page}&offset=${offset}${contractQuery}`;\n\n    let resp;\n    if (isMainnetNetwork(networkConfig)) {\n        resp = await fetchSnowtraceAPI<SnowtraceResponse<SnowtraceErc20Tx>>(query);\n    } else if (isFujiNetwork(networkConfig)) {\n        resp = await fetchSnowtraceAPI<SnowtraceResponse<SnowtraceErc20Tx>>(query, false);\n    } else {\n        throw new Error('Snow trace is only available for Avalanche Mainnet and Testnet');\n    }\n\n    return filterDuplicateTransactions<SnowtraceErc20Tx>(resp.result);\n}\n\nexport async function getNormalHistory(address: string, networkConfig: NetworkConfig, page = 0, offset = 0) {\n    const sort = 'desc';\n    const query = `api?module=account&action=txlist&address=${address}&sort=${sort}&page=${page}&offset=${offset}`;\n\n    let resp;\n    if (isMainnetNetwork(networkConfig)) {\n        resp = await fetchSnowtraceAPI<SnowtraceResponse<SnowtraceNormalTx>>(query);\n    } else if (isFujiNetwork(networkConfig)) {\n        resp = await fetchSnowtraceAPI<SnowtraceResponse<SnowtraceNormalTx>>(query, false);\n    } else {\n        throw new Error('Snow trace is only available for Avalanche Mainnet and Testnet');\n    }\n    return filterDuplicateTransactions<SnowtraceNormalTx>(resp.result);\n}\n\n/**\n * https://docs.etherscan.io/api-endpoints/contracts#get-contract-abi-for-verified-contract-source-codes\n *\n * @param address\n * @param networkConfig\n * @returns string array, the first index is the ABI\n */\nexport async function getABIForContract(\n    address: string,\n    networkConfig: NetworkConfig\n): Promise<SnowtraceResponse<string>> {\n    const isMainnet = isMainnetNetwork(networkConfig);\n    const isFuji = isFujiNetwork(networkConfig);\n\n    if (!isMainnet && !isFuji) {\n        throw new Error('Snow trace is only available for Avalanche Mainnet and Testnet');\n    }\n\n    const params = new window.URLSearchParams({ module: 'contract', action: 'getabi', address });\n    return await fetchSnowtraceAPI<SnowtraceResponse<string>>(`api?${params.toString()}`, isMainnet);\n}\n","export type SnowtraceTx = SnowtraceNormalTx | SnowtraceErc20Tx;\n\nexport interface SnowtraceErc20Tx {\n    blockNumber: string;\n    timeStamp: string;\n    hash: string;\n    nonce: string;\n    blockHash: string;\n    from: string;\n    contractAddress: string;\n    to: string;\n    value: string;\n    tokenName: string;\n    tokenSymbol: string;\n    tokenDecimal: string;\n    transactionIndex: string;\n    gas: string;\n    gasPrice: string;\n    gasUsed: string;\n    cumulativeGasUsed: string;\n    input: string;\n    confirmations: string;\n}\n\nexport interface SnowtraceNormalTx {\n    blockNumber: string;\n    timeStamp: string;\n    hash: string;\n    nonce: string;\n    blockHash: string;\n    transactionIndex: string;\n    from: string;\n    to: string;\n    value: string;\n    gas: string;\n    gasPrice: string;\n    isError: string;\n    txreceipt_status: string;\n    input: string;\n    contractAddress: string;\n    cumulativeGasUsed: string;\n    gasUsed: string;\n    confirmations: string;\n}\n\n/**\n * Type guard for SnowtraceErc20Tx\n * @param tx\n */\nexport function isSnowtraceErc20Tx(tx: SnowtraceNormalTx | SnowtraceErc20Tx): tx is SnowtraceErc20Tx {\n    return tx.hasOwnProperty('tokenName');\n}\n\n/**\n * Type guard for SnowtraceNormalTx\n * @param tx\n */\nexport function isSnowtraceNormalTx(tx: SnowtraceNormalTx | SnowtraceErc20Tx): tx is SnowtraceNormalTx {\n    return !tx.hasOwnProperty('tokenName');\n}\n\nexport interface SnowtraceResponse<ResponseType> {\n    status: string;\n    message: string;\n    result: ResponseType[];\n}\n","import { explorer_api } from '@/Network/network';\nimport { NO_EXPLORER_API } from '@/errors';\nimport { OrteliusAvalancheTx, OrteliusEvmTx } from '@/Explorer';\n\n/**\n * Returns transactions FROM and TO the address given\n * @param addr The address to get historic transactions for.\n */\nexport async function getAddressHistoryEVM(addr: string): Promise<OrteliusEvmTx[]> {\n    if (!explorer_api) {\n        throw NO_EXPLORER_API;\n    }\n\n    let endpoint = `/v2/ctransactions?address=${addr}`;\n    let data = (await explorer_api.get<{ Transactions: OrteliusEvmTx[] }>(endpoint)).Transactions;\n\n    data.sort((a, b) => {\n        let dateA = new Date(a.createdAt);\n        let dateB = new Date(b.createdAt);\n\n        return dateB.getTime() - dateA.getTime();\n    });\n\n    return data;\n}\n\n/**\n * Returns the ortelius data from the given tx id.\n * @param txID\n */\nexport async function getTx(txID: string): Promise<OrteliusAvalancheTx> {\n    if (!explorer_api) {\n        throw NO_EXPLORER_API;\n    }\n\n    let url = `/v2/transactions/${txID}`;\n    return await explorer_api.get<OrteliusAvalancheTx>(url);\n}\n\n/**\n * Returns ortelius data for a transaction hash on C chain EVM,\n * @param txHash\n */\nexport async function getTxEvm(txHash: string): Promise<OrteliusEvmTx> {\n    if (!explorer_api) {\n        throw NO_EXPLORER_API;\n    }\n\n    let endpoint = `/v2/ctransactions?hash=${txHash}`;\n    let data = (await explorer_api.get<{ Transactions: OrteliusEvmTx[] }>(endpoint)).Transactions[0];\n\n    return data;\n}\n\n/**\n * Returns, X or P chain transactions belonging to the given address array.\n * @param addresses Addresses to check for. Max number of addresses is 1024\n * @param limit\n * @param chainID The blockchain ID of X or P chain\n * @param endTime\n */\nasync function getTransactionsAvalanche(\n    addresses: string[],\n    limit = 20,\n    chainID: string,\n    endTime?: string\n): Promise<OrteliusAvalancheTx[]> {\n    if (!explorer_api) {\n        throw NO_EXPLORER_API;\n    }\n\n    if (addresses.length > 1024) throw new Error('Number of addresses can not exceed 1024.');\n\n    // Remove the prefix (X- P-) from given addresses\n    const addrsRaw = addresses.map((addr) => {\n        return addr.split('-')[1];\n    });\n\n    const rootUrl = '/v2/transactions';\n\n    const req = {\n        address: addrsRaw,\n        sort: ['timestamp-desc'],\n        disableCount: ['1'],\n        chainID: [chainID],\n        disableGenesis: ['false'],\n    };\n\n    // Add limit if given\n    if (limit > 0) {\n        //@ts-ignore\n        req.limit = [limit.toString()];\n    }\n\n    // Add end time if given\n    if (endTime) {\n        //@ts-ignore\n        req.endTime = [endTime];\n    }\n\n    const res = await explorer_api.post<{ transactions: OrteliusAvalancheTx[]; next?: string }>(rootUrl, req);\n    const resTxs = res.transactions;\n    const next: string | undefined = res.next;\n\n    let allTxs = resTxs === null ? [] : resTxs;\n\n    // If we need to fetch more for this address\n    if (next && !limit) {\n        let endTime = next.split('&')[0].split('=')[1];\n        let nextRes = await getAddressHistory(addresses, limit, chainID, endTime);\n        allTxs.push(...nextRes);\n    }\n\n    return allTxs;\n}\n\n/**\n * Returns, X or P chain transactions belonging to the given address array.\n * @param addrs Addresses to check for.\n * @param limit\n * @param chainID The blockchain ID of X or P chain\n * @param endTime\n */\nexport async function getAddressHistory(\n    addrs: string[],\n    limit = 20,\n    chainID: string,\n    endTime?: string\n): Promise<OrteliusAvalancheTx[]> {\n    if (!explorer_api) {\n        throw NO_EXPLORER_API;\n    }\n    const ADDR_SIZE = 1024;\n\n    const addrsChunks = [];\n\n    for (let i = 0; i < addrs.length; i += ADDR_SIZE) {\n        const chunk = addrs.slice(i, i + ADDR_SIZE);\n        addrsChunks.push(chunk);\n    }\n\n    // Get histories in parallel\n    const promises = addrsChunks.map((chunk) => {\n        return getTransactionsAvalanche(chunk, limit, chainID, endTime);\n    });\n\n    const results = await Promise.all(promises);\n    return results.reduce((acc, txs) => {\n        return [...acc, ...txs];\n    }, []);\n}\n\n/**\n * Given an array of addresses, checks which chain each address was already used on\n * @param addrs\n */\nexport async function getAddressChains(addrs: string[]) {\n    if (!explorer_api) {\n        throw NO_EXPLORER_API;\n    }\n\n    // Strip the prefix\n    let rawAddrs = addrs.map((addr) => {\n        return addr.split('-')[1];\n    });\n\n    let urlRoot = `/v2/addressChains`;\n\n    let res = await explorer_api.post<any>(urlRoot, {\n        address: rawAddrs,\n        disableCount: ['1'],\n    });\n\n    return res.addressChains;\n}\n\nexport async function getAddressDetailX(addr: string) {\n    if (!explorer_api) {\n        throw NO_EXPLORER_API;\n    }\n\n    let addrRaw = addr.split('-')[1];\n    let url = `/x/addresses/${addrRaw}`;\n\n    return await explorer_api.get<any>(url);\n}\n","import { OrteliusAvalancheTx } from '@/Explorer';\nimport { BN } from '@c4tplatform/caminojs/dist';\nimport { getOutputTotals } from '@/Explorer/ortelius/utxoUtils';\n\n/**\n * Given an array of transactions from the explorer, filter out duplicate transactions\n * @param txs\n */\nexport function filterDuplicateOrtelius(txs: OrteliusAvalancheTx[]) {\n    let txsIds: string[] = [];\n    let filtered: OrteliusAvalancheTx[] = [];\n\n    for (let i = 0; i < txs.length; i++) {\n        let tx = txs[i];\n        let txId = tx.id;\n\n        if (txsIds.includes(txId)) {\n            continue;\n        } else {\n            txsIds.push(txId);\n            filtered.push(tx);\n        }\n    }\n    return filtered;\n}\n\n// If any of the inputs has a different chain ID, thats the source chain\n// else return current chain\n/**\n * Returns the source chain id.\n * @param tx Tx data from the explorer.\n */\nexport function findSourceChain(tx: OrteliusAvalancheTx): string {\n    let baseChain = tx.chainID;\n    let ins = tx.inputs || [];\n\n    for (let i = 0; i < ins.length; i++) {\n        let inChainId = ins[i].output.inChainID;\n        if (!inChainId) continue;\n        if (inChainId !== baseChain) return inChainId;\n    }\n    return baseChain;\n}\n\n// If any of the outputs has a different chain ID, that's the destination chain\n// else return current chain\n/**\n * Returns the destination chain id.\n * @param tx Tx data from the explorer.\n */\nexport function findDestinationChain(tx: OrteliusAvalancheTx): string {\n    let baseChain = tx.chainID;\n    let outs = tx.outputs || [];\n\n    for (let i = 0; i < outs.length; i++) {\n        let outChainId = outs[i].outChainID;\n        if (!outChainId) continue;\n        if (outChainId !== baseChain) return outChainId;\n    }\n    return baseChain;\n}\n\n// To get the stake amount, sum the non-reward output utxos.\nexport function getStakeAmount(tx: OrteliusAvalancheTx): BN {\n    let outs = tx.outputs || [];\n    let nonRewardUtxos = outs.filter((utxo) => !utxo.rewardUtxo && utxo.stake);\n\n    let tot = getOutputTotals(nonRewardUtxos);\n    return tot;\n}\n","import { CoinGeckoPriceHistoryResponse } from '@/Explorer/coingecko/types';\n\nconst COINGECKO_BASE_URL = 'https://api.coingecko.com/api/v3';\nconst AVAX_COIN_ID = 'avalanche-2';\n\n/**\n * Fetches the current AVAX price using Coin Gecko.\n * @remarks\n * You might get rate limited if you use this function frequently.\n *\n * @return\n * Current price of 1 AVAX vs a currency (default USD)\n */\nexport async function getAvaxPrice(currentCurrency = 'USD'): Promise<number> {\n    const res = await fetch(`${COINGECKO_BASE_URL}/simple/price?ids=${AVAX_COIN_ID}&vs_currencies=${currentCurrency}`);\n    const data = await res.json();\n    return data[AVAX_COIN_ID][currentCurrency.toLowerCase()];\n}\n\n/**\n * Gets daily price history using Coin Gecko.\n * @param currency\n */\nexport async function getAvaxPriceHistory(currency = 'USD') {\n    const params = new URLSearchParams({\n        vs_currency: currency.toLowerCase(),\n        days: 'max',\n        interval: 'daily',\n    });\n    const res = await fetch(`${COINGECKO_BASE_URL}/coins/${AVAX_COIN_ID}/market_chart?${params.toString()}`);\n    const data: CoinGeckoPriceHistoryResponse = await res.json();\n\n    return data.prices;\n}\n","import { iHistoryImportExport } from '@/History/types';\nimport { parseMemo } from '@/History/history_helpers';\nimport { idToChainAlias } from '@/Network/helpers/aliasFromNetworkID';\nimport { avalanche } from '@/Network/network';\nimport { bnToAvaxX } from '@/utils';\nimport { getOutputsOfChain, getOutputTotals, getOwnedOutputs } from '@/Explorer/ortelius/utxoUtils';\nimport { findDestinationChain, findSourceChain, OrteliusAvalancheTx } from '@/Explorer';\n\nexport function getImportSummary(tx: OrteliusAvalancheTx, addresses: string[]): iHistoryImportExport {\n    let sourceChain = findSourceChain(tx);\n    let chainAliasFrom = idToChainAlias(sourceChain);\n    let chainAliasTo = idToChainAlias(tx.chainID);\n\n    let outs = tx.outputs || [];\n    let myOuts = getOwnedOutputs(outs, addresses);\n    let amtOut = getOutputTotals(myOuts);\n\n    let time = new Date(tx.timestamp);\n    let fee = avalanche().XChain().getTxFee();\n\n    let res: iHistoryImportExport = {\n        id: tx.id,\n        memo: parseMemo(tx.memo),\n        source: chainAliasFrom,\n        destination: chainAliasTo,\n        amount: amtOut,\n        amountDisplayValue: bnToAvaxX(amtOut),\n        timestamp: time,\n        type: 'import',\n        fee: fee,\n    };\n\n    return res;\n}\n\nexport function getExportSummary(tx: OrteliusAvalancheTx, addresses: string[]): iHistoryImportExport {\n    let sourceChain = findSourceChain(tx);\n    let chainAliasFrom = idToChainAlias(sourceChain);\n\n    let destinationChain = findDestinationChain(tx);\n    let chainAliasTo = idToChainAlias(destinationChain);\n\n    let outs = tx.outputs || [];\n    let myOuts = getOwnedOutputs(outs, addresses);\n    let chainOuts = getOutputsOfChain(myOuts, destinationChain);\n    let amtOut = getOutputTotals(chainOuts);\n\n    let time = new Date(tx.timestamp);\n    let fee = avalanche().XChain().getTxFee();\n\n    let res: iHistoryImportExport = {\n        id: tx.id,\n        memo: parseMemo(tx.memo),\n        source: chainAliasFrom,\n        destination: chainAliasTo,\n        amount: amtOut,\n        amountDisplayValue: bnToAvaxX(amtOut),\n        timestamp: time,\n        type: 'export',\n        fee: fee,\n    };\n\n    return res;\n}\n","import { HistoryItemType, HistoryItemTypeName, iHistoryImportExport, iHistoryItem, iHistoryStaking } from '@/History';\nimport { parseMemo } from '@/History/history_helpers';\nimport { activeNetwork, avalanche } from '@/Network/network';\nimport { bnToAvaxP, bnToAvaxX } from '@/utils';\nimport { BN } from '@c4tplatform/caminojs/dist';\nimport { getBaseTxSummary } from '@/History/base_tx_parser';\nimport { idToChainAlias } from '@/Network/helpers/aliasFromNetworkID';\nimport { getExportSummary, getImportSummary } from '@/History/importExportParser';\nimport { findSourceChain, getStakeAmount, OrteliusAvalancheTx } from '@/Explorer';\nimport {\n    getEvmAssetBalanceFromUTXOs,\n    getOutputTotals,\n    getOwnedOutputs,\n    getRewardOuts,\n} from '@/Explorer/ortelius/utxoUtils';\n\nexport async function getTransactionSummary(\n    tx: OrteliusAvalancheTx,\n    walletAddrs: string[],\n    evmAddress: string\n): Promise<HistoryItemType> {\n    let cleanAddressesXP = walletAddrs.map((addr) => addr.split('-')[1]);\n\n    switch (tx.type) {\n        case 'import':\n        case 'pvm_import':\n            return getImportSummary(tx, cleanAddressesXP);\n        case 'export':\n        case 'pvm_export':\n        case 'atomic_export_tx':\n            return getExportSummary(tx, cleanAddressesXP);\n        case 'add_validator':\n        case 'add_delegator':\n            return getStakingSummary(tx, cleanAddressesXP);\n        case 'atomic_import_tx':\n            return getImportSummaryC(tx, evmAddress);\n        case 'operation':\n        case 'base':\n            return await getBaseTxSummary(tx, cleanAddressesXP);\n        default:\n            return getUnsupportedSummary(tx);\n    }\n}\n\nfunction getUnsupportedSummary(tx: OrteliusAvalancheTx): iHistoryItem {\n    return {\n        id: tx.id,\n        type: 'not_supported',\n        timestamp: new Date(tx.timestamp),\n        fee: new BN(0),\n    };\n}\n\nfunction getStakingSummary(tx: OrteliusAvalancheTx, ownerAddrs: string[]): iHistoryStaking {\n    let time = new Date(tx.timestamp);\n\n    // let pChainID = activeNetwork.pChainID;\n    // let avaxID = activeNetwork.avaxID;\n    let ins = tx.inputs?.map((tx) => tx.output) || [];\n    let myIns = getOwnedOutputs(ins, ownerAddrs);\n\n    let outs = tx.outputs || [];\n    let myOuts = getOwnedOutputs(outs, ownerAddrs);\n\n    let stakeAmount = getStakeAmount(tx);\n\n    // Assign the type\n    let type: HistoryItemTypeName = tx.type === 'add_validator' ? 'add_validator' : 'add_delegator';\n    // If this wallet only received the fee\n    if (myIns.length === 0 && type === 'add_delegator') {\n        type = 'delegation_fee';\n    } else if (myIns.length === 0 && type === 'add_validator') {\n        type = 'validation_fee';\n    }\n\n    let rewardAmount;\n    let rewardAmountClean;\n    if (tx.rewarded) {\n        let rewardOuts = getRewardOuts(myOuts);\n        rewardAmount = getOutputTotals(rewardOuts);\n        rewardAmountClean = bnToAvaxP(rewardAmount);\n    }\n\n    return {\n        id: tx.id,\n        nodeID: tx.validatorNodeID,\n        stakeStart: new Date(tx.validatorStart * 1000),\n        stakeEnd: new Date(tx.validatorEnd * 1000),\n        timestamp: time,\n        type: type,\n        fee: new BN(0),\n        amount: stakeAmount,\n        amountDisplayValue: bnToAvaxP(stakeAmount),\n        memo: parseMemo(tx.memo),\n        isRewarded: tx.rewarded,\n        rewardAmount: rewardAmount,\n        rewardAmountDisplayValue: rewardAmountClean,\n    };\n}\n\n// Returns the summary for a C chain import TX\nfunction getImportSummaryC(tx: OrteliusAvalancheTx, ownerAddr: string) {\n    let sourceChain = findSourceChain(tx);\n    let chainAliasFrom = idToChainAlias(sourceChain);\n    let chainAliasTo = idToChainAlias(tx.chainID);\n\n    let avaxID = activeNetwork.avaxID;\n\n    let outs = tx.outputs || [];\n    let amtOut = getEvmAssetBalanceFromUTXOs(outs, ownerAddr, avaxID, tx.chainID);\n\n    let time = new Date(tx.timestamp);\n    let fee = avalanche().XChain().getTxFee();\n\n    let res: iHistoryImportExport = {\n        id: tx.id,\n        source: chainAliasFrom,\n        destination: chainAliasTo,\n        amount: amtOut,\n        amountDisplayValue: bnToAvaxX(amtOut),\n        timestamp: time,\n        type: 'import',\n        fee: fee,\n        memo: parseMemo(tx.memo),\n    };\n\n    return res;\n}\n","import { iHistoryEVMTx } from '@/History/types';\nimport { bnToAvaxC } from '@/utils';\nimport { BN } from '@c4tplatform/caminojs/dist';\nimport { OrteliusEvmTx } from '@/Explorer';\n\nexport function getTransactionSummaryEVM(tx: OrteliusEvmTx, walletAddress: string): iHistoryEVMTx {\n    let isSender = tx.fromAddr.toUpperCase() === walletAddress.toUpperCase();\n\n    let amt = new BN(tx.value);\n    let amtClean = bnToAvaxC(amt);\n    let date = new Date(tx.createdAt);\n\n    let gasLimit = new BN(tx.gasLimit);\n    let gasPrice = new BN(tx.gasPrice);\n    let feeBN = gasLimit.mul(gasPrice); // in gwei\n\n    return {\n        id: tx.hash,\n        fee: feeBN,\n        memo: '',\n        block: tx.block,\n        isSender,\n        type: 'transaction_evm',\n        amount: amt,\n        amountDisplayValue: amtClean,\n        gasLimit: tx.gasLimit,\n        gasPrice: tx.gasPrice,\n        from: tx.fromAddr,\n        to: tx.toAddr,\n        timestamp: date,\n        input: tx.input,\n    };\n}\n","import { BN } from '@c4tplatform/caminojs/dist';\nimport { ChainIdType } from '@/common';\nimport { iAssetDescriptionClean } from '@/Asset/types';\n\nexport type HistoryItemType = AVMHistoryItemType | PVMHistoryItemType | EVMHistoryITemType | iHistoryItem;\n\nexport type AVMHistoryItemType = iHistoryBaseTx | iHistoryImportExport;\nexport type PVMHistoryItemType = iHistoryStaking;\nexport type EVMHistoryITemType = iHistoryEVMTx;\n\nexport type HistoryImportExportTypeName = 'import' | 'export';\nexport type HistoryItemTypeName =\n    | HistoryImportExportTypeName\n    | 'transaction'\n    | 'transaction_evm'\n    | 'add_delegator'\n    | 'add_validator'\n    | 'delegation_fee'\n    | 'validation_fee'\n    | 'not_supported';\n\nexport interface iHistoryItem {\n    id: string;\n    type: HistoryItemTypeName;\n    timestamp: Date;\n    fee: BN;\n    memo?: string;\n}\n\n/**\n * Parsed interface for Import and Export transactions.\n */\nexport interface iHistoryImportExport extends iHistoryItem {\n    amount: BN;\n    type: HistoryImportExportTypeName;\n    amountDisplayValue: string;\n    destination: ChainIdType;\n    source: ChainIdType;\n}\n\n/**\n * Typeguard for `iHistoryImportExport` interface\n * @param tx The parsed history object\n */\nexport function isHistoryImportExportTx(tx: HistoryItemType): tx is iHistoryImportExport {\n    return tx.type === 'export' || tx.type === 'import';\n}\n\n/**\n * Parsed interface for Validation, Validation Fee, Delegation and Delegation Fee transactions.\n */\nexport interface iHistoryStaking extends iHistoryItem {\n    nodeID: string;\n    stakeStart: Date;\n    stakeEnd: Date;\n    amount: BN;\n    amountDisplayValue: string;\n    isRewarded: boolean;\n    rewardAmount?: BN;\n    rewardAmountDisplayValue?: string;\n}\n\n/**\n * Typeguard for `iHistoryStaking` interface\n * @param tx The parsed history object\n */\nexport function isHistoryStakingTx(tx: HistoryItemType): tx is iHistoryStaking {\n    let types: HistoryItemTypeName[] = ['add_validator', 'add_delegator', 'validation_fee', 'delegation_fee'];\n    return types.includes(tx.type);\n}\n\n/**\n * Interface for parsed X chain base transactions.\n */\nexport interface iHistoryBaseTx extends iHistoryItem {\n    tokens: iHistoryBaseTxToken[];\n    // nfts: iHistoryBaseTxNFTs;\n}\n\n/**\n * Typeguard for `iHistoryBaseTx` interface\n * @param tx The parsed history object\n */\nexport function isHistoryBaseTx(tx: HistoryItemType): tx is iHistoryBaseTx {\n    return tx.type === 'transaction';\n}\n\n/**\n * Interface for parsed EVM transactions.\n */\nexport interface iHistoryEVMTx extends iHistoryItem {\n    block: string;\n    gasLimit: number;\n    gasPrice: string;\n    from: string;\n    to: string;\n    amount: BN;\n    amountDisplayValue: string;\n    isSender: boolean;\n    input?: string;\n}\n\nexport function isHistoryEVMTx(tx: HistoryItemType): tx is iHistoryEVMTx {\n    return tx.type === 'transaction_evm';\n}\n\nexport interface iHistoryBaseTxToken {\n    amount: BN;\n    amountDisplayValue: string;\n    addresses: string[];\n    asset: iAssetDescriptionClean;\n}\n\nexport interface iHistoryBaseTxNFTs {\n    sent: iHistoryBaseTxNFTsSent;\n    received: iHistoryBaseTxNFTsReceived;\n}\n\nexport interface iHistoryBaseTxTokenLossGain {\n    [assetId: string]: BN;\n}\n\nexport interface iHistoryBaseTxTokenOwners {\n    [assetId: string]: string[];\n}\n\nexport interface iHistoryNftFamilyBalance {\n    [groupNum: number]: {\n        payload: string;\n        amount: number;\n    };\n}\n\nexport interface iHistoryBaseTxNFTsReceivedRaw {\n    [assetID: string]: iHistoryNftFamilyBalance;\n}\nexport interface iHistoryBaseTxNFTsSentRaw {\n    [assetID: string]: iHistoryNftFamilyBalance;\n}\n\nexport interface iHistoryBaseTxNFTsSent {\n    [assetID: string]: {\n        groups: iHistoryNftFamilyBalance;\n        to: string[];\n        asset: iAssetDescriptionClean;\n    };\n}\n\nexport interface iHistoryBaseTxNFTsReceived {\n    [assetID: string]: {\n        groups: iHistoryNftFamilyBalance;\n        from: string[];\n        asset: iAssetDescriptionClean;\n    };\n}\n","import { BN } from '@c4tplatform/caminojs/dist';\nimport { ChainIdType } from '@/common';\nimport {\n    UniversalTx,\n    UniversalTxActionExport,\n    UniversalTxActionImport,\n    UniversalTxExport,\n    UniversalTxImport,\n} from './types';\n\nexport abstract class UniversalNodeAbstract {\n    parents: UniversalNodeAbstract[];\n    child: UniversalNodeAbstract | null; // can only have 1 child\n    balance: BN;\n    chain: ChainIdType;\n    feeExport: BN;\n    feeImport: BN;\n\n    protected constructor(balance: BN, chain: ChainIdType, feeExport: BN, feeImport: BN) {\n        this.parents = [];\n        this.child = null;\n        this.balance = balance;\n        this.chain = chain;\n        this.feeExport = feeExport;\n        this.feeImport = feeImport;\n    }\n\n    // Sum of the node's balance + all balance of parents minus the transfer fees\n    reduceTotalBalanceFromParents(): BN {\n        // If there are no balance return balance of self\n        if (this.parents.length === 0) {\n            return this.balance;\n        }\n\n        let parentBals = this.parents.map((node) => {\n            // Subtract transfer fees from parent balance\n            // import + export\n            let parentBalance = node.reduceTotalBalanceFromParents();\n            parentBalance = parentBalance.sub(this.feeImport).sub(node.feeExport);\n            let zero = new BN(0);\n            return BN.max(parentBalance, zero);\n        });\n\n        let tot = parentBals.reduce((prev, current) => {\n            return prev.add(current);\n        }, new BN(0));\n\n        return tot.add(this.balance);\n    }\n\n    /**\n     * Returns the export action type from this node to its child\n     * @param to\n     */\n    abstract getExportMethod(to: ChainIdType): UniversalTxActionExport;\n\n    /**\n     * Returns the import action type from this node to its child\n     * @param from Which chain are we importing from\n     */\n    abstract getImportMethod(from: ChainIdType): UniversalTxActionImport;\n\n    buildExportTx(destChain: ChainIdType, amount: BN): UniversalTxExport {\n        return {\n            action: this.getExportMethod(destChain),\n            amount: amount,\n            fee: this.feeExport,\n        };\n    }\n\n    buildImportTx(sourceChain: ChainIdType): UniversalTxImport {\n        return {\n            action: this.getImportMethod(sourceChain),\n            fee: this.feeImport,\n        };\n    }\n\n    /***\n     * Assumes there is enough balance on node tree\n     * Returns empty array even if transaction not possible!\n     * What steps to take to have the target balance on this node.\n     * @param target Amount of nAVAX needed on this node.\n     */\n    getStepsForTargetBalance(target: BN): UniversalTx[] {\n        // If the node has enough balance no transaction needed\n        // If target is negative or zero no transaction needed\n        if (this.balance.gte(target) || target.lte(new BN(0))) {\n            return [];\n        }\n\n        // If not enough balance and no parents\n        // return all the balance\n        if (this.balance.lt(target) && this.parents.length === 0) {\n            return [];\n        }\n\n        // If not enough balance on this node, try to collect it from parents\n        // Amount needed to collect from parents\n        let remaining = target.sub(this.balance);\n\n        let transactions = [];\n        for (let i = 0; i < this.parents.length; i++) {\n            let p = this.parents[i];\n\n            if (remaining.lte(new BN(0))) break;\n\n            // Parent's balance\n            let pBal = p.reduceTotalBalanceFromParents();\n            const exportFee = p.feeExport;\n            const importFee = this.feeImport;\n            const feeImportExport = exportFee.add(importFee);\n            // Maximum balance we can import from parent\n            let pBalMax = pBal.sub(feeImportExport);\n            // The parent needs to have this balance to satisfy the needed amount\n\n            // Try to export the remaining amount, if the parent balance is lower than that export the maximum amount\n            // Import amount is the usable amount imported\n            const importAmt = BN.min(pBalMax, remaining); // The amount that will cross to the target chain\n            // Exported amount should include the import fees\n            const exportAmt = importAmt.add(importFee);\n\n            if (exportAmt.lte(new BN(0))) continue;\n\n            let pTx = p.buildExportTx(this.chain, exportAmt);\n            let importTx = this.buildImportTx(p.chain);\n\n            transactions.push(pTx);\n            transactions.push(importTx);\n\n            remaining = remaining.sub(importAmt);\n        }\n\n        // If we still have remaining balance, we can not complete this transfer\n        if (remaining.gt(new BN(0))) {\n            throw new Error('Insufficient AVAX balances.');\n        }\n\n        return transactions;\n    }\n\n    addParent(node: UniversalNodeAbstract) {\n        this.parents.push(node);\n    }\n\n    setChild(node: UniversalNodeAbstract) {\n        this.child = node;\n    }\n}\n","import { UniversalNodeAbstract } from '@/UniversalTx/UniversalNode';\nimport { ExportChainsX } from '@/Wallet/types';\nimport {\n    UniversalTxActionExportX,\n    UniversalTxActionImportX,\n    UniversalTxExportX,\n    UniversalTxImportX,\n} from '@/UniversalTx/types';\nimport { BN } from '@c4tplatform/caminojs/dist';\n\nexport default class UniversalNodeX extends UniversalNodeAbstract {\n    constructor(balance: BN, feeExport: BN, feeImport: BN) {\n        super(balance, 'X', feeExport, feeImport);\n    }\n\n    buildExportTx(destChain: ExportChainsX, amount: BN): UniversalTxExportX {\n        return super.buildExportTx(destChain, amount) as UniversalTxExportX;\n    }\n\n    buildImportTx(sourceChain: ExportChainsX): UniversalTxImportX {\n        return super.buildImportTx(sourceChain) as UniversalTxImportX;\n    }\n\n    getExportMethod(to: ExportChainsX): UniversalTxActionExportX {\n        if (to === 'P') {\n            return 'export_x_p';\n        } else {\n            return 'export_x_c';\n        }\n    }\n\n    getImportMethod(from: ExportChainsX): UniversalTxActionImportX {\n        if (from === 'P') {\n            return 'import_p_x';\n        } else {\n            return 'import_c_x';\n        }\n    }\n}\n","import { UniversalNodeAbstract } from '@/UniversalTx/UniversalNode';\nimport { ExportChainsP } from '@/Wallet/types';\nimport {\n    UniversalTxActionExportP,\n    UniversalTxActionImportP,\n    UniversalTxExportP,\n    UniversalTxImportP,\n} from '@/UniversalTx/types';\nimport { BN } from '@c4tplatform/caminojs/dist';\n\nexport default class UniversalNodeP extends UniversalNodeAbstract {\n    constructor(balance: BN, feeExport: BN, feeImport: BN) {\n        super(balance, 'P', feeExport, feeImport);\n    }\n\n    buildExportTx(destChain: ExportChainsP, amount: BN): UniversalTxExportP {\n        return super.buildExportTx(destChain, amount) as UniversalTxExportP;\n    }\n\n    buildImportTx(sourceChain: ExportChainsP): UniversalTxImportP {\n        return super.buildImportTx(sourceChain) as UniversalTxImportP;\n    }\n\n    getExportMethod(to: ExportChainsP): UniversalTxActionExportP {\n        if (to === 'X') {\n            return 'export_p_x';\n        } else {\n            return 'export_p_c';\n        }\n    }\n\n    getImportMethod(from: ExportChainsP): UniversalTxActionImportP {\n        if (from === 'X') {\n            return 'import_x_p';\n        } else {\n            return 'import_c_p';\n        }\n    }\n}\n","import { UniversalNodeAbstract } from '@/UniversalTx/UniversalNode';\nimport { ExportChainsC } from '@/Wallet/types';\nimport {\n    UniversalTxActionExportC,\n    UniversalTxActionImportC,\n    UniversalTxExportC,\n    UniversalTxImportC,\n} from '@/UniversalTx/types';\nimport { BN } from '@c4tplatform/caminojs/dist';\n\nexport default class UniversalNodeC extends UniversalNodeAbstract {\n    constructor(balance: BN, feeExport: BN, feeImport: BN) {\n        super(balance, 'C', feeExport, feeImport);\n    }\n\n    buildExportTx(destChain: ExportChainsC, amount: BN): UniversalTxExportC {\n        return super.buildExportTx(destChain, amount) as UniversalTxExportC;\n    }\n\n    buildImportTx(sourceChain: ExportChainsC): UniversalTxImportC {\n        return super.buildImportTx(sourceChain) as UniversalTxImportC;\n    }\n\n    getExportMethod(to: ExportChainsC): UniversalTxActionExportC {\n        if (to === 'X') {\n            return 'export_c_x';\n        } else {\n            return 'export_c_p';\n        }\n    }\n\n    getImportMethod(from: ExportChainsC): UniversalTxActionImportC {\n        if (from === 'X') {\n            return 'import_x_c';\n        } else {\n            return 'import_p_c';\n        }\n    }\n}\n","import { BN } from '@c4tplatform/caminojs/dist';\nimport { UniversalTx } from '@/UniversalTx/types';\nimport UniversalNodeX from '@/UniversalTx/UniversalNodeX';\nimport UniversalNodeP from '@/UniversalTx/UniversalNodeP';\nimport UniversalNodeC from '@/UniversalTx/UniversalNodeC';\n\nexport function createGraphForP(balX: BN, balP: BN, balC: BN, atomicFeeXP: BN, atomicFeeC: BN): UniversalNodeP {\n    let xNode = new UniversalNodeX(balX, atomicFeeXP, atomicFeeXP);\n    let pNode = new UniversalNodeP(balP, atomicFeeXP, atomicFeeXP);\n    let cNode = new UniversalNodeC(balC, atomicFeeC, atomicFeeC);\n\n    pNode.addParent(xNode);\n    pNode.addParent(cNode);\n\n    cNode.setChild(pNode);\n    xNode.setChild(pNode);\n    return pNode;\n}\n\nexport function createGraphForC(balX: BN, balP: BN, balC: BN, atomicFeeXP: BN, atomicFeeC: BN): UniversalNodeC {\n    let xNode = new UniversalNodeX(balX, atomicFeeXP, atomicFeeXP);\n    let pNode = new UniversalNodeP(balP, atomicFeeXP, atomicFeeXP);\n    let cNode = new UniversalNodeC(balC, atomicFeeC, atomicFeeC);\n\n    cNode.addParent(xNode);\n    cNode.addParent(pNode);\n\n    pNode.setChild(cNode);\n    xNode.setChild(cNode);\n\n    return cNode;\n}\n\nexport function createGraphForX(balX: BN, balP: BN, balC: BN, atomicFeeXP: BN, atomicFeeC: BN): UniversalNodeX {\n    let xNode = new UniversalNodeX(balX, atomicFeeXP, atomicFeeXP);\n    let pNode = new UniversalNodeP(balP, atomicFeeXP, atomicFeeXP);\n    let cNode = new UniversalNodeC(balC, atomicFeeC, atomicFeeC);\n\n    xNode.addParent(pNode);\n    xNode.addParent(cNode);\n\n    cNode.setChild(xNode);\n    pNode.setChild(xNode);\n\n    return xNode;\n}\n\nexport function canHaveBalanceOnX(\n    balX: BN,\n    balP: BN,\n    balC: BN,\n    targetAmount: BN,\n    atomicFeeXP: BN,\n    atomicFeeC: BN\n): boolean {\n    let startNode = createGraphForX(balX, balP, balC, atomicFeeXP, atomicFeeC);\n    return startNode.reduceTotalBalanceFromParents().gte(targetAmount);\n}\n\nexport function canHaveBalanceOnP(\n    balX: BN,\n    balP: BN,\n    balC: BN,\n    targetAmount: BN,\n    atomicFeeXP: BN,\n    atomicFeeC: BN\n): boolean {\n    let startNode = createGraphForP(balX, balP, balC, atomicFeeXP, atomicFeeC);\n    return startNode.reduceTotalBalanceFromParents().gte(targetAmount);\n}\n\n/**\n * Will return true if `targetAmount` can exist on C chain\n */\nexport function canHaveBalanceOnC(\n    balX: BN,\n    balP: BN,\n    balC: BN,\n    targetAmount: BN,\n    atomicFeeXP: BN,\n    atomicFeeC: BN\n): boolean {\n    let startNode = createGraphForC(balX, balP, balC, atomicFeeXP, atomicFeeC);\n    return startNode.reduceTotalBalanceFromParents().gte(targetAmount);\n}\n\nexport function getStepsForBalanceP(\n    balX: BN,\n    balP: BN,\n    balC: BN,\n    targetAmount: BN,\n    atomicFeeXP: BN,\n    atomicFeeC: BN\n): UniversalTx[] {\n    let startNode = createGraphForP(balX, balP, balC, atomicFeeXP, atomicFeeC);\n\n    if (startNode.reduceTotalBalanceFromParents().lt(targetAmount)) {\n        throw new Error('Insufficient AVAX.');\n    }\n\n    return startNode.getStepsForTargetBalance(targetAmount);\n}\n\nexport function getStepsForBalanceC(\n    balX: BN,\n    balP: BN,\n    balC: BN,\n    targetAmount: BN,\n    atomicFeeXP: BN,\n    atomicFeeC: BN\n): UniversalTx[] {\n    let startNode = createGraphForC(balX, balP, balC, atomicFeeXP, atomicFeeC);\n\n    if (startNode.reduceTotalBalanceFromParents().lt(targetAmount)) {\n        throw new Error('Insufficient AVAX.');\n    }\n\n    return startNode.getStepsForTargetBalance(targetAmount);\n}\n\nexport function getStepsForBalanceX(\n    balX: BN,\n    balP: BN,\n    balC: BN,\n    targetAmount: BN,\n    atomicFeeXP: BN,\n    atomicFeeC: BN\n): UniversalTx[] {\n    let startNode = createGraphForX(balX, balP, balC, atomicFeeXP, atomicFeeC);\n\n    if (startNode.reduceTotalBalanceFromParents().lt(targetAmount)) {\n        throw new Error('Insufficient AVAX.');\n    }\n\n    return startNode.getStepsForTargetBalance(targetAmount);\n}\n","import { activeNetwork, avalanche, web3 } from '@/Network/network';\nimport { BN } from '@c4tplatform/caminojs/dist';\nimport {\n    EVMInput,\n    ExportTx,\n    SECPTransferOutput,\n    TransferableOutput,\n    UnsignedTx,\n} from '@c4tplatform/caminojs/dist/apis/evm';\nimport { ExportChainsC } from '@/Wallet/types';\nimport { bintools } from '@/common';\nimport { chainIdFromAlias } from '@/Network';\nimport { costExportTx, costImportTx } from '@c4tplatform/caminojs/dist/utils';\nimport { buildEvmExportTransaction } from '@/helpers/tx_helper';\n\nconst MAX_GAS = new BN(1000_000_000_000);\n\n/**\n * Returns the current gas price in WEI from the network\n */\nexport async function getGasPrice(): Promise<BN> {\n    return new BN(await web3.eth.getGasPrice());\n}\n\n/**\n * Returns the gas price + 25%, or max gas\n */\nexport async function getAdjustedGasPrice(): Promise<BN> {\n    let gasPrice = await getGasPrice();\n    let adjustedGas = adjustValue(gasPrice, 25);\n    return BN.min(adjustedGas, MAX_GAS);\n}\n\n/**\n *\n * @param val\n * @param perc What percentage to adjust with\n */\nexport function adjustValue(val: BN, perc: number) {\n    let padAmt = val.div(new BN(100)).mul(new BN(perc));\n    return val.add(padAmt);\n}\n\n/**\n * Returns the base fee from the network.\n */\nexport async function getBaseFee(): Promise<BN> {\n    const rawHex = (await avalanche().CChain().getBaseFee()).substring(2);\n    return new BN(rawHex, 'hex');\n}\n\n/**\n * Returns the current base fee + 25%\n */\nexport async function getBaseFeeRecommended() {\n    const baseFee = await getBaseFee();\n    return adjustValue(baseFee, 25);\n}\n\n/**\n * Returns the base max priority fee from the network.\n */\nexport async function getMaxPriorityFee(): Promise<BN> {\n    const rawHex = (await avalanche().CChain().getMaxPriorityFeePerGas()).substring(2);\n    return new BN(rawHex, 'hex');\n}\n\n/**\n * Calculate max fee for EIP 1559 transactions given baseFee and maxPriorityFee.\n * According to https://www.blocknative.com/blog/eip-1559-fees\n * @param baseFee in WEI\n * @param maxPriorityFee in WEI\n */\nexport function calculateMaxFee(baseFee: BN, maxPriorityFee: BN): BN {\n    return baseFee.mul(new BN(2)).add(maxPriorityFee);\n}\n\n/**\n * Creates a mock import transaction and estimates the gas required for it. Returns fee in units of gas.\n * @param numIns Number of inputs for the import transaction.\n * @param numSigs Number of signatures used in the import transactions. This value is the sum of owner addresses in every UTXO.\n */\nexport function estimateImportGasFeeFromMockTx(\n    numIns = 1,\n    numSigs: number // number of signatures (sum of owner addresses in each utxo)\n): number {\n    const ATOMIC_TX_COST = 10000; // in gas\n    const SIG_COST = 1000; // in gas\n    const BASE_TX_SIZE = 78;\n    const SINGLE_OWNER_INPUT_SIZE = 90; // in bytes\n    const OUTPUT_SIZE = 60; // in bytes\n\n    // C chain imports consolidate inputs to one output\n    const numOutputs = 1;\n    // Assuming each input has 1 owner\n    const baseSize = BASE_TX_SIZE + numIns * SINGLE_OWNER_INPUT_SIZE + numOutputs * OUTPUT_SIZE;\n    const importGas = baseSize + numSigs * SIG_COST + ATOMIC_TX_COST;\n\n    return importGas;\n}\n\n/**\n * Estimates the gas fee using a mock ExportTx built from the passed values.\n * @param destinationChain `X` or `P`\n * @param amount in nAVAX\n * @param from The C chain hex address exported from\n * @param to The destination X or P address\n */\nexport function estimateExportGasFeeFromMockTx(\n    destinationChain: ExportChainsC,\n    amount: BN,\n    from: string,\n    to: string\n): number {\n    const destChainId = chainIdFromAlias(destinationChain);\n    const destChainIdBuff = bintools.cb58Decode(destChainId);\n    const toBuff = bintools.stringToAddress(to);\n    const netID = activeNetwork.networkID;\n    const chainID = activeNetwork.cChainID;\n    const AVAX_ID = activeNetwork.avaxID;\n    const avaxIDBuff = bintools.cb58Decode(AVAX_ID);\n\n    const txIn = new EVMInput(from, amount, avaxIDBuff);\n    const secpOut = new SECPTransferOutput(amount, [toBuff]);\n    const txOut = new TransferableOutput(avaxIDBuff, secpOut);\n\n    // Create fake export Tx\n    const chainIdBuff = bintools.cb58Decode(chainID);\n    const exportTx = new ExportTx(netID, chainIdBuff, destChainIdBuff, [txIn], [txOut]);\n\n    const unisgnedTx = new UnsignedTx(exportTx);\n\n    return costExportTx(avalanche().getNetwork().C, unisgnedTx);\n}\n\n/**\n * Returns the estimated gas for the export transaction.\n * @param destinationChain Either `X` or `P`\n * @param amount The amount to export. In nAVAX.\n * @param from The C chain hex address exporting the asset\n * @param fromBech The C chain bech32 address exporting the asset\n * @param to The destination address on the destination chain\n */\nexport async function estimateExportGasFee(\n    destinationChain: ExportChainsC,\n    from: string,\n    fromBech: string,\n    to: string,\n    amount: BN\n): Promise<number> {\n    let exportTx = await buildEvmExportTransaction([from], to, amount, fromBech, destinationChain, new BN(0));\n\n    return costExportTx(avalanche().getNetwork().C, exportTx);\n}\n","import {\n    AssetBalanceP,\n    AssetBalanceRawX,\n    AssetBalanceX,\n    BTCNetworkType,\n    ERC20Balance,\n    ExportChainsC,\n    ExportChainsP,\n    ExportChainsX,\n    iAvaxBalance,\n    WalletBalanceX,\n    WalletEventArgsType,\n    WalletEventType,\n    WalletNameType,\n} from './types';\nimport {\n    buildAvmExportTransaction,\n    buildCreateNftFamilyTx,\n    buildCustomEvmTx,\n    buildEvmExportTransaction,\n    buildEvmTransferErc20Tx,\n    buildEvmTransferErc721Tx,\n    buildEvmTransferNativeTx,\n    buildMintNftTx,\n    buildPlatformExportTransaction,\n    estimateAvaxGas,\n    estimateErc20Gas,\n} from '@/helpers/tx_helper';\nimport { BN, Buffer } from '@c4tplatform/caminojs/dist';\nimport { FeeMarketEIP1559Transaction, Transaction } from '@ethereumjs/tx';\nimport { activeNetwork, avalanche, web3 } from '@/Network/network';\nimport { EvmWallet } from '@/Wallet/EVM/EvmWallet';\n\nimport {\n    avmGetAllUTXOs,\n    avmGetAtomicUTXOs,\n    evmGetAtomicUTXOs,\n    getStakeForAddresses,\n    platformGetAllUTXOs,\n    platformGetAtomicUTXOs,\n} from '@/helpers/utxo_helper';\n\nimport {\n    UTXOSet as AVMUTXOSet,\n    UnsignedTx as AVMUnsignedTx,\n    UTXO as AVMUTXO,\n    Tx as AvmTx,\n    AVMConstants,\n    AmountOutput,\n} from '@c4tplatform/caminojs/dist/apis/avm';\nimport {\n    UTXOSet as PlatformUTXOSet,\n    UTXO as PlatformUTXO,\n    UnsignedTx as PlatformUnsignedTx,\n    Tx as PlatformTx,\n    PlatformVMConstants,\n    StakeableLockOut,\n} from '@c4tplatform/caminojs/dist/apis/platformvm';\nimport { UnsignedTx as EVMUnsignedTx, Tx as EVMTx, UTXOSet as EVMUTXOSet } from '@c4tplatform/caminojs/dist/apis/evm';\n\nimport { PayloadBase, UnixNow } from '@c4tplatform/caminojs/dist/utils';\nimport { getAssetDescription } from '@/Asset/Assets';\nimport { getErc20Token } from '@/Asset/Erc20';\nimport { NO_NETWORK } from '@/errors';\nimport { avaxCtoX, bnToLocaleString, waitTxC, waitTxEvm, waitTxP, waitTxX } from '@/utils';\nimport { EvmWalletReadonly } from '@/Wallet/EVM/EvmWalletReadonly';\nimport EventEmitter from 'events';\nimport { getTransactionSummary, getTransactionSummaryEVM, HistoryItemType } from '@/History';\nimport { bintools } from '@/common';\nimport { ChainIdType } from '@/common';\nimport {\n    createGraphForC,\n    createGraphForP,\n    createGraphForX,\n    getStepsForBalanceC,\n    getStepsForBalanceP,\n    getStepsForBalanceX,\n    UniversalTx,\n} from '@/UniversalTx';\nimport { UniversalNodeAbstract } from '@/UniversalTx/UniversalNode';\nimport { GetStakeResponse } from '@c4tplatform/caminojs/dist/apis/platformvm/interfaces';\nimport { networkEvents } from '@/Network/eventEmitter';\nimport { NetworkConfig } from '@/Network';\nimport { chainIdFromAlias } from '@/Network/helpers/idFromAlias';\nimport {\n    estimateExportGasFeeFromMockTx,\n    estimateImportGasFeeFromMockTx,\n    getBaseFeeRecommended,\n} from '@/helpers/gas_helper';\nimport { getErc20History, getNormalHistory } from '@/Explorer/snowtrace';\nimport {\n    filterDuplicateOrtelius,\n    getAddressHistory,\n    getAddressHistoryEVM,\n    getTx,\n    getTxEvm,\n    OrteliusAvalancheTx,\n} from '@/Explorer';\nimport { TypedDataV1, TypedMessage } from '@metamask/eth-sig-util';\n\nexport abstract class WalletProvider {\n    abstract type: WalletNameType;\n    abstract evmWallet: EvmWallet | EvmWalletReadonly;\n\n    /**\n     * The X chain UTXOs of the wallet's current state\n     */\n    public utxosX: AVMUTXOSet = new AVMUTXOSet();\n\n    /**\n     * The P chain UTXOs of the wallet's current state\n     */\n    public utxosP: PlatformUTXOSet = new PlatformUTXOSet();\n\n    public balanceX: WalletBalanceX = {};\n\n    abstract signEvm(tx: Transaction | FeeMarketEIP1559Transaction): Promise<Transaction | FeeMarketEIP1559Transaction>;\n    abstract signX(tx: AVMUnsignedTx): Promise<AvmTx>;\n    abstract signP(tx: PlatformUnsignedTx): Promise<PlatformTx>;\n    abstract signC(tx: EVMUnsignedTx): Promise<EVMTx>;\n\n    abstract getAddressX(): string;\n    abstract getChangeAddressX(): string;\n    abstract getAddressP(): string;\n\n    abstract getExternalAddressesX(): Promise<string[]>;\n    abstract getExternalAddressesXSync(): string[];\n    abstract getInternalAddressesX(): Promise<string[]>;\n    abstract getInternalAddressesXSync(): string[];\n    abstract getExternalAddressesP(): Promise<string[]>;\n    abstract getExternalAddressesPSync(): string[];\n\n    abstract getAllAddressesX(): Promise<string[]>;\n    abstract getAllAddressesXSync(): string[];\n    abstract getAllAddressesP(): Promise<string[]>;\n    abstract getAllAddressesPSync(): string[];\n\n    abstract personalSign(data: string): Promise<string>;\n    abstract signTypedData_V1(data: TypedDataV1): Promise<string>;\n    abstract signTypedData_V3(data: TypedMessage<any>): Promise<string>;\n    abstract signTypedData_V4(data: TypedMessage<any>): Promise<string>;\n\n    protected constructor() {\n        networkEvents.on('network_change', this.onNetworkChange.bind(this));\n    }\n\n    /**\n     * Call after getting done with the wallet to avoi memory leaks and remove event listeners\n     */\n    public destroy() {\n        networkEvents.off('network_change', this.onNetworkChange);\n    }\n\n    /**\n     * Fired when the network changes\n     * @param config\n     * @protected\n     */\n    //@ts-ignore\n    protected onNetworkChange(config: NetworkConfig) {}\n\n    /***\n     * Used to get an identifier string that is consistent across different network connections.\n     * Currently returns the C address of this wallet.\n     */\n    public getBaseAddress(): string {\n        return this.getAddressC();\n    }\n\n    protected emitter: EventEmitter = new EventEmitter();\n\n    public on(event: WalletEventType, listener: (...args: any[]) => void): void {\n        this.emitter.on(event, listener);\n    }\n\n    public off(event: WalletEventType, listener: (...args: any[]) => void): void {\n        this.emitter.off(event, listener);\n    }\n\n    protected emit(event: WalletEventType, args?: WalletEventArgsType): void {\n        this.emitter.emit(event, args);\n    }\n\n    protected emitAddressChange(): void {\n        this.emit('addressChanged', {\n            X: this.getAddressX(),\n            changeX: this.getChangeAddressX(),\n            P: this.getAddressP(),\n        });\n    }\n\n    protected emitBalanceChangeX(): void {\n        this.emit('balanceChangedX', this.balanceX);\n    }\n\n    protected emitBalanceChangeP(): void {\n        this.emit('balanceChangedP', this.getAvaxBalanceP());\n    }\n\n    protected emitBalanceChangeC(): void {\n        this.emit('balanceChangedC', this.getAvaxBalanceC());\n    }\n\n    /**\n     * Gets the active address on the C chain\n     * @return Hex representation of the EVM address.\n     */\n    public getAddressC() {\n        return this.evmWallet.getAddress();\n    }\n\n    public getEvmAddressBech() {\n        return this.evmWallet.getAddressBech32();\n    }\n\n    /**\n     * Returns the BTC address of the C-Chain public key.\n     */\n    public getAddressBTC(type: BTCNetworkType): string {\n        return this.evmWallet.getAddressBTC(type);\n    }\n\n    /**\n     *\n     * @param to - the address funds are being send to.\n     * @param amount - amount of AVAX to send in nAVAX\n     * @param memo - A MEMO for the transaction\n     */\n    async sendAvaxX(to: string, amount: BN, memo?: string): Promise<string> {\n        if (!activeNetwork) throw NO_NETWORK;\n\n        let memoBuff = memo ? Buffer.from(memo) : undefined;\n\n        let froms = await this.getAllAddressesX();\n        let changeAddress = this.getChangeAddressX();\n        let utxoSet = this.utxosX;\n\n        let tx = await avalanche()\n            .XChain()\n            .buildBaseTx(utxoSet, amount, activeNetwork.avaxID, [to], froms, [changeAddress], memoBuff);\n        let signedTx = await this.signX(tx);\n        let txId = await avalanche().XChain().issueTx(signedTx);\n        await waitTxX(txId);\n\n        // Update UTXOs\n        this.updateUtxosX();\n\n        return txId;\n    }\n\n    /**\n     * Sends AVAX to another address on the C chain using legacy transaction format.\n     * @param to Hex address to send AVAX to.\n     * @param amount Amount of AVAX to send, represented in WEI format.\n     * @param gasPrice Gas price in WEI format\n     * @param gasLimit Gas limit\n     *\n     * @return Returns the transaction hash\n     */\n    async sendAvaxC(to: string, amount: BN, gasPrice: BN, gasLimit: number): Promise<string> {\n        let fromAddr = this.getAddressC();\n        let tx = await buildEvmTransferNativeTx(fromAddr, to, amount, gasPrice, gasLimit);\n        let txId = await this.issueEvmTx(tx);\n        await this.updateAvaxBalanceC();\n        return txId;\n    }\n\n    /**\n     * Send Avalanche Native Tokens on X chain\n     * @param assetID ID of the token to send\n     * @param amount How many units of the token to send. Based on smallest divisible unit.\n     * @param to X chain address to send tokens to\n     */\n    async sendANT(assetID: string, amount: BN, to: string): Promise<string> {\n        let utxoSet = this.getUtxosX();\n        let fromAddrs = await this.getAllAddressesX();\n        let changeAddr = this.getChangeAddressX();\n\n        let tx = await avalanche().XChain().buildBaseTx(utxoSet, amount, assetID, [to], fromAddrs, [changeAddr]);\n        let signed = await this.signX(tx);\n        let txId = await avalanche().XChain().issueTx(signed);\n        await waitTxX(txId);\n\n        this.updateUtxosX();\n        return txId;\n    }\n\n    /**\n     * Makes a transfer call on a ERC20 contract.\n     * @param to Hex address to transfer tokens to.\n     * @param amount Amount of the ERC20 token to send, donated in the token's correct denomination.\n     * @param gasPrice Gas price in WEI format\n     * @param gasLimit Gas limit\n     * @param contractAddress Contract address of the ERC20 token\n     */\n    async sendErc20(to: string, amount: BN, gasPrice: BN, gasLimit: number, contractAddress: string): Promise<string> {\n        let fromAddr = this.getAddressC();\n        let token = await getErc20Token(contractAddress);\n        let balOld = await token.balanceOf(fromAddr);\n        let tx = await buildEvmTransferErc20Tx(fromAddr, to, amount, gasPrice, gasLimit, contractAddress);\n        let txHash = await this.issueEvmTx(tx);\n\n        // TODO: We should not be using setTimeout, wait until tx is confirmed on chain\n        // TODO: Can it be an issue with sticky sessions? Nodes behind a LB?\n        // If new balance doesnt match old, emit balance change\n        setTimeout(async () => {\n            let balNew = await token.balanceOf(fromAddr);\n            if (!balOld.eq(balNew)) {\n                this.emitBalanceChangeC();\n            }\n        }, 2000);\n\n        return txHash;\n    }\n\n    /**\n     * Makes a `safeTransferFrom` call on a ERC721 contract.\n     * @param to Hex address to transfer the NFT to.\n     * @param tokenID ID of the token to transfer inside the ERC71 family.\n     * @param gasPrice Gas price in WEI format\n     * @param gasLimit Gas limit\n     * @param contractAddress Contract address of the ERC721 token\n     */\n    async sendErc721(contractAddress: string, to: string, tokenID: number, gasPrice: BN, gasLimit: number) {\n        const tx = await buildEvmTransferErc721Tx(this.getAddressC(), to, gasPrice, gasLimit, contractAddress, tokenID);\n        return await this.issueEvmTx(tx);\n    }\n\n    /**\n     * Estimate the gas needed for an ERC20 Transfer transaction\n     * @param contractAddress The ERC20 contract address\n     * @param to Address receiving the tokens\n     * @param amount Amount to send. Given in the smallest divisible unit.\n     */\n    async estimateErc20Gas(contractAddress: string, to: string, amount: BN): Promise<number> {\n        let from = this.getAddressC();\n        return await estimateErc20Gas(contractAddress, from, to, amount);\n    }\n\n    /**\n     * Estimate the gas needed for an ERC721 `safeTransferFrom` transaction\n     * @param contractAddress The ERC20 contract address\n     * @param to Address receiving the tokens\n     * @param tokenID ID of the token to transfer inside the ERC71 family.\n     */\n    async estimateErc721TransferGasLimit(contractAddress: string, to: string, tokenID: number) {\n        return this.evmWallet.estimateErc721TransferGasLimit(contractAddress, to, tokenID);\n    }\n\n    /**\n     * Estimate gas limit for the given inputs.\n     * @param to\n     * @param data\n     */\n    async estimateGas(to: string, data: string) {\n        const from = this.getAddressC();\n        const nonce = await web3.eth.getTransactionCount(from);\n        return await web3.eth.estimateGas({\n            from: from,\n            nonce: nonce,\n            to: to,\n            data: data,\n        });\n    }\n\n    /**\n     * Estimate the gas needed for a AVAX send transaction on the C chain.\n     * @param to Destination address.\n     * @param amount Amount of AVAX to send, in WEI.\n     */\n    async estimateAvaxGasLimit(to: string, amount: BN, gasPrice: BN): Promise<number> {\n        let from = this.getAddressC();\n        return await estimateAvaxGas(from, to, amount, gasPrice);\n    }\n\n    /**\n     * A method to create custom EVM transactions.\n     * @param gasPrice\n     * @param gasLimit\n     * @param data `data` field of the transaction, in hex format\n     * @param to `to` field of the transaction, in hex format\n     * @param value `value` field of the transaction, in hex format\n     * @param nonce Nonce of the transaction, in number. If not provided, SDK will get the latest nonce from the network\n     */\n    async sendCustomEvmTx(gasPrice: BN, gasLimit: number, data?: string, to?: string, value?: string, nonce?: number) {\n        let from = this.getAddressC();\n        let tx = await buildCustomEvmTx(from, gasPrice, gasLimit, data, to, value, nonce);\n        return await this.issueEvmTx(tx);\n    }\n\n    /**\n     * Returns the maximum spendable AVAX balance for the given chain.\n     * Scans all chains and take cross over fees into account\n     * @param chainType X, P or C\n     */\n    public getUsableAvaxBalanceForChain(chainType: ChainIdType, atomicFeeXP: BN, atomicFeeC: BN): BN {\n        return this.createUniversalNode(chainType, atomicFeeXP, atomicFeeC).reduceTotalBalanceFromParents();\n    }\n\n    /**\n     * Create a new instance of a UniversalNode for the given chain using current balance state\n     * @param chain Chain of the universal node.\n     * @private\n     */\n    private createUniversalNode(chain: ChainIdType, atomicFeeXP: BN, atomicFeeC: BN): UniversalNodeAbstract {\n        let xBal = this.getAvaxBalanceX().unlocked;\n        let pBal = this.getAvaxBalanceP().unlocked;\n        let cBal = avaxCtoX(this.getAvaxBalanceC()); // need to use 9 decimal places\n\n        switch (chain) {\n            case 'X':\n                return createGraphForX(xBal, pBal, cBal, atomicFeeXP, atomicFeeC);\n            case 'P':\n                return createGraphForP(xBal, pBal, cBal, atomicFeeXP, atomicFeeC);\n            case 'C':\n                return createGraphForC(xBal, pBal, cBal, atomicFeeXP, atomicFeeC);\n        }\n    }\n\n    /**\n     * Can this wallet have the given amount on the given chain after a series of internal transactions (if required).\n     * @param chain X/P/C\n     * @param amount The amount to check against\n     */\n    public canHaveBalanceOnChain(chain: ChainIdType, amount: BN, atomicFeeXP: BN, atomicFeeC: BN): boolean {\n        // The maximum amount of AVAX we can have on this chain\n        let maxAmt = this.createUniversalNode(chain, atomicFeeXP, atomicFeeC).reduceTotalBalanceFromParents();\n        return maxAmt.gte(amount);\n    }\n\n    /**\n     * Returns an array of transaction to do in order to have the target amount on the given chain\n     * @param chain The chain (X/P/C) to have the desired amount on\n     * @param amount The desired amount\n     */\n    public getTransactionsForBalance(chain: ChainIdType, amount: BN, atomicFeeXP: BN, atomicFeeC: BN): UniversalTx[] {\n        let xBal = this.getAvaxBalanceX().unlocked;\n        let pBal = this.getAvaxBalanceP().unlocked;\n        let cBal = avaxCtoX(this.getAvaxBalanceC()); // need to use 9 decimal places\n\n        switch (chain) {\n            case 'P':\n                return getStepsForBalanceP(xBal, pBal, cBal, amount, atomicFeeXP, atomicFeeC);\n            case 'C':\n                return getStepsForBalanceC(xBal, pBal, cBal, amount, atomicFeeXP, atomicFeeC);\n            case 'X':\n                return getStepsForBalanceX(xBal, pBal, cBal, amount, atomicFeeXP, atomicFeeC);\n        }\n    }\n\n    /**\n     * Given a `Transaction`, it will sign and issue it to the network.\n     * @param tx The unsigned transaction to issue.\n     */\n    async issueEvmTx(tx: Transaction | FeeMarketEIP1559Transaction): Promise<string> {\n        let signedTx = await this.signEvm(tx);\n        let txHex = signedTx.serialize().toString('hex');\n        let hash = await web3.eth.sendSignedTransaction('0x' + txHex);\n        const txHash = hash.transactionHash;\n        return await waitTxEvm(txHash);\n    }\n\n    /**\n     * Returns the C chain AVAX balance of the wallet in WEI format.\n     */\n    async updateAvaxBalanceC(): Promise<BN> {\n        let balOld = this.evmWallet.getBalance();\n        let balNew = await this.evmWallet.updateBalance();\n\n        if (!balOld.eq(balNew)) {\n            this.emitBalanceChangeC();\n        }\n\n        return balNew;\n    }\n\n    /**\n     *  Returns UTXOs on the X chain that belong to this wallet.\n     *  - Makes network request.\n     *  - Updates `this.utxosX` with new UTXOs\n     *  - Calls `this.updateBalanceX()` after success.\n     *  */\n    public async updateUtxosX(): Promise<AVMUTXOSet> {\n        const addresses = await this.getAllAddressesX();\n        this.utxosX = await avmGetAllUTXOs(addresses);\n\n        await this.updateUnknownAssetsX();\n        this.updateBalanceX();\n\n        return this.utxosX;\n    }\n\n    /**\n     *  Returns the fetched UTXOs on the X chain that belong to this wallet.\n     */\n    public getUtxosX(): AVMUTXOSet {\n        return this.utxosX;\n    }\n\n    /**\n     *  Returns UTXOs on the P chain that belong to this wallet.\n     *  - Makes network request.\n     *  - Updates `this.utxosP` with the new UTXOs\n     */\n    public async updateUtxosP(): Promise<PlatformUTXOSet> {\n        let addresses = await this.getAllAddressesP();\n        this.utxosP = await platformGetAllUTXOs(addresses);\n\n        this.emitBalanceChangeP();\n\n        return this.utxosP;\n    }\n\n    /**\n     * Returns the fetched UTXOs on the P chain that belong to this wallet.\n     */\n    public getUtxosP(): PlatformUTXOSet {\n        return this.utxosP;\n    }\n\n    /**\n     * Returns the number AVAX staked by this wallet.\n     */\n    public async getStake(): Promise<GetStakeResponse> {\n        let addrs = await this.getAllAddressesP();\n        return await getStakeForAddresses(addrs);\n    }\n\n    /**\n     * Returns the wallet's balance of the given ERC20 contracts\n     * @param addresses ERC20 Contract addresses\n     */\n    public async getBalanceERC20(addresses: string[]): Promise<ERC20Balance[]> {\n        let walletAddr = this.getAddressC();\n        let tokenCalls = addresses.map((addr) => getErc20Token(addr));\n        let tokens = await Promise.all(tokenCalls);\n\n        let balanceCalls = tokens.map((token) => token.balanceOf(walletAddr));\n        let balances = await Promise.all(balanceCalls);\n\n        return balances.map((bal, i) => {\n            let token = tokens[i];\n            let balance: ERC20Balance = {\n                address: token.address,\n                denomination: token.decimals,\n                balanceParsed: bnToLocaleString(bal, token.decimals),\n                balance: bal,\n                name: token.name,\n                symbol: token.symbol,\n            };\n            return balance;\n        });\n    }\n\n    private async updateUnknownAssetsX() {\n        let utxos = this.utxosX.getAllUTXOs();\n\n        let assetIds = utxos.map((utxo) => {\n            let idBuff = utxo.getAssetID();\n            return bintools.cb58Encode(idBuff);\n        });\n        let uniqueIds = assetIds.filter((id, index) => {\n            return assetIds.indexOf(id) === index;\n        });\n\n        let promises = uniqueIds.map((id) => getAssetDescription(id));\n        await Promise.all(promises);\n    }\n\n    /**\n     * Uses the X chain UTXOs owned by this wallet, gets asset description for unknown assets,\n     * and returns a dictionary of Asset IDs to balance amounts.\n     * - Updates `this.balanceX`\n     * - Expensive operation if there are unknown assets\n     * - Uses existing UTXOs\n     * @private\n     */\n    private async updateBalanceX(): Promise<WalletBalanceX> {\n        if (!activeNetwork) throw NO_NETWORK;\n        let utxos = this.utxosX.getAllUTXOs();\n\n        let unixNow = UnixNow();\n\n        let res: WalletBalanceX = {};\n\n        for (let i = 0; i < utxos.length; i++) {\n            let utxo = utxos[i];\n            let out = utxo.getOutput();\n            let type = out.getOutputID();\n\n            if (type != AVMConstants.SECPXFEROUTPUTID) continue;\n\n            let locktime = out.getLocktime();\n            let amount = (out as AmountOutput).getAmount();\n            let assetIdBuff = utxo.getAssetID();\n            let assetId = bintools.cb58Encode(assetIdBuff);\n\n            let asset: AssetBalanceX = res[assetId];\n\n            if (!asset) {\n                let assetInfo = await getAssetDescription(assetId);\n                asset = { locked: new BN(0), unlocked: new BN(0), meta: assetInfo };\n            }\n\n            if (locktime.lte(unixNow)) {\n                // not locked\n                asset.unlocked = asset.unlocked.add(amount);\n            } else {\n                // locked\n                asset.locked = asset.locked.add(amount);\n            }\n\n            res[assetId] = asset;\n        }\n\n        // If there are no AVAX UTXOs create a dummy empty balance object\n        let avaxID = activeNetwork.avaxID;\n        if (!res[avaxID]) {\n            let assetInfo = await getAssetDescription(avaxID);\n            res[avaxID] = {\n                locked: new BN(0),\n                unlocked: new BN(0),\n                meta: assetInfo,\n            };\n        }\n\n        this.balanceX = res;\n\n        // TODO: Check previous value\n        this.emitBalanceChangeX();\n        return res;\n    }\n\n    public getBalanceX(): WalletBalanceX {\n        return this.balanceX;\n    }\n\n    /**\n     * A helpful method that returns the AVAX balance on X, P, C chains.\n     * Internally calls chain specific getAvaxBalance methods.\n     */\n    public getAvaxBalance(): iAvaxBalance {\n        let X = this.getAvaxBalanceX();\n        let P = this.getAvaxBalanceP();\n        let C = this.getAvaxBalanceC();\n\n        return {\n            X,\n            P,\n            C,\n        };\n    }\n\n    /**\n     * Returns the X chain AVAX balance of the current wallet state.\n     * - Does not make a network request.\n     * - Does not refresh wallet balance.\n     */\n    public getAvaxBalanceX(): AssetBalanceRawX {\n        if (!activeNetwork) {\n            throw new Error('Network not selected.');\n        }\n        return (\n            this.balanceX[activeNetwork.avaxID] || {\n                unlocked: new BN(0),\n                locked: new BN(0),\n            }\n        );\n    }\n\n    public getAvaxBalanceC(): BN {\n        return this.evmWallet.getBalance();\n    }\n\n    /**\n     * Returns the P chain AVAX balance of the current wallet state.\n     * - Does not make a network request.\n     * - Does not refresh wallet balance.\n     */\n    public getAvaxBalanceP(): AssetBalanceP {\n        let unlocked = new BN(0);\n        let locked = new BN(0);\n        let lockedStakeable = new BN(0);\n\n        let utxos = this.utxosP.getAllUTXOs();\n        let unixNow = UnixNow();\n\n        for (let i = 0; i < utxos.length; i++) {\n            let utxo = utxos[i];\n            let out = utxo.getOutput();\n            let type = out.getOutputID();\n\n            let amount = (out as AmountOutput).getAmount();\n\n            if (type === PlatformVMConstants.STAKEABLELOCKOUTID) {\n                let locktime = (out as StakeableLockOut).getStakeableLocktime();\n                if (locktime.lte(unixNow)) {\n                    unlocked.iadd(amount);\n                } else {\n                    lockedStakeable = lockedStakeable.add(amount);\n                }\n            } else {\n                let locktime = (out as AmountOutput).getLocktime();\n                if (locktime.lte(unixNow)) {\n                    unlocked.iadd(amount);\n                } else {\n                    locked.iadd(amount);\n                }\n            }\n        }\n\n        return {\n            unlocked,\n            locked,\n            lockedStakeable: lockedStakeable,\n        };\n    }\n\n    /**\n     * Exports AVAX from P chain to X chain\n     * @remarks\n     * The export fee is added automatically to the amount. Make sure the exported amount includes the import fee for the destination chain.\n     *\n     * @param amt amount of nAVAX to transfer. Fees excluded.\n     * @param destinationChain Either `X` or `C`\n     * @return returns the transaction id.\n     */\n    async exportPChain(amt: BN, destinationChain: ExportChainsP) {\n        let pChangeAddr = this.getAddressP();\n        let fromAddrs = await this.getAllAddressesP();\n\n        const destinationAddr = destinationChain === 'X' ? this.getAddressX() : this.getEvmAddressBech();\n\n        let utxoSet = this.utxosP;\n\n        const exportTx = await buildPlatformExportTransaction(\n            utxoSet,\n            fromAddrs,\n            destinationAddr,\n            amt,\n            pChangeAddr,\n            destinationChain\n        );\n\n        let tx = await this.signP(exportTx);\n        let txId = await avalanche().PChain().issueTx(tx);\n        await waitTxP(txId);\n\n        await this.updateUtxosP();\n\n        return txId;\n    }\n\n    /***\n     * Estimates the required fee for a C chain export transaction\n     * @param destinationChain Either `X` or `P`\n     * @param baseFee Current base fee of the network, use a padded amount.\n     * @return BN C chain atomic export transaction fee in nAVAX.\n     */\n    estimateAtomicFeeExportC(destinationChain: ExportChainsC, baseFee: BN): BN {\n        let destinationAddr = destinationChain === 'X' ? this.getAddressX() : this.getAddressP();\n        const hexAddr = this.getAddressC();\n        // The amount does not effect the fee that much\n        const amt = new BN(0);\n        const gas = estimateExportGasFeeFromMockTx(destinationChain, amt, hexAddr, destinationAddr);\n        return avaxCtoX(baseFee.mul(new BN(gas)));\n    }\n\n    /**\n     * Exports AVAX from C chain to X chain\n     * @remarks\n     * Make sure the exported `amt` includes the import fee for the destination chain.\n     *\n     * @param amt amount of nAVAX to transfer\n     * @param destinationChain either `X` or `P`\n     * @param exportFee Export fee in nAVAX\n     * @return returns the transaction id.\n     */\n    async exportCChain(amt: BN, destinationChain: ExportChainsC, exportFee?: BN): Promise<string> {\n        let hexAddr = this.getAddressC();\n        let bechAddr = this.getEvmAddressBech();\n\n        let fromAddresses = [hexAddr];\n        let destinationAddr = destinationChain === 'X' ? this.getAddressX() : this.getAddressP();\n\n        // Calculate export fee if it's not given.\n        if (!exportFee) {\n            const gas = estimateExportGasFeeFromMockTx(destinationChain, amt, hexAddr, destinationAddr);\n            const baseFee = await getBaseFeeRecommended();\n            exportFee = avaxCtoX(baseFee.mul(new BN(gas)));\n        }\n\n        let exportTx = await buildEvmExportTransaction(\n            fromAddresses,\n            destinationAddr,\n            amt,\n            bechAddr,\n            destinationChain,\n            exportFee\n        );\n\n        let tx = await this.signC(exportTx);\n\n        let txId = await avalanche().CChain().issueTx(tx);\n\n        await waitTxC(txId);\n\n        await this.updateAvaxBalanceC();\n        return txId;\n    }\n\n    /**\n     * Exports AVAX from X chain to either P or C chain\n     * @remarks\n     * The export fee will be added to the amount automatically. Make sure the exported amount has the import fee for the destination chain.\n     *\n     * @param amt amount of nAVAX to transfer\n     * @param destinationChain Which chain to export to.\n     * @return returns the transaction id.\n     */\n    async exportXChain(amt: BN, destinationChain: ExportChainsX) {\n        let destinationAddr = destinationChain === 'P' ? this.getAddressP() : this.getEvmAddressBech();\n\n        let fromAddresses = await this.getAllAddressesX();\n        let changeAddress = this.getChangeAddressX();\n        let utxos = this.utxosX;\n        let exportTx = await buildAvmExportTransaction(\n            destinationChain,\n            utxos,\n            fromAddresses,\n            destinationAddr,\n            amt,\n            changeAddress\n        );\n\n        let tx = await this.signX(exportTx);\n\n        let txId = await avalanche().XChain().issueTx(tx);\n        await waitTxX(txId);\n\n        // Update UTXOs\n        await this.updateUtxosX();\n\n        return txId;\n    }\n\n    async getAtomicUTXOsX(sourceChain: ExportChainsX) {\n        let addrs = await this.getAllAddressesX();\n        let result = await avmGetAtomicUTXOs(addrs, sourceChain);\n        return result;\n    }\n\n    async getAtomicUTXOsP(sourceChain: ExportChainsP): Promise<PlatformUTXOSet> {\n        let addrs = await this.getAllAddressesP();\n        return await platformGetAtomicUTXOs(addrs, sourceChain);\n    }\n\n    async getAtomicUTXOsC(sourceChain: ExportChainsC) {\n        const bechAddr = this.getEvmAddressBech();\n        return await evmGetAtomicUTXOs([bechAddr], sourceChain);\n    }\n\n    /**\n     * Imports atomic X chain UTXOs to the current active X chain address\n     * @param sourceChain The chain to import from, either `P` or `C`\n     */\n    async importX(sourceChain: ExportChainsX) {\n        const utxoSet = await this.getAtomicUTXOsX(sourceChain);\n\n        if (utxoSet.getAllUTXOs().length === 0) {\n            throw new Error('Nothing to import.');\n        }\n\n        let xToAddr = this.getAddressX();\n\n        let hrp = avalanche().getHRP();\n        let utxoAddrs = utxoSet.getAddresses().map((addr) => bintools.addressToString(hrp, 'X', addr));\n\n        let fromAddrs = utxoAddrs;\n        let ownerAddrs = utxoAddrs;\n\n        const sourceChainId = chainIdFromAlias(sourceChain);\n\n        // Owner addresses, the addresses we exported to\n        const unsignedTx = await avalanche()\n            .XChain()\n            .buildImportTx(utxoSet, ownerAddrs, sourceChainId, [xToAddr], fromAddrs, [xToAddr]);\n\n        const tx = await this.signX(unsignedTx);\n        const txId = await avalanche().XChain().issueTx(tx);\n\n        await waitTxX(txId);\n\n        // Update UTXOs\n        await this.updateUtxosX();\n\n        return txId;\n    }\n\n    /**\n     * Import utxos in atomic memory to the P chain.\n     * @param sourceChain Either `X` or `C`\n     * @param [toAddress] The destination P chain address assets will get imported to. Defaults to the P chain address of the wallet.\n     */\n    async importP(sourceChain: ExportChainsP, toAddress?: string): Promise<string> {\n        const utxoSet = await this.getAtomicUTXOsP(sourceChain);\n\n        if (utxoSet.getAllUTXOs().length === 0) {\n            throw new Error('Nothing to import.');\n        }\n\n        // Owner addresses, the addresses we exported to\n        let walletAddrP = this.getAddressP();\n\n        let hrp = avalanche().getHRP();\n        let utxoAddrs = utxoSet.getAddresses().map((addr) => bintools.addressToString(hrp, 'P', addr));\n\n        let ownerAddrs = utxoAddrs;\n\n        if (!toAddress) {\n            toAddress = walletAddrP;\n        }\n\n        const sourceChainId = chainIdFromAlias(sourceChain);\n\n        const unsignedTx = await avalanche()\n            .PChain()\n            .buildImportTx(\n                utxoSet,\n                ownerAddrs,\n                sourceChainId,\n                [toAddress],\n                ownerAddrs,\n                [walletAddrP],\n                undefined,\n                undefined\n            );\n        const tx = await this.signP(unsignedTx);\n        const txId = await avalanche().PChain().issueTx(tx);\n\n        await waitTxP(txId);\n\n        await this.updateUtxosP();\n\n        return txId;\n    }\n\n    /**\n     *\n     * @param sourceChain Which chain to import from. `X` or `P`\n     * @param [fee] The import fee to use in the transactions. If omitted the SDK will try to calculate the fee. For deterministic transactions you should always pre calculate and provide this value.\n     * @param [utxoSet] If omitted imports all atomic UTXOs.\n     */\n    async importC(sourceChain: ExportChainsC, fee?: BN, utxoSet?: EVMUTXOSet) {\n        let bechAddr = this.getEvmAddressBech();\n\n        if (!utxoSet) {\n            utxoSet = await this.getAtomicUTXOsC(sourceChain);\n        }\n\n        const utxos = utxoSet.getAllUTXOs();\n        if (utxos.length === 0) {\n            throw new Error('Nothing to import.');\n        }\n\n        let toAddress = this.getAddressC();\n        let ownerAddresses = [bechAddr];\n        const sourceChainId = chainIdFromAlias(sourceChain);\n\n        // Calculate fee if not provided\n        if (!fee) {\n            // Calculate number of signatures\n            const numSigs = utxos.reduce((acc, utxo) => {\n                return acc + utxo.getOutput().getAddresses().length;\n            }, 0);\n            const numIns = utxos.length;\n\n            const importGas = estimateImportGasFeeFromMockTx(numIns, numSigs);\n            const baseFee = await getBaseFeeRecommended();\n            fee = avaxCtoX(baseFee.mul(new BN(importGas)));\n        }\n\n        const unsignedTx = await avalanche()\n            .CChain()\n            .buildImportTx(utxoSet, toAddress, ownerAddresses, sourceChainId, fee);\n        let tx = await this.signC(unsignedTx);\n        let id = await avalanche().CChain().issueTx(tx);\n\n        await waitTxC(id);\n\n        await this.updateAvaxBalanceC();\n\n        return id;\n    }\n\n    async createNftFamily(name: string, symbol: string, groupNum: number) {\n        let fromAddresses = await this.getAllAddressesX();\n        let changeAddress = this.getChangeAddressX();\n\n        let minterAddress = this.getAddressX();\n\n        let utxoSet = this.utxosX;\n\n        let unsignedTx = await buildCreateNftFamilyTx(\n            name,\n            symbol,\n            groupNum,\n            fromAddresses,\n            minterAddress,\n            changeAddress,\n            utxoSet\n        );\n\n        let signed = await this.signX(unsignedTx);\n        const txId = await avalanche().XChain().issueTx(signed);\n        return await waitTxX(txId);\n    }\n\n    async mintNft(mintUtxo: AVMUTXO, payload: PayloadBase, quantity: number) {\n        let ownerAddress = this.getAddressX();\n        let changeAddress = this.getChangeAddressX();\n\n        let sourceAddresses = await this.getAllAddressesX();\n\n        let utxoSet = this.utxosX;\n        let tx = await buildMintNftTx(\n            mintUtxo,\n            payload,\n            quantity,\n            ownerAddress,\n            changeAddress,\n            sourceAddresses,\n            utxoSet\n        );\n        let signed = await this.signX(tx);\n        const txId = await avalanche().XChain().issueTx(signed);\n        return await waitTxX(txId);\n    }\n\n    /**\n     * Adds a validator to the network using the given node id.\n     *\n     * @param nodeID The node id you are adding as a validator\n     * @param amt Amount of AVAX to stake in nAVAX\n     * @param start Validation period start date\n     * @param end Validation period end date\n     * @param delegationFee Minimum 2%\n     * @param rewardAddress P chain address to send staking rewards\n     * @param utxos\n     *\n     * @return Transaction id\n     */\n    async validate(\n        nodeID: string,\n        amt: BN,\n        start: Date,\n        end: Date,\n        delegationFee: number,\n        rewardAddress?: string,\n        utxos?: PlatformUTXO[]\n    ): Promise<string> {\n        let utxoSet = this.utxosP;\n\n        // If given custom UTXO set use that\n        if (utxos) {\n            utxoSet = new PlatformUTXOSet();\n            utxoSet.addArray(utxos);\n        }\n\n        let pAddressStrings = await this.getAllAddressesP();\n\n        let stakeAmount = amt;\n\n        // If reward address isn't given use index 0 address\n        if (!rewardAddress) {\n            rewardAddress = this.getAddressP();\n        }\n\n        // For change address use first available on the platform chain\n        let changeAddress = this.getAddressP();\n\n        let stakeReturnAddr = this.getAddressP();\n\n        // Convert dates to unix time\n        let startTime = new BN(Math.round(start.getTime() / 1000));\n        let endTime = new BN(Math.round(end.getTime() / 1000));\n\n        const unsignedTx = await avalanche().PChain().buildAddValidatorTx(\n            utxoSet,\n            [stakeReturnAddr],\n            pAddressStrings, // from\n            [changeAddress], // change\n            nodeID,\n            startTime,\n            endTime,\n            stakeAmount,\n            [rewardAddress],\n            delegationFee\n        );\n\n        let tx = await this.signP(unsignedTx);\n        const txId = await avalanche().PChain().issueTx(tx);\n        await waitTxP(txId);\n\n        this.updateUtxosP();\n\n        return txId;\n    }\n\n    async delegate(\n        nodeID: string,\n        amt: BN,\n        start: Date,\n        end: Date,\n        rewardAddress?: string,\n        utxos?: PlatformUTXO[]\n    ): Promise<string> {\n        let utxoSet = this.utxosP;\n        let pAddressStrings = await this.getAllAddressesP();\n\n        let stakeAmount = amt;\n\n        // If given custom UTXO set use that\n        if (utxos) {\n            utxoSet = new PlatformUTXOSet();\n            utxoSet.addArray(utxos);\n        }\n\n        // If reward address isn't given use current P address\n        if (!rewardAddress) {\n            rewardAddress = this.getAddressP();\n        }\n\n        let stakeReturnAddr = this.getAddressP();\n\n        // For change address use the current platform chain\n        let changeAddress = this.getAddressP();\n\n        // Convert dates to unix time\n        let startTime = new BN(Math.round(start.getTime() / 1000));\n        let endTime = new BN(Math.round(end.getTime() / 1000));\n\n        const unsignedTx = await avalanche().PChain().buildAddDelegatorTx(\n            utxoSet,\n            [stakeReturnAddr],\n            pAddressStrings,\n            [changeAddress],\n            nodeID,\n            startTime,\n            endTime,\n            stakeAmount,\n            [rewardAddress] // reward address\n        );\n\n        const tx = await this.signP(unsignedTx);\n        const txId = await avalanche().PChain().issueTx(tx);\n        await waitTxP(txId);\n\n        this.updateUtxosP();\n        return txId;\n    }\n\n    /**\n     * Issues the given transaction.\n     * @param tx A universal transaction json object.\n     */\n    public async issueUniversalTx(tx: UniversalTx): Promise<string> {\n        switch (tx.action) {\n            case 'export_x_c':\n                return await this.exportXChain(tx.amount, 'C');\n            case 'import_x_c':\n                return await this.importC('X', tx.fee);\n            case 'export_x_p':\n                return await this.exportXChain(tx.amount, 'P');\n            case 'import_x_p':\n                return await this.importP('X');\n            case 'export_c_x':\n                return await this.exportCChain(tx.amount, 'X', tx.fee);\n            case 'import_c_x':\n                return await this.importX('C');\n            case 'export_c_p':\n                return await this.exportCChain(tx.amount, 'P', tx.fee);\n            case 'import_c_p':\n                return await this.importP('C');\n            case 'export_p_x':\n                return await this.exportPChain(tx.amount, 'X');\n            case 'import_p_x':\n                return await this.importX('P');\n            case 'export_p_c':\n                return await this.exportPChain(tx.amount, 'C');\n            case 'import_p_c':\n                return await this.importC('P', tx.fee);\n            default:\n                throw new Error('Method not supported.');\n        }\n    }\n\n    async getHistoryX(limit = 0): Promise<OrteliusAvalancheTx[]> {\n        let addrs = await this.getAllAddressesX();\n        return await getAddressHistory(addrs, limit, avalanche().XChain().getBlockchainID());\n    }\n\n    async getHistoryP(limit = 0): Promise<OrteliusAvalancheTx[]> {\n        let addrs = await this.getAllAddressesP();\n        return await getAddressHistory(addrs, limit, avalanche().PChain().getBlockchainID());\n    }\n\n    /**\n     * Returns atomic history for this wallet on the C chain.\n     * @remarks Excludes EVM transactions.\n     * @param limit\n     */\n    async getHistoryC(limit = 0): Promise<OrteliusAvalancheTx[]> {\n        let addrs = [this.getEvmAddressBech(), ...(await this.getAllAddressesX())];\n        return await getAddressHistory(addrs, limit, avalanche().CChain().getBlockchainID());\n    }\n\n    /**\n     * Returns history for this wallet on the C chain.\n     * @remarks Excludes atomic C chain import/export transactions.\n     */\n    async getHistoryEVM() {\n        let addr = this.getAddressC();\n        return await getAddressHistoryEVM(addr);\n    }\n\n    /**\n     * Returns the erc 20 activity for this wallet's C chain address. Uses Snowtrace APIs.\n     * @param offset Number of items per page. Optional.\n     * @param page If provided will paginate the results. Optional.\n     * @param contractAddress Filter activity by the ERC20 contract address. Optional.\n     */\n    async getHistoryERC20(page?: number, offset?: number, contractAddress?: string) {\n        const erc20Hist = await getErc20History(this.getAddressC(), activeNetwork, page, offset, contractAddress);\n        return erc20Hist;\n    }\n\n    /**\n     * Get a list of 'Normal' Transactions for wallet's C chain address. Uses Snowtrace APIs.\n     * @param offset Number of items per page. Optional.\n     * @param page If provided will paginate the results. Optional.\n     */\n    async getHistoryNormalTx(page?: number, offset?: number) {\n        const normalHist = await getNormalHistory(this.getAddressC(), activeNetwork, page, offset);\n        return normalHist;\n    }\n\n    async getHistory(limit: number = 0): Promise<HistoryItemType[]> {\n        let [txsX, txsP, txsC] = await Promise.all([\n            this.getHistoryX(limit),\n            this.getHistoryP(limit),\n            this.getHistoryC(limit),\n        ]);\n\n        let txsXPC = filterDuplicateOrtelius(txsX.concat(txsP, txsC));\n\n        let txsEVM = await this.getHistoryEVM();\n\n        let addrsX = await this.getAllAddressesX();\n        let addrBechC = this.getEvmAddressBech();\n        let addrs = [...addrsX, addrBechC];\n\n        let addrC = this.getAddressC();\n\n        // Parse X,P,C transactions\n        // Have to loop because of the asynchronous call\n        let parsedXPC = [];\n        for (let i = 0; i < txsXPC.length; i++) {\n            let tx = txsXPC[i];\n            try {\n                let summary = await getTransactionSummary(tx, addrs, addrC);\n                parsedXPC.push(summary);\n            } catch (err) {\n                console.error(err);\n            }\n        }\n\n        // Parse EVM Transactions\n        let parsedEVM = txsEVM.map((tx) => getTransactionSummaryEVM(tx, addrC));\n\n        // Sort and join X,P,C transactions\n        let parsedAll = [...parsedXPC, ...parsedEVM];\n        let txsSorted = parsedAll.sort((x, y) => (x.timestamp.getTime() < y.timestamp.getTime() ? 1 : -1));\n\n        // If there is a limit only return that much\n        if (limit > 0) {\n            return txsSorted.slice(0, limit);\n        }\n        return txsSorted;\n    }\n\n    /**\n     * Fetches information about the given txId and parses it from the wallet's perspective\n     * @param txId\n     */\n    async getHistoryTx(txId: string): Promise<HistoryItemType> {\n        let addrs = await this.getAllAddressesX();\n        let addrC = this.getAddressC();\n\n        let rawData = await getTx(txId);\n        return await getTransactionSummary(rawData, addrs, addrC);\n    }\n\n    /**\n     * Fetches information about the given txId and parses it from the wallet's perspective\n     * @param txHash\n     */\n    async getHistoryTxEvm(txHash: string): Promise<HistoryItemType> {\n        let addrC = this.getAddressC();\n\n        let rawData = await getTxEvm(txHash);\n        return getTransactionSummaryEVM(rawData, addrC);\n    }\n\n    async parseOrteliusTx(tx: OrteliusAvalancheTx): Promise<HistoryItemType> {\n        let addrsX = await this.getAllAddressesX();\n        let addrBechC = this.getEvmAddressBech();\n        let addrs = [...addrsX, addrBechC];\n        let addrC = this.getAddressC();\n        return await getTransactionSummary(tx, addrs, addrC);\n    }\n}\n","import * as bip32 from 'bip32';\nimport { activeNetwork, avalanche } from '@/Network/network';\nimport { KeyPair as AVMKeyPair, KeyChain as AVMKeyChain } from '@c4tplatform/caminojs/dist/apis/avm/keychain';\nimport { KeyChain as PlatformKeyChain, KeyPair as PlatformKeyPair } from '@c4tplatform/caminojs/dist/apis/platformvm';\nimport { HdChainType } from './types';\nimport { Buffer } from '@c4tplatform/caminojs/dist';\nimport {\n    DERIVATION_SLEEP_INTERVAL,\n    HD_SCAN_GAP_SIZE,\n    HD_SCAN_LOOK_UP_WINDOW,\n    SCAN_RANGE,\n    SCAN_SIZE,\n} from './constants';\nimport { getAddressChains } from '@/Explorer';\nimport { NO_NETWORK } from '@/errors';\nimport { bintools } from '@/common';\nimport { sleep } from '@/utils';\n\ntype AddressCache = {\n    [index: string]: bip32.BIP32Interface;\n};\n\ntype KeyCacheX = {\n    [index: string]: AVMKeyPair;\n};\n\ntype KeyCacheP = {\n    [index: string]: PlatformKeyPair;\n};\n\n// Each HD wallet has 2 HdScaners, one for internal chain, one for external\nexport class HdScanner {\n    protected index = 0;\n    protected addressCache: AddressCache = {};\n    protected keyCacheX: KeyCacheX = {};\n    protected keyCacheP: KeyCacheP = {};\n    readonly changePath: string;\n    private avmAddrFactory: AVMKeyPair;\n    readonly accountKey: bip32.BIP32Interface;\n\n    constructor(accountKey: bip32.BIP32Interface, isInternal = true) {\n        this.changePath = isInternal ? '1' : '0';\n        this.accountKey = accountKey;\n        // We need an instance of an AVM key to generate adddresses from public keys\n        let hrp = avalanche().getHRP();\n        this.avmAddrFactory = new AVMKeyPair(hrp, 'X');\n    }\n\n    getIndex() {\n        return this.index;\n    }\n\n    setIndex(index: number) {\n        let round = Math.floor(index);\n        if (round < 0) throw new Error('A derivation index can not be less than 0.');\n        this.index = round;\n    }\n\n    public increment(): number {\n        return this.index++;\n    }\n\n    public getAddressX() {\n        return this.getAddressForIndex(this.index, 'X');\n    }\n\n    public getAddressP() {\n        return this.getAddressForIndex(this.index, 'P');\n    }\n\n    /**\n     * Returns every address up to and including the current index.\n     * @param chainId Either X or P\n     */\n    public async getAllAddresses(chainId: HdChainType = 'X'): Promise<string[]> {\n        let upTo = this.index;\n        return await this.getAddressesInRange(0, upTo + 1, chainId);\n    }\n\n    /**\n     * Returns every address up to and including the current index synchronously.\n     * @param chainId Either X or P\n     */\n    public getAllAddressesSync(chainId: HdChainType = 'X'): string[] {\n        let upTo = this.index;\n        return this.getAddressesInRangeSync(0, upTo + 1, chainId);\n    }\n\n    /**\n     * Returns addresses in the given range\n     * @param start Start index\n     * @param end End index, exclusive\n     * @param chainId  `X` or `P` optional, returns X by default\n     */\n    public async getAddressesInRange(start: number, end: number, chainId: HdChainType = 'X'): Promise<string[]> {\n        let res = [];\n        for (let i = start; i < end; i++) {\n            res.push(this.getAddressForIndex(i, chainId));\n\n            // Sleep every Nth address to open up the thread\n            if ((i - start) % DERIVATION_SLEEP_INTERVAL === 0) {\n                await sleep(0);\n            }\n        }\n        return res;\n    }\n\n    /**\n     * Returns addresses in the given range\n     * @param start Start index\n     * @param end End index, exclusive\n     * @param chainId  `X` or `P` optional, returns X by default\n     */\n    public getAddressesInRangeSync(start: number, end: number, chainId: HdChainType = 'X'): string[] {\n        let res = [];\n        for (let i = start; i < end; i++) {\n            res.push(this.getAddressForIndex(i, chainId));\n        }\n        return res;\n    }\n\n    getKeyChainX(): AVMKeyChain {\n        let keychain = avalanche().XChain().newKeyChain();\n        for (let i = 0; i <= this.index; i++) {\n            let key = this.getKeyForIndexX(i);\n            keychain.addKey(key);\n        }\n        return keychain;\n    }\n\n    getKeyChainP(): PlatformKeyChain {\n        let keychain = avalanche().PChain().newKeyChain();\n        for (let i = 0; i <= this.index; i++) {\n            let key = this.getKeyForIndexP(i);\n            keychain.addKey(key);\n        }\n        return keychain;\n    }\n\n    getKeyForIndexX(index: number): AVMKeyPair {\n        let cache = this.keyCacheX[index];\n        if (cache) return cache;\n\n        let hdKey = this.getHdKeyForIndex(index);\n        let pkHex = hdKey.privateKey!.toString('hex');\n\n        let pkBuf: Buffer = new Buffer(pkHex, 'hex');\n\n        let keychain = avalanche().XChain().newKeyChain();\n        let keypair = keychain.importKey(pkBuf);\n\n        this.keyCacheX[index] = keypair;\n        return keypair;\n    }\n\n    getKeyForIndexP(index: number): PlatformKeyPair {\n        let cache = this.keyCacheP[index];\n        if (cache) return cache;\n\n        let hdKey = this.getHdKeyForIndex(index);\n        let pkHex = hdKey.privateKey!.toString('hex');\n\n        let pkBuf: Buffer = new Buffer(pkHex, 'hex');\n\n        let keychain = avalanche().PChain().newKeyChain();\n        let keypair = keychain.importKey(pkBuf);\n\n        this.keyCacheP[index] = keypair;\n\n        return keypair;\n    }\n\n    private getHdKeyForIndex(index: number): bip32.BIP32Interface {\n        let key: bip32.BIP32Interface;\n        if (this.addressCache[index]) {\n            key = this.addressCache[index];\n        } else {\n            key = this.accountKey.derivePath(`${this.changePath}/${index}`);\n            this.addressCache[index] = key;\n        }\n        return key;\n    }\n\n    public getAddressForIndex(index: number, chainId: HdChainType = 'X'): string {\n        let key = this.getHdKeyForIndex(index);\n\n        let publicKey = key.publicKey.toString('hex');\n        let publicKeyBuff = Buffer.from(publicKey, 'hex');\n\n        let hrp = avalanche().getHRP();\n\n        let addrBuf = AVMKeyPair.addressFromPublicKey(publicKeyBuff);\n        let addr = bintools.addressToString(hrp, chainId, addrBuf);\n\n        return addr;\n    }\n\n    // Uses the explorer to scan used addresses and find its starting index\n    public async resetIndex(startIndex = 0): Promise<number> {\n        if (!activeNetwork) throw NO_NETWORK;\n\n        let index;\n        if (activeNetwork.explorerURL) {\n            index = await this.findAvailableIndexExplorer(startIndex);\n        } else {\n            index = await this.findAvailableIndexNode(startIndex);\n        }\n        this.index = index;\n        return index;\n    }\n\n    // Scans the address space of this hd path and finds the last used index using the\n    // explorer API.\n    private async findAvailableIndexExplorer(startIndex = 0): Promise<number> {\n        let addrs = await this.getAddressesInRange(startIndex, startIndex + HD_SCAN_LOOK_UP_WINDOW);\n        let addrChains = await getAddressChains(addrs);\n\n        for (let i = 0; i < addrs.length - HD_SCAN_GAP_SIZE; i++) {\n            let gapSize: number = 0;\n\n            for (let n = 0; n < HD_SCAN_GAP_SIZE; n++) {\n                let scanIndex = i + n;\n                let scanAddr = addrs[scanIndex];\n\n                let rawAddr = scanAddr.split('-')[1];\n                let chains: string[] = addrChains[rawAddr];\n\n                if (!chains) {\n                    // If doesnt exist on any chain\n                    gapSize++;\n                } else {\n                    i = i + n;\n                    break;\n                }\n            }\n\n            // If the gap is reached return the index\n            if (gapSize === HD_SCAN_GAP_SIZE) {\n                return startIndex + i;\n            }\n        }\n\n        return await this.findAvailableIndexExplorer(startIndex + (HD_SCAN_LOOK_UP_WINDOW - HD_SCAN_GAP_SIZE));\n    }\n\n    // Uses the node to find last used HD index\n    // Only used when there is no explorer API available\n    private async findAvailableIndexNode(start = 0): Promise<number> {\n        let addrsX: string[] = [];\n        let addrsP: string[] = [];\n\n        // Get keys for indexes start to start+scan_size\n        for (let i: number = start; i < start + SCAN_SIZE; i++) {\n            let addressX = this.getAddressForIndex(i, 'X');\n            let addressP = this.getAddressForIndex(i, 'P');\n            addrsX.push(addressX);\n            addrsP.push(addressP);\n        }\n\n        let utxoSetX = (await avalanche().XChain().getUTXOs(addrsX)).utxos;\n        let utxoSetP = (await avalanche().PChain().getUTXOs(addrsP)).utxos;\n\n        // Scan UTXOs of these indexes and try to find a gap of HD_SCAN_GAP_SIZE\n        for (let i: number = 0; i < addrsX.length - HD_SCAN_GAP_SIZE; i++) {\n            let gapSize: number = 0;\n            for (let n: number = 0; n < HD_SCAN_GAP_SIZE; n++) {\n                let scanIndex: number = i + n;\n                let addr: string = addrsX[scanIndex];\n                let addrBuf = bintools.parseAddress(addr, 'X');\n                let addrUTXOsX: string[] = utxoSetX.getUTXOIDs([addrBuf]);\n                let addrUTXOsP: string[] = utxoSetP.getUTXOIDs([addrBuf]);\n                if (addrUTXOsX.length === 0 && addrUTXOsP.length === 0) {\n                    gapSize++;\n                } else {\n                    // Potential improvement\n                    i = i + n;\n                    break;\n                }\n            }\n\n            // If we found a gap of 20, we can return the last fullIndex+1\n            if (gapSize === HD_SCAN_GAP_SIZE) {\n                let targetIndex = start + i;\n                return targetIndex;\n            }\n        }\n        return await this.findAvailableIndexNode(start + SCAN_RANGE);\n    }\n}\n","import { WalletProvider } from '@/Wallet/Wallet';\nimport { HdScanner } from '@/Wallet/HdScanner';\nimport { UTXOSet as AVMUTXOSet } from '@c4tplatform/caminojs/dist/apis/avm/utxos';\nimport { avalanche } from '@/Network/network';\nimport { UTXOSet as PlatformUTXOSet } from '@c4tplatform/caminojs/dist/apis/platformvm';\nimport { iHDWalletIndex } from '@/Wallet/types';\nimport { bintools } from '@/common';\nimport * as bip32 from 'bip32';\nimport { NetworkConfig } from '@/Network';\n\nexport abstract class HDWalletAbstract extends WalletProvider {\n    protected internalScan: HdScanner;\n    protected externalScan: HdScanner;\n    protected accountKey: bip32.BIP32Interface;\n    public isHdReady = false;\n\n    /**\n     *\n     * @param accountKey The bip32 HD node for path `m/44'/9000'/n'` where n is the desired account index.\n     * @protected\n     */\n    protected constructor(accountKey: bip32.BIP32Interface) {\n        super();\n\n        this.internalScan = new HdScanner(accountKey, true);\n        this.externalScan = new HdScanner(accountKey, false);\n        this.accountKey = accountKey;\n    }\n\n    protected onNetworkChange(config: NetworkConfig) {\n        super.onNetworkChange(config);\n\n        this.isHdReady = false;\n    }\n\n    /**\n     * Returns current index used for external address derivation.\n     */\n    public getExternalIndex(): number {\n        return this.externalScan.getIndex();\n    }\n\n    /**\n     * Returns current index used for internal address derivation.\n     */\n    public getInternalIndex(): number {\n        return this.internalScan.getIndex();\n    }\n\n    /**\n     * Gets the active external address on the X chain\n     * - The X address will change after every deposit.\n     */\n    public getAddressX(): string {\n        return this.externalScan.getAddressX();\n    }\n\n    /**\n     * Gets the active change address on the X chain\n     * - The change address will change after every transaction on the X chain.\n     */\n    public getChangeAddressX() {\n        return this.internalScan.getAddressX();\n    }\n\n    /**\n     * Gets the active address on the P chain\n     */\n    public getAddressP(): string {\n        return this.externalScan.getAddressP();\n    }\n\n    /**\n     * Returns every external X chain address used by the wallet up to now.\n     */\n    public async getExternalAddressesX(): Promise<string[]> {\n        return await this.externalScan.getAllAddresses('X');\n    }\n\n    /**\n     * Returns every external X chain address used by the wallet up to now.\n     */\n    public getExternalAddressesXSync(): string[] {\n        return this.externalScan.getAllAddressesSync('X');\n    }\n\n    /**\n     * Returns every internal X chain address used by the wallet up to now.\n     */\n    public async getInternalAddressesX(): Promise<string[]> {\n        return await this.internalScan.getAllAddresses('X');\n    }\n\n    /**\n     * Returns every internal X chain address used by the wallet up to now.\n     */\n    public getInternalAddressesXSync(): string[] {\n        return this.internalScan.getAllAddressesSync('X');\n    }\n\n    /**\n     * Returns every X chain address used by the wallet up to now (internal + external).\n     */\n    public async getAllAddressesX(): Promise<string[]> {\n        return [...(await this.getExternalAddressesX()), ...(await this.getInternalAddressesX())];\n    }\n\n    /**\n     * Returns every X chain address used by the wallet up to now (internal + external).\n     */\n    public getAllAddressesXSync(): string[] {\n        return [...this.getExternalAddressesXSync(), ...this.getInternalAddressesXSync()];\n    }\n\n    public async getExternalAddressesP(): Promise<string[]> {\n        return this.externalScan.getAllAddresses('P');\n    }\n\n    public getExternalAddressesPSync(): string[] {\n        return this.externalScan.getAllAddressesSync('P');\n    }\n\n    /**\n     * Returns every P chain address used by the wallet up to now.\n     */\n    public getAllAddressesP(): Promise<string[]> {\n        return this.getExternalAddressesP();\n    }\n\n    /**\n     * Returns every P chain address used by the wallet up to now.\n     */\n    public getAllAddressesPSync(): string[] {\n        return this.getExternalAddressesPSync();\n    }\n\n    /**\n     * Scans the network and initializes internal and external addresses on P and X chains.\n     * - Heavy operation\n     * - MUST use the explorer api to find the last used address\n     * - If explorer is not available it will use the connected node. This may result in invalid balances.\n     */\n    public async resetHdIndices(externalStart = 0, internalStart = 0): Promise<iHDWalletIndex> {\n        let promiseExt = this.externalScan.resetIndex(externalStart);\n        let promiseInt = this.internalScan.resetIndex(internalStart);\n\n        const [indexExt, indexInt] = await Promise.all([promiseExt, promiseInt]);\n\n        this.emitAddressChange();\n        this.isHdReady = true;\n        this.emitHdReady();\n\n        return {\n            internal: indexInt,\n            external: indexExt,\n        };\n    }\n\n    public setHdIndices(external: number, internal: number) {\n        this.externalScan.setIndex(external);\n        this.internalScan.setIndex(internal);\n\n        this.emitAddressChange();\n        this.isHdReady = true;\n        this.emitHdReady();\n    }\n\n    /**\n     * Emits an event to indicate the wallet has finishing calculating its last use address\n     * @protected\n     */\n    protected emitHdReady(): void {\n        this.emit('hd_ready', {\n            external: this.getExternalIndex(),\n            internal: this.getInternalIndex(),\n        });\n    }\n\n    public async updateUtxosX(): Promise<AVMUTXOSet> {\n        let utxosX = await super.updateUtxosX();\n\n        // If the current internal or external X address is in the utxo set, increment hd index\n        let utxoAddrs = utxosX.getAddresses();\n        let utxoAddrsStr = utxoAddrs.map((addr) => {\n            return bintools.addressToString(avalanche().getHRP(), 'X', addr);\n        });\n\n        let addrExternalX = this.getAddressX();\n        let addrInternalX = this.getChangeAddressX();\n\n        let isAddrChange = false;\n        // Increment external index if the current address is in the utxo set\n        if (utxoAddrsStr.includes(addrExternalX)) {\n            this.incrementExternal();\n            isAddrChange = true;\n        }\n\n        // Increment internal index if the current address is in the utxo set\n        if (utxoAddrsStr.includes(addrInternalX)) {\n            this.incrementInternal();\n            isAddrChange = true;\n        }\n\n        if (isAddrChange) this.emitAddressChange();\n\n        return utxosX;\n    }\n\n    private incrementExternal() {\n        this.externalScan.increment();\n    }\n\n    private incrementInternal() {\n        this.internalScan.increment();\n    }\n\n    public async updateUtxosP(): Promise<PlatformUTXOSet> {\n        let utxosP = await super.updateUtxosP();\n\n        // If the current P address is in the utxo set, increment hd index\n        let utxoAddrs = utxosP.getAddresses();\n        let utxoAddrsStr = utxoAddrs.map((addr) => {\n            return bintools.addressToString(avalanche().getHRP(), 'P', addr);\n        });\n\n        let addrExternalP = this.getAddressP();\n\n        // Increment external index if the current address is in the utxo set\n        if (utxoAddrsStr.includes(addrExternalP)) {\n            this.incrementExternal();\n            this.emitAddressChange();\n        }\n\n        return utxosP;\n    }\n\n    public getAddressAtIndexExternalX(index: number): string {\n        if (index < 0) throw new Error('Index must be >= 0');\n        return this.externalScan.getKeyForIndexX(index).getAddressString();\n    }\n\n    public getAddressAtIndexInternalX(index: number): string {\n        if (index < 0) throw new Error('Index must be >= 0');\n        return this.internalScan.getKeyForIndexX(index).getAddressString();\n    }\n\n    public getAddressAtIndexExternalP(index: number): string {\n        if (index < 0) throw new Error('Index must be >= 0');\n        return this.externalScan.getKeyForIndexP(index).getAddressString();\n    }\n}\n","import { BN, Buffer as BufferAvalanche } from '@c4tplatform/caminojs/dist';\nimport { avalanche, web3 } from '@/Network/network';\nimport { ethers } from 'ethers';\nimport { KeyPair as EVMKeyPair } from '@c4tplatform/caminojs/dist/apis/evm/keychain';\nimport { bintools } from '@/common';\nimport { computePublicKey, computeAddress } from 'ethers/lib/utils';\nimport { payments, ECPair, networks } from 'bitcoinjs-lib';\nimport { BTCNetworkType } from '@/Wallet';\nimport { buildEvmTransferErc721Tx, estimateErc721TransferGas } from '@/helpers/tx_helper';\n\nexport class EvmWalletReadonly {\n    balance = new BN(0);\n    address: string;\n    publicKey: string;\n    publicKeyBuff: Buffer;\n\n    /**\n     *\n     * @param publicKey 64 byte uncompressed public key. Starts with `0x`.\n     */\n    constructor(publicKey: string) {\n        this.publicKey = publicKey;\n        this.publicKeyBuff = Buffer.from(publicKey.substr(2), 'hex');\n        this.address = computeAddress(publicKey);\n    }\n\n    getBalance(): BN {\n        return this.balance;\n    }\n\n    getAddress(): string {\n        return ethers.utils.getAddress(this.address);\n    }\n\n    getCompressedPublicKey() {\n        return computePublicKey(this.publicKey, true);\n    }\n\n    getAddressBech32(): string {\n        const compressedKey = this.getCompressedPublicKey();\n        let addr = EVMKeyPair.addressFromPublicKey(BufferAvalanche.from(compressedKey.substring(2), 'hex'));\n        return bintools.addressToString(avalanche().getHRP(), 'C', addr);\n    }\n\n    /**\n     * Returns a native P2WPKH address with the prefix `bc1q`. This bitcoin address is\n     * derived from the same public key of the C chain address.\n     */\n    getAddressBTC(networkType: BTCNetworkType = 'bitcoin'): string {\n        let network;\n        if (networkType === 'bitcoin') {\n            network = networks.bitcoin;\n        } else if (networkType === 'testnet') {\n            network = networks.testnet;\n        } else {\n            network = networks.regtest;\n        }\n\n        const compressedBuff = Buffer.from(this.getCompressedPublicKey().substring(2), 'hex');\n        let ecPair = ECPair.fromPublicKey(compressedBuff);\n        let { address } = payments.p2wpkh({ pubkey: ecPair.publicKey, network });\n        if (!address) throw new Error('Unable to get BTC address.');\n        return address;\n    }\n\n    async updateBalance() {\n        let bal = await web3.eth.getBalance(this.address);\n        this.balance = new BN(bal);\n        return this.balance;\n    }\n\n    /**\n     * Builds an unsigned ERC721 transfer transaction from this wallet.\n     * @param contract The ERC721 Contract address\n     * @param tokenID Token ID\n     * @param to Recipient hex address.\n     * @param gasPrice Gas price in `BN`\n     * @param gasLimit Gas limit\n     */\n    buildErc721TransferTx(contract: string, tokenID: number, to: string, gasPrice: BN, gasLimit: number) {\n        return buildEvmTransferErc721Tx(this.getAddress(), to, gasPrice, gasLimit, contract, tokenID);\n    }\n\n    async estimateErc721TransferGasLimit(contract: string, to: string, tokenID: number) {\n        return estimateErc721TransferGas(contract, this.getAddress(), to, tokenID);\n    }\n}\n","import { HDWalletAbstract } from '@/Wallet/HDWalletAbstract';\nimport { UnsignedTx as EVMUnsignedTx, Tx as EVMTx } from '@c4tplatform/caminojs/dist/apis/evm';\nimport { UnsignedTx as PlatformUnsignedTx, Tx as PlatformTx } from '@c4tplatform/caminojs/dist/apis/platformvm';\nimport { UnsignedTx as AVMUnsignedTx, Tx as AVMTx } from '@c4tplatform/caminojs/dist/apis/avm';\nimport { Transaction } from '@ethereumjs/tx';\nimport { WalletNameType } from '@/Wallet/types';\nimport { EvmWallet } from '@/Wallet/EVM/EvmWallet';\nimport { EvmWalletReadonly } from '@/Wallet/EVM/EvmWalletReadonly';\nimport * as bip32 from 'bip32';\nimport { computePublicKey } from 'ethers/lib/utils';\nimport { TypedDataV1, TypedMessage } from '@metamask/eth-sig-util';\n\nexport class PublicMnemonicWallet extends HDWalletAbstract {\n    /**\n     *\n     * @param xpubAVM of derivation path m/44'/9000'/n' where `n` is the account index\n     * @param xpubEVM of derivation path m/44'/60'/0'/0/n where `n` is the account index\n     */\n    constructor(xpubAVM: string, xpubEVM: string) {\n        let avmAcct = bip32.fromBase58(xpubAVM);\n        let evmAcct = bip32.fromBase58(xpubEVM);\n        super(avmAcct);\n        this.type = 'xpub';\n        const uncompressedKey = computePublicKey(evmAcct.publicKey);\n        this.evmWallet = new EvmWalletReadonly(uncompressedKey);\n    }\n\n    evmWallet: EvmWallet | EvmWalletReadonly;\n    type: WalletNameType;\n\n    //@ts-ignore\n    signC(tx: EVMUnsignedTx): Promise<EVMTx> {\n        throw new Error('Not supported.');\n    }\n\n    //@ts-ignore\n    signEvm(tx: Transaction): Promise<Transaction> {\n        throw new Error('Not supported.');\n    }\n    //@ts-ignore\n    signP(tx: PlatformUnsignedTx): Promise<PlatformTx> {\n        throw new Error('Not supported.');\n    }\n\n    //@ts-ignore\n    signX(tx: AVMUnsignedTx): Promise<AVMTx> {\n        throw new Error('Not supported.');\n    }\n\n    //@ts-ignore\n    async personalSign(data: string): Promise<string> {\n        throw new Error('Not supported.');\n    }\n\n    /**\n     * V1 is based upon an early version of EIP-712 that lacked some later security improvements, and should generally be neglected in favor of later versions.\n     * @param data The typed data to sign.\n     * */\n    //@ts-ignore\n    signTypedData_V1(data: TypedDataV1): Promise<string> {\n        throw new Error('Not supported.');\n    }\n\n    /**\n     * V3 is based on EIP-712, except that arrays and recursive data structures are not supported.\n     * @param data The typed data to sign.\n     */\n    //@ts-ignore\n    signTypedData_V3(data: TypedMessage<any>): Promise<string> {\n        throw new Error('Not supported.');\n    }\n\n    /**\n     * V4 is based on EIP-712, and includes full support of arrays and recursive data structures.\n     * @param data The typed data to sign.\n     */\n    //@ts-ignore\n    signTypedData_V4(data: TypedMessage<any>): Promise<string> {\n        throw new Error('Not supported.');\n    }\n}\n","import * as bip32 from 'bip32';\nimport Eth from '@ledgerhq/hw-app-eth';\n// @ts-ignore\nimport AppAvax from '@obsidiansystems/hw-app-avalanche';\nimport { MIN_EVM_SUPPORT_V } from '@/Wallet/constants';\nimport { ILedgerAppConfig } from '@/Wallet/types';\n\n/**\n *\n * @param xpub Extended public key for m/44'/60'/0'\n * @param index Index of the Eth address\n * @returns Extended public key for m/44'/60'/0'/0/n where `n` is the address index\n */\nexport function getEthAddressKeyFromAccountKey(xpub: string, index: number) {\n    const node = bip32.fromBase58(xpub).derivePath(`0/${index}`);\n    return node.toBase58();\n}\n\nexport function getAppAvax(transport: any): AppAvax {\n    return new AppAvax(transport, 'w0w');\n}\n\nexport function getAppEth(transport: any): Eth {\n    return new Eth(transport, 'w0w');\n}\n\nexport async function getLedgerConfigAvax(transport: any): Promise<ILedgerAppConfig> {\n    const app = getAppAvax(transport);\n    let config = await app.getAppConfiguration();\n\n    if (!config) {\n        throw new Error(`Unable to connect ledger. You must use ledger version ${MIN_EVM_SUPPORT_V} or above.`);\n    }\n\n    return config;\n}\n","export const ERR_TransportNotSet = new Error('Transport is not set.');\nexport const ERR_ConfigNotSet = new Error('Ledger configuration is not set.');\n","//@ts-ignore\nimport Eth from '@ledgerhq/hw-app-eth';\n// @ts-ignore\nimport { Chain, Common, Hardfork } from '@ethereumjs/common';\nimport { RLP } from '@ethereumjs/rlp';\nimport { AVAX_ACCOUNT_PATH, ETH_ACCOUNT_PATH, LEDGER_EXCHANGE_TIMEOUT, MIN_EVM_SUPPORT_V } from '@/Wallet/constants';\nimport HDKey from 'hdkey';\nimport { ChainAlias, ILedgerAppConfig, WalletNameType } from '@/Wallet/types';\nimport { Transaction, TxOptions } from '@ethereumjs/tx';\nimport {\n    UnsignedTx as AVMUnsignedTx,\n    Tx as AVMTx,\n    TransferableOperation,\n    OperationTx,\n    AVMConstants,\n    ImportTx as AVMImportTx,\n    SelectCredentialClass as AVMSelectCredentialClass,\n} from '@c4tplatform/caminojs/dist/apis/avm';\nimport { Credential, SigIdx, Signature } from '@c4tplatform/caminojs/dist/common';\nimport {\n    UnsignedTx as EVMUnsignedTx,\n    Tx as EVMTx,\n    ImportTx as EVMImportTx,\n    ExportTx as EVMExportTx,\n    EVMInput,\n    SelectCredentialClass as EVMSelectCredentialClass,\n    EVMConstants,\n} from '@c4tplatform/caminojs/dist/apis/evm';\nimport {\n    UnsignedTx as PlatformUnsignedTx,\n    Tx as PlatformTx,\n    PlatformVMConstants,\n    ExportTx as PlatformExportTx,\n    ImportTx as PlatformImportTx,\n    SelectCredentialClass as PlatformSelectCredentialClass,\n} from '@c4tplatform/caminojs/dist/apis/platformvm';\nimport { activeNetwork, avalanche, web3 } from '@/Network/network';\nimport { Buffer } from '@c4tplatform/caminojs/dist';\nimport { ChainIdType } from '@/common';\nimport { Buffer as BufferNative } from 'buffer';\nimport { ParseableAvmTxEnum, ParseablePlatformEnum, ParseableEvmTxEnum } from '@/helpers/tx_helper';\nimport createHash from 'create-hash';\n//@ts-ignore\nimport bippath from 'bip32-path';\nimport { bintools } from '@/common';\nimport { idToChainAlias } from '@/Network';\nimport { getAccountPathAvalanche, getAccountPathEVM } from '@/Wallet/helpers/derivationHelper';\nimport { PublicMnemonicWallet } from '@/Wallet/PublicMnemonicWallet';\nimport { getAppAvax, getAppEth, getEthAddressKeyFromAccountKey, getLedgerConfigAvax } from '@/Wallet/Ledger/utils';\nimport Transport from '@ledgerhq/hw-transport';\nimport { ERR_ConfigNotSet, ERR_TransportNotSet } from '@/Wallet/Ledger/errors';\n\nexport class LedgerWallet extends PublicMnemonicWallet {\n    type: WalletNameType;\n    static transport: Transport | undefined;\n    static config: ILedgerAppConfig | undefined;\n    accountIndex: number;\n\n    /**\n     *\n     * @param xpubAVM of derivation path m/44'/9000'/n' where `n` is the account index\n     * @param xpubEVM of derivation path m/44'/60'/0'/0/n where `n` is the account index\n     * @param accountIndex The given xpubs must match this index\n     * @param config\n     */\n    constructor(xpubAVM: string, xpubEVM: string, accountIndex: number) {\n        super(xpubAVM, xpubEVM);\n\n        this.type = 'ledger';\n        this.accountIndex = accountIndex;\n    }\n\n    static async setTransport(transport: Transport) {\n        LedgerWallet.transport = transport;\n\n        transport.on('disconnect', () => {\n            console.log('transport disconnect');\n            LedgerWallet.transport = undefined;\n        });\n\n        // Update the config\n        const config = await getLedgerConfigAvax(transport);\n        LedgerWallet.config = config;\n    }\n    /**\n     * Create a new ledger wallet instance from the given transport\n     * @param transport\n     * @param accountIndex\n     */\n    static async fromTransport(transport: Transport, accountIndex = 0) {\n        transport.setExchangeTimeout(LEDGER_EXCHANGE_TIMEOUT);\n\n        const pubAvax = await LedgerWallet.getExtendedPublicKeyAvaxAccount(transport, accountIndex);\n        const pubEth = await LedgerWallet.getExtendedPublicKeyEthAddress(transport, accountIndex);\n\n        let config = await getLedgerConfigAvax(transport);\n\n        if (config.version < MIN_EVM_SUPPORT_V) {\n            throw new Error(`Unable to connect ledger. You must use ledger version ${MIN_EVM_SUPPORT_V} or above.`);\n        }\n        // Use this transport for all ledger instances\n        await LedgerWallet.setTransport(transport);\n        const wallet = new LedgerWallet(pubAvax, pubEth, accountIndex);\n        return wallet;\n    }\n\n    /**\n     * Returns the extended public key used by C chain for address derivation.\n     * @remarks Returns the extended public key for path `m/44'/60'/0'`. This key can be used to derive C chain addresses.\n     * @param transport\n     */\n    static async getExtendedPublicKeyEthAccount(transport: Transport): Promise<string> {\n        const ethApp = getAppEth(transport);\n        let ethRes = await ethApp.getAddress(ETH_ACCOUNT_PATH, true, true);\n        let hdEth = new HDKey();\n\n        hdEth.publicKey = BufferNative.from(ethRes.publicKey, 'hex');\n        hdEth.chainCode = BufferNative.from(ethRes.chainCode!, 'hex');\n        return hdEth.publicExtendedKey;\n    }\n\n    /**\n     * Get the extended public key for a specific C chain address.\n     * @returns The xpub of HD node m/44'/60'/0'/0/n where `n` is `accountIndex`\n     * @param transport\n     * @param accountIndex\n     */\n    static async getExtendedPublicKeyEthAddress(transport: Transport, accountIndex: number): Promise<string> {\n        const accountKey = await LedgerWallet.getExtendedPublicKeyEthAccount(transport);\n        return getEthAddressKeyFromAccountKey(accountKey, accountIndex);\n    }\n\n    /**\n     * Returns the extended public key used by X and P chains for address derivation.\n     * @remarks Returns the extended public key for path `m/44'/90000'/n'` where `n` is the account index.\n     * @param transport\n     * @param accountIndex Which account's public key to derive\n     */\n    static async getExtendedPublicKeyAvaxAccount(transport: Transport, accountIndex = 0): Promise<string> {\n        const app = getAppAvax(transport);\n\n        let res = await app.getWalletExtendedPublicKey(getAccountPathAvalanche(accountIndex));\n\n        let pubKey = res.public_key;\n        let chainCode = res.chain_code;\n\n        // Get the base58 publick key from the HDKey instance\n        let hdKey = new HDKey();\n        // @ts-ignore\n        hdKey.publicKey = pubKey;\n        // @ts-ignore\n        hdKey.chainCode = chainCode;\n\n        return hdKey.publicExtendedKey;\n    }\n\n    /**\n     * Get information about the AVAX app on the ledger device.\n     * @param transport\n     */\n    static async getAvaxConfig(transport: Transport) {\n        return getLedgerConfigAvax(transport);\n    }\n\n    async signEvm(tx: Transaction): Promise<Transaction> {\n        if (!LedgerWallet.transport) throw ERR_TransportNotSet;\n\n        const rawUnsignedTx = RLP.encode([\n            tx.nonce,\n            tx.gasPrice,\n            tx.gasLimit,\n            tx.to !== undefined ? tx.to.buf : Buffer.from([]),\n            tx.value,\n            tx.data,\n            tx.common.chainId(),\n            Buffer.from([]),\n            Buffer.from([]),\n        ]);\n\n        const ethApp = getAppEth(LedgerWallet.transport);\n        const signature = await ethApp.signTransaction(\n            getAccountPathEVM(this.accountIndex),\n            Buffer.from(rawUnsignedTx).toString('hex')\n        );\n\n        const signatureBN = {\n            v: BigInt(signature.v),\n            r: BigInt(signature.r),\n            s: BigInt(signature.s),\n        };\n\n        const chainId = await web3.eth.getChainId();\n        const networkId = await web3.eth.net.getId();\n\n        let common = Common.custom(\n            {\n                networkId,\n                chainId,\n            },\n            {\n                baseChain: Chain.Mainnet,\n                hardfork: Hardfork.Istanbul,\n            }\n        );\n\n        const chainParams: TxOptions = {\n            common,\n        };\n\n        const signedTx = Transaction.fromTxData(\n            {\n                nonce: tx.nonce,\n                gasPrice: tx.gasPrice,\n                gasLimit: tx.gasLimit,\n                to: tx.to,\n                value: tx.value,\n                data: tx.data,\n                ...signatureBN,\n            },\n            chainParams\n        );\n        return signedTx;\n    }\n\n    // Returns an array of derivation paths that need to sign this transaction\n    // Used with signTransactionHash and signTransactionParsable\n    async getTransactionPaths<UnsignedTx extends AVMUnsignedTx | PlatformUnsignedTx>(\n        unsignedTx: UnsignedTx,\n        chainId: ChainIdType\n    ): Promise<{ paths: string[]; isAvaxOnly: boolean }> {\n        let tx = unsignedTx.getTransaction();\n        let txType = tx.getTxType();\n\n        let ins = tx.getIns();\n        let operations: TransferableOperation[] = [];\n\n        // Try to get operations, it will fail if there are none, ignore and continue\n        try {\n            operations = (tx as OperationTx).getOperations();\n        } catch (e) {\n            console.log('Failed to get tx operations.');\n        }\n\n        let items = ins;\n        if (\n            (txType === AVMConstants.IMPORTTX && chainId === 'X') ||\n            (txType === PlatformVMConstants.IMPORTTX && chainId === 'P')\n        ) {\n            items = ((tx as AVMImportTx) || PlatformImportTx).getImportInputs();\n        }\n\n        let hrp = avalanche().getHRP();\n        let paths: string[] = [];\n\n        let isAvaxOnly = true;\n        // Collect paths derivation paths for source addresses\n        for (let i = 0; i < items.length; i++) {\n            let item = items[i];\n\n            let assetId = bintools.cb58Encode(item.getAssetID());\n            if (assetId !== activeNetwork.avaxID) {\n                isAvaxOnly = false;\n            }\n\n            let sigidxs: SigIdx[] = item.getInput().getSigIdxs();\n            let sources = sigidxs.map((sigidx) => sigidx.getSource());\n            let addrs: string[] = sources.map((source) => {\n                return bintools.addressToString(hrp, chainId, source);\n            });\n\n            for (let j = 0; j < addrs.length; j++) {\n                let srcAddr = addrs[j];\n                let pathStr = await this.getPathFromAddress(srcAddr); // returns change/index\n\n                paths.push(pathStr);\n            }\n        }\n\n        // Do the Same for operational inputs, if there are any...\n        for (let i = 0; i < operations.length; i++) {\n            let op = operations[i];\n            let sigidxs: SigIdx[] = op.getOperation().getSigIdxs();\n            let sources = sigidxs.map((sigidx) => sigidx.getSource());\n            let addrs: string[] = sources.map((source) => {\n                return bintools.addressToString(hrp, chainId, source);\n            });\n\n            for (let j = 0; j < addrs.length; j++) {\n                let srcAddr = addrs[j];\n                let pathStr = await this.getPathFromAddress(srcAddr); // returns change/index\n\n                paths.push(pathStr);\n            }\n        }\n\n        return { paths, isAvaxOnly };\n    }\n\n    async getPathFromAddress(address: string) {\n        let externalAddrs = await this.externalScan.getAllAddresses();\n        let internalAddrs = await this.internalScan.getAllAddresses();\n        let platformAddrs = await this.externalScan.getAllAddresses('P');\n\n        let extIndex = externalAddrs.indexOf(address);\n        let intIndex = internalAddrs.indexOf(address);\n        let platformIndex = platformAddrs.indexOf(address);\n\n        if (extIndex >= 0) {\n            return `0/${extIndex}`;\n        } else if (intIndex >= 0) {\n            return `1/${intIndex}`;\n        } else if (platformIndex >= 0) {\n            return `0/${platformIndex}`;\n        } else if (address[0] === 'C') {\n            return '0/0';\n        } else {\n            throw new Error('Unable to find source address.');\n        }\n    }\n\n    async signX(unsignedTx: AVMUnsignedTx): Promise<AVMTx> {\n        let tx = unsignedTx.getTransaction();\n        let txType = tx.getTxType();\n        let chainId: ChainIdType = 'X';\n\n        let parseableTxs = ParseableAvmTxEnum;\n        let { paths, isAvaxOnly } = await this.getTransactionPaths<AVMUnsignedTx>(unsignedTx, chainId);\n\n        if (!LedgerWallet.config) throw ERR_ConfigNotSet;\n\n        // If ledger doesnt support parsing, sign hash\n        let canLedgerParse = LedgerWallet.config.version >= '0.3.1';\n        let isParsableType = txType in parseableTxs && isAvaxOnly;\n\n        let signedTx;\n        if (canLedgerParse && isParsableType) {\n            signedTx = await this.signTransactionParsable<AVMUnsignedTx, AVMTx>(unsignedTx, paths, chainId);\n        } else {\n            signedTx = await this.signTransactionHash<AVMUnsignedTx, AVMTx>(unsignedTx, paths, chainId);\n        }\n\n        return signedTx;\n    }\n\n    getChangePath(chainId?: ChainAlias): string {\n        switch (chainId) {\n            case 'P':\n                return 'm/0';\n            case 'X':\n            default:\n                return 'm/1';\n        }\n    }\n\n    getChangeIndex(chainId?: ChainAlias): number {\n        switch (chainId) {\n            case 'P':\n                // return this.platformHelper.hdIndex\n                return this.externalScan.getIndex();\n            case 'X':\n            default:\n                // return this.internalHelper.hdIndex\n                return this.internalScan.getIndex();\n        }\n    }\n\n    getChangeBipPath<UnsignedTx extends AVMUnsignedTx | PlatformUnsignedTx | EVMUnsignedTx>(\n        unsignedTx: UnsignedTx,\n        chainId: ChainIdType\n    ) {\n        if (chainId === 'C') {\n            return null;\n        }\n\n        let tx = unsignedTx.getTransaction();\n        let txType = tx.getTxType();\n\n        const chainChangePath = this.getChangePath(chainId).split('m/')[1];\n        let changeIdx = this.getChangeIndex(chainId);\n        // If change and destination paths are the same\n        // it can cause ledger to not display the destination amt.\n        // Since platform helper does not have internal/external\n        // path for change (it uses the external index)\n        // there will be address collisions. So return null.\n        if (\n            txType === PlatformVMConstants.IMPORTTX ||\n            txType === PlatformVMConstants.EXPORTTX ||\n            txType === PlatformVMConstants.ADDVALIDATORTX ||\n            txType === PlatformVMConstants.ADDDELEGATORTX\n        ) {\n            return null;\n        }\n\n        return bippath.fromString(`${AVAX_ACCOUNT_PATH}/${chainChangePath}/${changeIdx}`);\n    }\n\n    // Used for signing transactions that are parsable\n    async signTransactionParsable<\n        UnsignedTx extends AVMUnsignedTx | PlatformUnsignedTx | EVMUnsignedTx,\n        SignedTx extends AVMTx | PlatformTx | EVMTx\n    >(unsignedTx: UnsignedTx, paths: string[], chainId: ChainIdType): Promise<SignedTx> {\n        // There must be an active transport connection\n        if (!LedgerWallet.transport) throw ERR_TransportNotSet;\n        let tx = unsignedTx.getTransaction();\n        let txType = tx.getTxType();\n        let parseableTxs = {\n            X: ParseableAvmTxEnum,\n            P: ParseablePlatformEnum,\n            C: ParseableEvmTxEnum,\n        }[chainId];\n\n        let bip32Paths = this.pathsToUniqueBipPaths(paths);\n\n        const appAvax = getAppAvax(LedgerWallet.transport);\n        const accountPath =\n            chainId === 'C'\n                ? bippath.fromString(`${ETH_ACCOUNT_PATH}`)\n                : bippath.fromString(getAccountPathAvalanche(this.accountIndex));\n        let txbuff = unsignedTx.toBuffer();\n        let changePath = this.getChangeBipPath(unsignedTx, chainId);\n\n        let ledgerSignedTx = await appAvax.signTransaction(accountPath, bip32Paths, txbuff, changePath);\n\n        let sigMap = ledgerSignedTx.signatures;\n        let creds = this.getCredentials<UnsignedTx>(unsignedTx, paths, sigMap, chainId);\n\n        let signedTx;\n        switch (chainId) {\n            case 'X':\n                signedTx = new AVMTx(unsignedTx as AVMUnsignedTx, creds);\n                break;\n            case 'P':\n                signedTx = new PlatformTx(unsignedTx as PlatformUnsignedTx, creds);\n                break;\n            case 'C':\n                signedTx = new EVMTx(unsignedTx as EVMUnsignedTx, creds);\n                break;\n        }\n\n        return signedTx as SignedTx;\n    }\n\n    /**\n     *\n     * @param accountPath `m/44'/9000'/0'` For X/P Chains, `m/44'/60'/0'` for C Chain\n     * @param bip32Paths an array of paths to sign with `['0/0','0/1'..]`\n     * @param hash A buffer of the hash to sign\n     * @remarks Never sign untrusted hashes. This can lead to loss of funds.\n     */\n    async signHash(accountPath: any, bip32Paths: any, hash: Buffer): Promise<Map<string, Buffer>> {\n        if (!LedgerWallet.transport) throw ERR_TransportNotSet;\n        const appAvax = getAppAvax(LedgerWallet.transport);\n        return await appAvax.signHash(accountPath, bip32Paths, hash);\n    }\n    // Used for non parsable transactions.\n    // Ideally we wont use this function at all, but ledger is not ready yet.\n    async signTransactionHash<\n        UnsignedTx extends AVMUnsignedTx | PlatformUnsignedTx | EVMUnsignedTx,\n        SignedTx extends AVMTx | PlatformTx | EVMTx\n    >(unsignedTx: UnsignedTx, paths: string[], chainId: ChainIdType): Promise<SignedTx> {\n        if (!LedgerWallet.transport) throw ERR_TransportNotSet;\n        let txbuff = unsignedTx.toBuffer();\n        const msg: Buffer = Buffer.from(createHash('sha256').update(txbuff).digest());\n\n        let bip32Paths = this.pathsToUniqueBipPaths(paths);\n\n        const appAvax = getAppAvax(LedgerWallet.transport);\n        // Sign the msg with ledger\n        //TODO: Update when ledger supports Accounts\n        const accountPathSource = chainId === 'C' ? ETH_ACCOUNT_PATH : getAccountPathAvalanche(this.accountIndex);\n        const accountPath = bippath.fromString(accountPathSource);\n        let sigMap = await appAvax.signHash(accountPath, bip32Paths, msg);\n\n        let creds: Credential[] = this.getCredentials<UnsignedTx>(unsignedTx, paths, sigMap, chainId);\n\n        let signedTx;\n        switch (chainId) {\n            case 'X':\n                signedTx = new AVMTx(unsignedTx as AVMUnsignedTx, creds);\n                break;\n            case 'P':\n                signedTx = new PlatformTx(unsignedTx as PlatformUnsignedTx, creds);\n                break;\n            case 'C':\n                signedTx = new EVMTx(unsignedTx as EVMUnsignedTx, creds);\n                break;\n        }\n\n        return signedTx as SignedTx;\n    }\n\n    pathsToUniqueBipPaths(paths: string[]) {\n        let uniquePaths = paths.filter((val: any, i: number) => {\n            return paths.indexOf(val) === i;\n        });\n\n        let bip32Paths = uniquePaths.map((path) => {\n            return bippath.fromString(path, false);\n        });\n\n        return bip32Paths;\n    }\n\n    getCredentials<UnsignedTx extends AVMUnsignedTx | PlatformUnsignedTx | EVMUnsignedTx>(\n        unsignedTx: UnsignedTx,\n        paths: string[],\n        sigMap: any,\n        chainId: ChainIdType\n    ): Credential[] {\n        let creds: Credential[] = [];\n        let tx = unsignedTx.getTransaction();\n        let txType = tx.getTxType();\n\n        // @ts-ignore\n        let ins = tx.getIns ? tx.getIns() : [];\n        let operations: TransferableOperation[] = [];\n        let evmInputs: EVMInput[] = [];\n\n        let items = ins;\n        if (\n            (txType === AVMConstants.IMPORTTX && chainId === 'X') ||\n            (txType === PlatformVMConstants.IMPORTTX && chainId === 'P') ||\n            (txType === EVMConstants.IMPORTTX && chainId === 'C')\n        ) {\n            items = ((tx as AVMImportTx) || PlatformImportTx || EVMImportTx).getImportInputs();\n        }\n\n        // Try to get operations, it will fail if there are none, ignore and continue\n        try {\n            operations = (tx as OperationTx).getOperations();\n        } catch (e) {\n            console.log('Failed to get tx operations.');\n        }\n\n        let CredentialClass;\n        if (chainId === 'X') {\n            CredentialClass = AVMSelectCredentialClass;\n        } else if (chainId === 'P') {\n            CredentialClass = PlatformSelectCredentialClass;\n        } else {\n            CredentialClass = EVMSelectCredentialClass;\n        }\n\n        // Try to get evm inputs, it will fail if there are none, ignore and continue\n        try {\n            evmInputs = (tx as EVMExportTx).getInputs();\n        } catch (e) {\n            console.log('Failed to get EVM inputs.');\n        }\n\n        for (let i = 0; i < items.length; i++) {\n            const sigidxs: SigIdx[] = items[i].getInput().getSigIdxs();\n            const cred: Credential = CredentialClass(items[i].getInput().getCredentialID());\n\n            for (let j = 0; j < sigidxs.length; j++) {\n                let pathIndex = i + j;\n                let pathStr = paths[pathIndex];\n\n                let sigRaw = sigMap.get(pathStr);\n                let sigBuff = Buffer.from(sigRaw);\n                const sig: Signature = new Signature();\n                sig.fromBuffer(sigBuff);\n                cred.addSignature(sig);\n            }\n            creds.push(cred);\n        }\n\n        for (let i = 0; i < operations.length; i++) {\n            let op = operations[i].getOperation();\n            const sigidxs: SigIdx[] = op.getSigIdxs();\n            const cred: Credential = CredentialClass(op.getCredentialID());\n\n            for (let j = 0; j < sigidxs.length; j++) {\n                let pathIndex = items.length + i + j;\n                let pathStr = paths[pathIndex];\n\n                let sigRaw = sigMap.get(pathStr);\n                let sigBuff = Buffer.from(sigRaw);\n                const sig: Signature = new Signature();\n                sig.fromBuffer(sigBuff);\n                cred.addSignature(sig);\n            }\n            creds.push(cred);\n        }\n\n        for (let i = 0; i < evmInputs.length; i++) {\n            let evmInput = evmInputs[i];\n            const sigidxs: SigIdx[] = evmInput.getSigIdxs();\n            const cred: Credential = CredentialClass(evmInput.getCredentialID());\n\n            for (let j = 0; j < sigidxs.length; j++) {\n                let pathIndex = items.length + i + j;\n                let pathStr = paths[pathIndex];\n\n                let sigRaw = sigMap.get(pathStr);\n                let sigBuff = Buffer.from(sigRaw);\n                const sig: Signature = new Signature();\n                sig.fromBuffer(sigBuff);\n                cred.addSignature(sig);\n            }\n            creds.push(cred);\n        }\n\n        return creds;\n    }\n\n    async signP(unsignedTx: PlatformUnsignedTx): Promise<PlatformTx> {\n        if (!LedgerWallet.transport) throw ERR_TransportNotSet;\n\n        let tx = unsignedTx.getTransaction();\n        let txType = tx.getTxType();\n        let chainId: ChainIdType = 'P';\n        let parseableTxs = ParseablePlatformEnum;\n\n        let { paths, isAvaxOnly } = await this.getTransactionPaths<PlatformUnsignedTx>(unsignedTx, chainId);\n\n        if (!LedgerWallet.config) throw ERR_ConfigNotSet;\n\n        // If ledger doesnt support parsing, sign hash\n        let canLedgerParse = LedgerWallet.config.version >= '0.3.1';\n        let isParsableType = txType in parseableTxs && isAvaxOnly;\n\n        // TODO: Remove after ledger is fixed\n        // If UTXOS contain lockedStakeable funds always use sign hash\n        let txIns = unsignedTx.getTransaction().getIns();\n        for (let i = 0; i < txIns.length; i++) {\n            let typeID = txIns[i].getInput().getTypeID();\n            if (typeID === PlatformVMConstants.STAKEABLELOCKINID) {\n                canLedgerParse = false;\n                break;\n            }\n        }\n\n        // TODO: Remove after ledger update\n        // Ledger is not able to parse P/C atomic transactions\n        if (txType === PlatformVMConstants.EXPORTTX) {\n            const destChainBuff = (tx as PlatformExportTx).getDestinationChain();\n            // If destination chain is C chain, sign hash\n            const destChain = idToChainAlias(bintools.cb58Encode(destChainBuff));\n            if (destChain === 'C') {\n                canLedgerParse = false;\n            }\n        }\n        // TODO: Remove after ledger update\n        // Ledger is not able to parse P/C atomic transactions\n        if (txType === PlatformVMConstants.IMPORTTX) {\n            const sourceChainBuff = (tx as PlatformImportTx).getSourceChain();\n            // If destination chain is C chain, sign hash\n            const sourceChain = idToChainAlias(bintools.cb58Encode(sourceChainBuff));\n            if (sourceChain === 'C') {\n                canLedgerParse = false;\n            }\n        }\n\n        let signedTx;\n        if (canLedgerParse && isParsableType) {\n            signedTx = await this.signTransactionParsable<PlatformUnsignedTx, PlatformTx>(unsignedTx, paths, chainId);\n        } else {\n            signedTx = await this.signTransactionHash<PlatformUnsignedTx, PlatformTx>(unsignedTx, paths, chainId);\n        }\n        return signedTx;\n    }\n\n    async signC(unsignedTx: EVMUnsignedTx): Promise<EVMTx> {\n        // TODO: Might need to upgrade paths array to:\n        //  paths = Array(utxoSet.getAllUTXOs().length).fill('0/0'),\n        let tx = unsignedTx.getTransaction();\n        let typeId = tx.getTxType();\n\n        let paths = [`0/${this.accountIndex}`];\n        if (typeId === EVMConstants.EXPORTTX) {\n            let ins = (tx as EVMExportTx).getInputs();\n            paths = ins.map(() => `0/${this.accountIndex}`);\n        } else if (typeId === EVMConstants.IMPORTTX) {\n            let ins = (tx as EVMImportTx).getImportInputs();\n            paths = ins.map(() => `0/${this.accountIndex}`);\n        }\n\n        let canLedgerParse = true;\n\n        // TODO: Remove after ledger update\n        // Ledger is not able to parse P/C atomic transactions\n        if (typeId === EVMConstants.EXPORTTX) {\n            const destChainBuff = (tx as EVMExportTx).getDestinationChain();\n            // If destination chain is C chain, sign hash\n            const destChain = idToChainAlias(bintools.cb58Encode(destChainBuff));\n            if (destChain === 'P') {\n                canLedgerParse = false;\n            }\n        }\n        // TODO: Remove after ledger update\n        if (typeId === EVMConstants.IMPORTTX) {\n            const sourceChainBuff = (tx as EVMImportTx).getSourceChain();\n            // If destination chain is C chain, sign hash\n            const sourceChain = idToChainAlias(bintools.cb58Encode(sourceChainBuff));\n            if (sourceChain === 'P') {\n                canLedgerParse = false;\n            }\n        }\n\n        let txSigned;\n        if (canLedgerParse) {\n            txSigned = (await this.signTransactionParsable(unsignedTx, paths, 'C')) as EVMTx;\n        } else {\n            txSigned = (await this.signTransactionHash(unsignedTx, paths, 'C')) as EVMTx;\n        }\n\n        return txSigned;\n    }\n\n    // /**\n    //  * This function is equivalent to the eth_sign Ethereum JSON-RPC method as specified in EIP-1417,\n    //  * as well as the MetaMask's personal_sign method.\n    //  * @param data The hex data to sign\n    //  */\n    // async personalSign(data: string): Promise<string> {\n    //     throw new Error('Not implemented.');\n    // const ethApp = getAppEth(LedgerWallet.transport);\n    // const path = getAccountPathEVM(this.accountIndex).substr(2);\n    // const result = await ethApp.signPersonalMessage(path, data.substr(2));\n    //\n    // let v = result['v'] - 27;\n    // let vStr = v.toString(16);\n    // if (vStr.length < 2) {\n    //     vStr = '0' + v;\n    // }\n    // const sig = `0x${result['r'] + result['s'] + vStr}`;\n    // return sig;\n    // }\n}\n","import { Buffer as BufferAvalanche } from '@c4tplatform/caminojs/dist';\nimport { FeeMarketEIP1559Transaction, Transaction } from '@ethereumjs/tx';\nimport { avalanche } from '@/Network/network';\nimport {\n    KeyChain as EVMKeyChain,\n    KeyPair as EVMKeyPair,\n    Tx as EVMTx,\n    UnsignedTx as EVMUnsignedTx,\n} from '@c4tplatform/caminojs/dist/apis/evm';\nimport { EvmWalletReadonly } from '@/Wallet/EVM/EvmWalletReadonly';\nimport { bintools } from '@/common';\nimport { computePublicKey } from 'ethers/lib/utils';\nimport {\n    MessageTypes,\n    personalSign,\n    signTypedData,\n    SignTypedDataVersion,\n    TypedDataV1,\n    TypedMessage,\n} from '@metamask/eth-sig-util';\nimport * as bitcoin from 'bitcoinjs-lib';\nexport class EvmWallet extends EvmWalletReadonly {\n    private privateKey: Buffer;\n    private btcPair: bitcoin.ECPairInterface;\n\n    constructor(key: Buffer) {\n        // Compute the uncompressed public key from private key\n        let pubKey = computePublicKey(key);\n\n        super(pubKey);\n\n        this.btcPair = bitcoin.ECPair.fromPrivateKey(key);\n        this.privateKey = key;\n    }\n\n    static fromPrivateKey(key: string) {\n        return new EvmWallet(Buffer.from(key, 'hex'));\n    }\n\n    private getPrivateKeyBech(): string {\n        return `PrivateKey-` + bintools.cb58Encode(BufferAvalanche.from(this.privateKey));\n    }\n\n    getKeyChain(): EVMKeyChain {\n        let keychain = new EVMKeyChain(avalanche().getHRP(), 'C');\n        keychain.importKey(this.getPrivateKeyBech());\n        return keychain;\n    }\n\n    getKeyPair(): EVMKeyPair {\n        let keychain = new EVMKeyChain(avalanche().getHRP(), 'C');\n        return keychain.importKey(this.getPrivateKeyBech());\n    }\n\n    signEVM(tx: Transaction | FeeMarketEIP1559Transaction) {\n        return tx.sign(this.privateKey);\n    }\n\n    signBTCHash(hash: Buffer) {\n        return this.btcPair.sign(hash);\n    }\n\n    signC(tx: EVMUnsignedTx): EVMTx {\n        return tx.sign(this.getKeyChain());\n    }\n\n    getPrivateKeyHex(): string {\n        return this.privateKey.toString('hex');\n    }\n\n    /**\n     * This function is equivalent to the eth_sign Ethereum JSON-RPC method as specified in EIP-1417,\n     * as well as the MetaMask's personal_sign method.\n     * @param data The hex data to sign. Must start with `0x`.\n     */\n    personalSign(data: string) {\n        return personalSign({ privateKey: this.privateKey, data });\n    }\n\n    /**\n     * Sign typed data according to EIP-712. The signing differs based upon the version.\n     * V1 is based upon an early version of EIP-712 that lacked some later security improvements, and should generally be neglected in favor of later versions.\n     * V3 is based on EIP-712, except that arrays and recursive data structures are not supported.\n     * V4 is based on EIP-712, and includes full support of arrays and recursive data structures.\n     * @param data The typed data to sign.\n     * @param version The signing version to use.\n     */\n    signTypedData<V extends SignTypedDataVersion, T extends MessageTypes>(\n        data: V extends 'V1' ? TypedDataV1 : TypedMessage<T>,\n        version: V\n    ) {\n        return signTypedData({\n            privateKey: this.privateKey,\n            data,\n            version,\n        });\n    }\n\n    /**\n     * V1 is based upon an early version of EIP-712 that lacked some later security improvements, and should generally be neglected in favor of later versions.\n     * @param data The typed data to sign.\n     * */\n    signTypedData_V1(data: TypedDataV1) {\n        return this.signTypedData(data, SignTypedDataVersion.V1);\n    }\n\n    /**\n     * V3 is based on EIP-712, except that arrays and recursive data structures are not supported.\n     * @param data The typed data to sign.\n     */\n    signTypedData_V3(data: TypedMessage<any>) {\n        return this.signTypedData(data, SignTypedDataVersion.V3);\n    }\n\n    /**\n     * V4 is based on EIP-712, and includes full support of arrays and recursive data structures.\n     * @param data The typed data to sign.\n     */\n    signTypedData_V4(data: TypedMessage<any>) {\n        return this.signTypedData(data, SignTypedDataVersion.V4);\n    }\n}\n","import * as bip39 from 'bip39';\nimport * as bip32 from 'bip32';\nimport { EvmWallet } from './EVM/EvmWallet';\nimport { UnsafeWallet, WalletNameType } from './types';\nimport { Buffer } from '@c4tplatform/caminojs/dist';\nimport { FeeMarketEIP1559Transaction, Transaction } from '@ethereumjs/tx';\nimport { Tx as AVMTx, UnsignedTx as AVMUnsignedTx } from '@c4tplatform/caminojs/dist/apis/avm';\nimport { Tx as PlatformTx, UnsignedTx as PlatformUnsignedTx } from '@c4tplatform/caminojs/dist/apis/platformvm';\nimport { KeyPair as AVMKeyPair, KeyChain as AVMKeyChain } from '@c4tplatform/caminojs/dist/apis/avm/keychain';\nimport { KeyChain as PlatformKeyChain } from '@c4tplatform/caminojs/dist/apis/platformvm';\nimport { UnsignedTx as EVMUnsignedTx, Tx as EVMTx, KeyPair as EVMKeyPair } from '@c4tplatform/caminojs/dist/apis/evm';\nimport { CypherAES, digestMessage } from '@/utils';\nimport { HDWalletAbstract } from '@/Wallet/HDWalletAbstract';\nimport { bintools } from '@/common';\nimport { getAccountPathAvalanche, getAccountPathEVM } from '@/Wallet/helpers/derivationHelper';\nimport { TypedDataV1, TypedMessage } from '@metamask/eth-sig-util';\n\n//TODO: Should extend public mnemonic wallet\nexport class MnemonicWallet extends HDWalletAbstract implements UnsafeWallet {\n    evmWallet: EvmWallet;\n    type: WalletNameType;\n    private mnemonicCypher: CypherAES;\n    accountIndex: number;\n\n    private ethAccountKey: bip32.BIP32Interface;\n\n    constructor(mnemonic: string, account = 0) {\n        let seed: globalThis.Buffer = bip39.mnemonicToSeedSync(mnemonic);\n\n        let masterHdKey = bip32.fromSeed(seed);\n        let accountKey = masterHdKey.derivePath(getAccountPathAvalanche(account));\n\n        super(accountKey);\n\n        this.type = 'mnemonic';\n        if (!bip39.validateMnemonic(mnemonic)) {\n            throw new Error('Invalid mnemonic phrase.');\n        }\n\n        let ethAccountKey = masterHdKey.derivePath(getAccountPathEVM(account));\n        this.ethAccountKey = ethAccountKey;\n        let ethKey = ethAccountKey.privateKey;\n        let evmWallet = new EvmWallet(ethKey!);\n\n        this.accountIndex = account;\n        this.mnemonicCypher = new CypherAES(mnemonic);\n        this.evmWallet = evmWallet;\n    }\n\n    /**\n     * Returns the derived private key used by the EVM wallet.\n     */\n    public getEvmPrivateKeyHex(): string {\n        return this.evmWallet.getPrivateKeyHex();\n    }\n\n    /**\n     * Return the mnemonic phrase for this wallet.\n     */\n    public getMnemonic(): string {\n        return this.mnemonicCypher.getValue();\n    }\n\n    /**\n     * Generates a 24 word mnemonic phrase and initializes a wallet instance with it.\n     * @return Returns the initialized wallet.\n     */\n    static create(): MnemonicWallet {\n        const mnemonic = bip39.generateMnemonic(256);\n        return MnemonicWallet.fromMnemonic(mnemonic);\n    }\n\n    /**\n     * Returns a new 24 word mnemonic key phrase.\n     */\n    static generateMnemonicPhrase(): string {\n        return bip39.generateMnemonic(256);\n    }\n\n    /**\n     * Returns a new instance of a Mnemonic wallet from the given key phrase.\n     * @param mnemonic The 24 word mnemonic phrase of the wallet\n     */\n    static fromMnemonic(mnemonic: string): MnemonicWallet {\n        return new MnemonicWallet(mnemonic);\n    }\n\n    /**\n     * Validates the given string is a valid mnemonic.\n     * @param mnemonic\n     */\n    static validateMnemonic(mnemonic: string): boolean {\n        return bip39.validateMnemonic(mnemonic);\n    }\n\n    /**\n     * Signs an EVM transaction on the C chain.\n     * @param tx The unsigned transaction\n     */\n    async signEvm(tx: Transaction | FeeMarketEIP1559Transaction): Promise<Transaction | FeeMarketEIP1559Transaction> {\n        return this.evmWallet.signEVM(tx);\n    }\n\n    /**\n     * Signs an AVM transaction.\n     * @param tx The unsigned transaction\n     */\n    async signX(tx: AVMUnsignedTx): Promise<AVMTx> {\n        return tx.sign(this.getKeyChainX());\n    }\n\n    /**\n     * Signs a PlatformVM transaction.\n     * @param tx The unsigned transaction\n     */\n    async signP(tx: PlatformUnsignedTx): Promise<PlatformTx> {\n        return tx.sign(this.getKeyChainP());\n    }\n\n    /**\n     * Signs a C chain transaction\n     * @remarks\n     * Used for Import and Export transactions on the C chain. For everything else, use `this.signEvm()`\n     * @param tx The unsigned transaction\n     */\n    async signC(tx: EVMUnsignedTx): Promise<EVMTx> {\n        return this.evmWallet.signC(tx);\n    }\n\n    /**\n     * Returns a keychain with the keys of every derived X chain address.\n     * @private\n     */\n    private getKeyChainX(): AVMKeyChain {\n        let internal = this.internalScan.getKeyChainX();\n        let external = this.externalScan.getKeyChainX();\n        return internal.union(external);\n    }\n\n    /**\n     * Returns a keychain with the keys of every derived P chain address.\n     * @private\n     */\n    private getKeyChainP(): PlatformKeyChain {\n        return this.externalScan.getKeyChainP();\n    }\n\n    // TODO: Support internal address as well\n    signMessage(msgStr: string, index: number): string {\n        let key = this.externalScan.getKeyForIndexX(index) as AVMKeyPair;\n        let digest = digestMessage(msgStr);\n\n        // Convert to the other Buffer and sign\n        let digestHex = digest.toString('hex');\n        let digestBuff = Buffer.from(digestHex, 'hex');\n        let signed = key.sign(digestBuff);\n\n        return bintools.cb58Encode(signed);\n    }\n\n    /**\n     * This function is equivalent to the eth_sign Ethereum JSON-RPC method as specified in EIP-1417,\n     * as well as the MetaMask's personal_sign method.\n     * @remarks Signs using the C chain address.\n     * @param data The hex data to sign\n     */\n    async personalSign(data: string): Promise<string> {\n        return this.evmWallet.personalSign(data);\n    }\n\n    /**\n     * V1 is based upon an early version of EIP-712 that lacked some later security improvements, and should generally be neglected in favor of later versions.\n     * @param data The typed data to sign.\n     * */\n    async signTypedData_V1(data: TypedDataV1): Promise<string> {\n        return this.evmWallet.signTypedData_V1(data);\n    }\n\n    /**\n     * V3 is based on EIP-712, except that arrays and recursive data structures are not supported.\n     * @param data The typed data to sign.\n     */\n    async signTypedData_V3(data: TypedMessage<any>): Promise<string> {\n        return this.evmWallet.signTypedData_V3(data);\n    }\n\n    /**\n     * V4 is based on EIP-712, and includes full support of arrays and recursive data structures.\n     * @param data The typed data to sign.\n     */\n    async signTypedData_V4(data: TypedMessage<any>): Promise<string> {\n        return this.evmWallet.signTypedData_V4(data);\n    }\n}\n","import { WalletProvider } from '@/Wallet/Wallet';\nimport { UnsafeWallet, WalletNameType } from '@/Wallet/types';\n\nimport { KeyChain as AVMKeyChain, UnsignedTx as AVMUnsignedTx, Tx as AVMTx } from '@c4tplatform/caminojs/dist/apis/avm';\nimport {\n    KeyChain as PlatformKeyChain,\n    UnsignedTx as PlatformUnsignedTx,\n    Tx as PlatformTx,\n} from '@c4tplatform/caminojs/dist/apis/platformvm';\nimport { avalanche } from '@/Network/network';\nimport { Buffer as BufferAvalanche } from '@c4tplatform/caminojs/dist';\nimport { EvmWallet } from '@/Wallet/EVM/EvmWallet';\nimport { UnsignedTx, Tx } from '@c4tplatform/caminojs/dist/apis/evm';\nimport { FeeMarketEIP1559Transaction, Transaction } from '@ethereumjs/tx';\nimport { bintools } from '@/common';\nimport { TypedDataV1, TypedMessage } from '@metamask/eth-sig-util';\n\nexport class SingletonWallet extends WalletProvider implements UnsafeWallet {\n    type: WalletNameType = 'singleton';\n    key = '';\n    keyBuff: BufferAvalanche;\n    evmWallet: EvmWallet;\n\n    /**\n     *\n     * @param privateKey An avalanche private key, starts with `PrivateKey-`\n     */\n    constructor(privateKey: string) {\n        super();\n\n        this.key = privateKey;\n\n        // Derive EVM key and address\n        let pkBuf = bintools.cb58Decode(privateKey.split('-')[1]);\n        this.keyBuff = pkBuf;\n\n        let pkHex = pkBuf.toString('hex');\n        let pkBuffNative = Buffer.from(pkHex, 'hex');\n\n        this.evmWallet = new EvmWallet(pkBuffNative);\n    }\n\n    static fromPrivateKey(key: string): SingletonWallet {\n        return new SingletonWallet(key);\n    }\n\n    static fromEvmKey(key: string): SingletonWallet {\n        let keyBuff = bintools.cb58Encode(BufferAvalanche.from(key, 'hex'));\n        let avmKeyStr = `PrivateKey-${keyBuff}`;\n        return new SingletonWallet(avmKeyStr);\n    }\n\n    private getKeyChainX(): AVMKeyChain {\n        let keyChain = avalanche().XChain().newKeyChain();\n        keyChain.importKey(this.key);\n        return keyChain;\n    }\n\n    private getKeyChainP(): PlatformKeyChain {\n        let keyChain = avalanche().PChain().newKeyChain();\n        keyChain.importKey(this.key);\n        return keyChain;\n    }\n\n    /**\n     * Returns the derived private key used by the EVM wallet.\n     */\n    public getEvmPrivateKeyHex(): string {\n        return this.evmWallet.getPrivateKeyHex();\n    }\n\n    getAddressP(): string {\n        let keyChain = this.getKeyChainP();\n        return keyChain.getAddressStrings()[0];\n    }\n\n    getAddressX(): string {\n        let keyChain = this.getKeyChainX();\n        return keyChain.getAddressStrings()[0];\n    }\n\n    async getAllAddressesP(): Promise<string[]> {\n        return [this.getAddressP()];\n    }\n\n    getAllAddressesPSync(): string[] {\n        return [this.getAddressP()];\n    }\n\n    async getAllAddressesX(): Promise<string[]> {\n        return [this.getAddressX()];\n    }\n\n    getAllAddressesXSync(): string[] {\n        return [this.getAddressX()];\n    }\n\n    getChangeAddressX(): string {\n        return this.getAddressX();\n    }\n\n    async getExternalAddressesP(): Promise<string[]> {\n        return [this.getAddressP()];\n    }\n\n    getExternalAddressesPSync(): string[] {\n        return [this.getAddressP()];\n    }\n\n    async getExternalAddressesX(): Promise<string[]> {\n        return [this.getAddressX()];\n    }\n\n    getExternalAddressesXSync(): string[] {\n        return [this.getAddressX()];\n    }\n\n    async getInternalAddressesX(): Promise<string[]> {\n        return [this.getAddressX()];\n    }\n\n    getInternalAddressesXSync(): string[] {\n        return [this.getAddressX()];\n    }\n\n    async signC(tx: UnsignedTx): Promise<Tx> {\n        return this.evmWallet.signC(tx);\n    }\n\n    async signEvm(tx: Transaction | FeeMarketEIP1559Transaction): Promise<Transaction | FeeMarketEIP1559Transaction> {\n        return this.evmWallet.signEVM(tx);\n    }\n\n    async signP(tx: PlatformUnsignedTx): Promise<PlatformTx> {\n        return tx.sign(this.getKeyChainP());\n    }\n\n    async signX(tx: AVMUnsignedTx): Promise<AVMTx> {\n        return tx.sign(this.getKeyChainX());\n    }\n\n    /**\n     * This function is equivalent to the eth_sign Ethereum JSON-RPC method as specified in EIP-1417,\n     * as well as the MetaMask's personal_sign method.\n     * @param data The hex data to sign\n     */\n    async personalSign(data: string): Promise<string> {\n        return this.evmWallet.personalSign(data);\n    }\n\n    /**\n     * V1 is based upon an early version of EIP-712 that lacked some later security improvements, and should generally be neglected in favor of later versions.\n     * @param data The typed data to sign.\n     * */\n    async signTypedData_V1(data: TypedDataV1): Promise<string> {\n        return this.evmWallet.signTypedData_V1(data);\n    }\n\n    /**\n     * V3 is based on EIP-712, except that arrays and recursive data structures are not supported.\n     * @param data The typed data to sign.\n     */\n    async signTypedData_V3(data: TypedMessage<any>): Promise<string> {\n        return this.evmWallet.signTypedData_V3(data);\n    }\n\n    /**\n     * V4 is based on EIP-712, and includes full support of arrays and recursive data structures.\n     * @param data The typed data to sign.\n     */\n    async signTypedData_V4(data: TypedMessage<any>): Promise<string> {\n        return this.evmWallet.signTypedData_V4(data);\n    }\n}\n","export const stakingHeaders = [\n    'Tx ID',\n    'Tx Date',\n    'Type',\n    'Node ID',\n    'Stake Amount',\n    'Stake Start',\n    'Reward Date (Stake End)',\n    'Is Rewarded',\n    'Reward Amount',\n];\n\nexport const normalHeaders = ['Tx ID', 'Timestamp', 'Type', 'Token Symbol', 'Amount', 'Addresses', 'Chain'];\n","export function createCSVContent(rows: string[][]) {\n    let csvContent = '';\n    rows.forEach(function (arr) {\n        let row = arr.join(',');\n        csvContent += row + '\\r\\n';\n    });\n    return csvContent;\n}\n","import { HistoryItemType, iHistoryStaking, isHistoryStakingTx } from '@/History';\nimport { bnToBigAvaxP } from '@/utils';\nimport moment from 'moment';\nimport { createCSVContent } from '@/Csv/createCsvContent';\nimport { stakingHeaders } from '@/Csv/constants';\n\n/**\n * Given an array of history transactions, filter the staking txs and returns the body of a csv file.\n * @remarks You can download the returned string as a CSV file.\n * @param txs An array of transactions made by a wallet.\n */\nexport function createCsvStaking(txs: HistoryItemType[]) {\n    // Filter only staking transactions\n    const filtered = txs.filter(isHistoryStakingTx);\n    // Sort by stake end date\n    const sorted = filtered.sort((a, b) => {\n        const aTime = a.stakeEnd.getTime();\n        const bTime = b.stakeEnd.getTime();\n        return bTime - aTime;\n    });\n\n    const rows = [stakingHeaders, ...parseStakingTxs(sorted)];\n    return createCSVContent(rows);\n}\n\n/**\n * Parses each staking transaction according to the headers defined in constants and returns an array of strings for\n * each cell in the CSV.\n * @param txs\n */\nexport function parseStakingTxs(txs: iHistoryStaking[]) {\n    return txs.map((tx) => {\n        const txDate = moment(tx.timestamp).format();\n        const stakeStart = moment(tx.stakeStart).format();\n        const stakeEnd = moment(tx.stakeEnd).format();\n        const now = Date.now();\n\n        const stakeAmt = bnToBigAvaxP(tx.amount).toString();\n\n        let rewardAmt;\n        if (tx.stakeEnd.getTime() > now) {\n            rewardAmt = 'Pending';\n        } else if (!tx.isRewarded) {\n            rewardAmt = 'Stake Not Rewarded';\n        } else if (tx.rewardAmount) {\n            rewardAmt = !tx.rewardAmount.isZero() ? bnToBigAvaxP(tx.rewardAmount).toString() : 'Not Reward Owner';\n        } else {\n            rewardAmt = 'Not Reward Owner';\n        }\n\n        return [tx.id, txDate, tx.type, tx.nodeID, stakeAmt, stakeStart, stakeEnd, tx.isRewarded.toString(), rewardAmt];\n    });\n}\n","import { HistoryItemType, isHistoryBaseTx, isHistoryEVMTx, isHistoryImportExportTx } from '@/History';\nimport { normalHeaders } from '@/Csv/constants';\nimport { createCSVContent } from '@/Csv/createCsvContent';\nimport { bnToBig, bnToBigAvaxC, bnToBigAvaxX } from '@/utils';\nimport moment from 'moment';\n\n/**\n * Given an array of history transactions, filter the base and export/import txs and returns the body of a csv file.\n * @remarks You can download the returned string as a CSV file.\n * @param txs An array of transactions made by a wallet.\n */\nexport function createCsvNormal(txs: HistoryItemType[]) {\n    const rows = [normalHeaders, ...parseNormalTxs(txs)];\n    return createCSVContent(rows);\n}\n\nexport function parseNormalTxs(txs: HistoryItemType[]) {\n    const rows: string[][] = [];\n    txs.map((tx) => {\n        const mom = moment(tx.timestamp);\n        const dateStr = mom.format();\n\n        if (isHistoryBaseTx(tx)) {\n            const tokenRows = tx.tokens.map((token) => {\n                const amtStr = bnToBig(token.amount, token.asset.denomination).toString();\n                return [tx.id, dateStr, tx.type, token.asset.symbol, amtStr, `\"${token.addresses.join('\\r')}\"`, 'X'];\n            });\n            rows.push(...tokenRows);\n        } else if (isHistoryImportExportTx(tx)) {\n            const amtStr = bnToBigAvaxX(tx.amount).toString();\n            rows.push([tx.id, dateStr, tx.type, 'AVAX', amtStr, '', `${tx.source} to ${tx.destination}`]);\n        } else if (isHistoryEVMTx(tx)) {\n            const amtStr = bnToBigAvaxC(tx.amount).toString();\n            const amtSigned = tx.isSender ? `-${amtStr}` : amtStr;\n            if (!tx.input) {\n                const addr = tx.isSender ? tx.to : tx.from;\n                rows.push([tx.id, dateStr, tx.type, 'AVAX', amtSigned, addr, `C`]);\n            }\n        }\n    });\n    return rows;\n}\n"],"names":["TestXBlockchainID","DefaultPlatformChainID","TestCBlockchainID","TestAvaxAssetID","Avalanche","ethers","BinTools","ContractFactory","MinterSet","OutputOwners","Common","tx","FeeMarketEIP1559Transaction","Transaction","Chain","Hardfork","ethersProvider","AVMConstants","PlatformVMConstants","EVMConstants","activeNetwork","BN","erc20Cache","PubSub","Buffer","Crypto","AjsBuffer","bip39","PayloadTypes","BufferAvalanche","Assets.getAssetDescription","EVMInput","SECPTransferOutput","TransferableOutput","ExportTx","UnsignedTx","costExportTx","AVMUTXOSet","PlatformUTXOSet","UnixNow","AVMKeyPair","computeAddress","computePublicKey","EVMKeyPair","networks","ECPair","payments","bip32","BufferNative","RLP","PlatformImportTx","AVMTx","PlatformTx","EVMTx","EVMImportTx","AVMSelectCredentialClass","PlatformSelectCredentialClass","EVMSelectCredentialClass","Signature","bitcoin","EVMKeyChain","personalSign","signTypedData","SignTypedDataVersion"],"mappings":"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"}